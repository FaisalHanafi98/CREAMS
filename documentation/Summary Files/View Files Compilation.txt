attendancesmark.blade

views/activities/attendances

@extends('layouts.app')

@section('title', 'Mark Attendance')

@section('styles')
<link rel="stylesheet" href="{{ asset('css/activities.css') }}">
@endsection

@section('content')
<div class="container-fluid">
    <div class="row">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h4 class="mb-0">Mark Attendance</h4>
                    <p class="mb-0 text-muted">
                        {{ $session->activity->activity_name }} - {{ $session->class_name }}
                    </p>
                </div>
                <div class="card-body">
                    <form action="{{ route('activities.attendance.store', $session->id) }}" 
                          method="POST" id="attendanceForm">
                        @csrf
                        
                        <div class="form-group">
                            <label for="date">Attendance Date</label>
                            <input type="date" class="form-control" id="date" name="date" 
                                   value="{{ $date }}" required>
                        </div>
                        
                        <div class="d-flex justify-content-between mb-3">
                            <h5>Trainees</h5>
                            <div>
                                <button type="button" class="btn btn-sm btn-success quick-mark" 
                                        data-status="Present">
                                    <i class="fas fa-check"></i> Mark All Present
                                </button>
                                <button type="button" class="btn btn-sm btn-danger quick-mark" 
                                        data-status="Absent">
                                    <i class="fas fa-times"></i> Mark All Absent
                                </button>
                            </div>
                        </div>
                        
                        <div class="attendance-grid">
                            @forelse($session->activeEnrollments as $enrollment)
                            <div class="attendance-item">
                                <div class="trainee-info">
                                    <h6>{{ $enrollment->trainee->name }}</h6>
                                    <small class="text-muted">ID: {{ $enrollment->trainee->trainee_id }}</small>
                                </div>
                                <div class="attendance-controls">
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input attendance-status" 
                                               type="radio" 
                                               name="attendance[{{ $enrollment->trainee_id }}]" 
                                               id="present_{{ $enrollment->trainee_id }}" 
                                               value="Present"
                                               {{ ($attendance[$enrollment->trainee_id] ?? '') == 'Present' ? 'checked' : '' }}>
                                        <label class="form-check-label" for="present_{{ $enrollment->trainee_id }}">
                                            Present
                                        </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input attendance-status" 
                                               type="radio" 
                                               name="attendance[{{ $enrollment->trainee_id }}]" 
                                               id="absent_{{ $enrollment->trainee_id }}" 
                                               value="Absent"
                                               {{ ($attendance[$enrollment->trainee_id] ?? '') == 'Absent' ? 'checked' : '' }}>
                                        <label class="form-check-label" for="absent_{{ $enrollment->trainee_id }}">
                                            Absent
                                        </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input attendance-status" 
                                               type="radio" 
                                               name="attendance[{{ $enrollment->trainee_id }}]" 
                                               id="late_{{ $enrollment->trainee_id }}" 
                                               value="Late"
                                               {{ ($attendance[$enrollment->trainee_id] ?? '') == 'Late' ? 'checked' : '' }}>
                                        <label class="form-check-label" for="late_{{ $enrollment->trainee_id }}">
                                            Late
                                        </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input attendance-status" 
                                               type="radio" 
                                               name="attendance[{{ $enrollment->trainee_id }}]" 
                                               id="excused_{{ $enrollment->trainee_id }}" 
                                               value="Excused"
                                               {{ ($attendance[$enrollment->trainee_id] ?? '') == 'Excused' ? 'checked' : '' }}>
                                        <label class="form-check-label" for="excused_{{ $enrollment->trainee_id }}">
                                            Excused
                                        </label>
                                    </div>
                                </div>
                                <div class="mt-2">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <input type="number" 
                                                   class="form-control form-control-sm participation-score" 
                                                   name="participation[{{ $enrollment->trainee_id }}]" 
                                                   placeholder="Score (0-10)" 
                                                   min="0" max="10"
                                                   {{ in_array($attendance[$enrollment->trainee_id] ?? '', ['Present', 'Late']) ? '' : 'disabled' }}>
                                        </div>
                                        <div class="col-md-8">
                                            <input type="text" 
                                                   class="form-control form-control-sm" 
                                                   name="notes[{{ $enrollment->trainee_id }}]" 
                                                   placeholder="Notes (optional)">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            @empty
                            <p class="text-center text-muted">No trainees enrolled in this session.</p>
                            @endforelse
                        </div>
                        
                        <div class="form-group mt-4">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Save Attendance
                            </button>
                            <a href="{{ route('activities.sessions', $session->activity_id) }}" 
                               class="btn btn-secondary">
                                <i class="fas fa-times"></i> Cancel
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Session Info</h5>
                </div>
                <div class="card-body">
                    <dl>
                        <dt>Day</dt>
                        <dd>{{ $session->day_of_week }}</dd>
                        
                        <dt>Time</dt>
                        <dd>
                            {{ Carbon\Carbon::parse($session->start_time)->format('g:i A') }} - 
                            {{ Carbon\Carbon::parse($session->end_time)->format('g:i A') }}
                        </dd>
                        
                        <dt>Teacher</dt>
                        <dd>{{ $session->teacher->name }}</dd>
                        
                        <dt>Location</dt>
                        <dd>{{ $session->location ?? 'Not specified' }}</dd>
                        
                        <dt>Total Enrolled</dt>
                        <dd>{{ $session->activeEnrollments->count() }} trainees</dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection

@section('scripts')
<script src="{{ asset('js/activities.js') }}"></script>
@endsection

sessionsindex.blade

views/activities/sessions

@extends('layouts.app')

@section('title', $activity->activity_name . ' - Sessions')

@section('styles')
<link rel="stylesheet" href="{{ asset('css/activities.css') }}">
@endsection

@section('content')
<div class="container-fluid">
    <!-- Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h1 class="h3 mb-0">{{ $activity->activity_name }} - Sessions</h1>
                    <p class="text-muted mb-0">{{ $activity->activity_code }} | {{ $activity->category }}</p>
                </div>
                <div>
                    <a href="{{ route('activities.sessions.create', $activity->id) }}" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Add Session
                    </a>
                    <a href="{{ route('activities.show', $activity->id) }}" class="btn btn-secondary">
                        <i class="fas fa-arrow-left"></i> Back to Activity
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Sessions by Class -->
    @forelse($sessionsByClass as $className => $sessions)
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">{{ $className }}</h5>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>Day</th>
                            <th>Time</th>
                            <th>Teacher</th>
                            <th>Location</th>
                            <th>Enrollments</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach($sessions as $session)
                        <tr>
                            <td>{{ $session->day_of_week }}</td>
                            <td>
                                {{ Carbon\Carbon::parse($session->start_time)->format('g:i A') }} - 
                                {{ Carbon\Carbon::parse($session->end_time)->format('g:i A') }}
                            </td>
                            <td>{{ $session->teacher->name ?? 'Not Assigned' }}</td>
                            <td>{{ $session->location ?? '-' }}</td>
                            <td>
                                <span class="badge badge-info">
                                    {{ $session->activeEnrollments->count() }} / {{ $session->max_trainees }}
                                </span>
                            </td>
                            <td>
                                <span class="badge {{ $session->is_active ? 'badge-success' : 'badge-secondary' }}">
                                    {{ $session->is_active ? 'Active' : 'Inactive' }}
                                </span>
                            </td>
                            <td>
                                <div class="btn-group" role="group">
                                    <a href="{{ route('activities.sessions.edit', [$activity->id, $session->id]) }}" 
                                       class="btn btn-sm btn-outline-primary" title="Edit">
                                        <i class="fas fa-edit"></i>
                                    </a>
                                    <a href="{{ route('activities.attendance.mark', $session->id) }}" 
                                       class="btn btn-sm btn-outline-info" title="Attendance">
                                        <i class="fas fa-check-square"></i>
                                    </a>
                                    <button type="button" class="btn btn-sm btn-outline-success" 
                                            onclick="enrollTrainees({{ $session->id }})" title="Enroll">
                                        <i class="fas fa-user-plus"></i>
                                    </button>
                                    <form action="{{ route('activities.sessions.destroy', [$activity->id, $session->id]) }}" 
                                          method="POST" style="display: inline-block;"
                                          onsubmit="return confirm('Are you sure you want to delete this session?')">
                                        @csrf
                                        @method('DELETE')
                                        <button type="submit" class="btn btn-sm btn-outline-danger" title="Delete">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                        @endforeach
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    @empty
    <div class="card">
        <div class="card-body text-center py-5">
            <i class="fas fa-calendar-times fa-4x text-muted mb-3"></i>
            <h4>No Sessions Scheduled</h4>
            <p class="text-muted">No sessions have been scheduled for this activity yet.</p>
            <a href="{{ route('activities.sessions.create', $activity->id) }}" class="btn btn-primary">
                <i class="fas fa-plus"></i> Schedule First Session
            </a>
        </div>
    </div>
    @endforelse
</div>

<!-- Enrollment Modal -->
<div class="modal fade" id="enrollModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Enroll Trainees</h5>
                <button type="button" class="close" data-dismiss="modal">
                    <span>&times;</span>
                </button>
            </div>
            <form id="enrollForm" method="POST">
                @csrf
                <div class="modal-body">
                    <div id="traineesList">
                        <p class="text-center">
                            <i class="fas fa-spinner fa-spin"></i> Loading eligible trainees...
                        </p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Enroll Selected</button>
                </div>
            </form>
        </div>
    </div>
</div>
@endsection

@section('scripts')
<script src="{{ asset('js/activities.js') }}"></script>
@endsection

activitiescreate.blade
views/activities

@extends('layouts.app')

@section('title', 'Create Activity')

@section('styles')
<link rel="stylesheet" href="{{ asset('css/activities.css') }}">
@endsection

@section('content')
<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h4 class="mb-0">Create New Activity</h4>
                </div>
                <div class="card-body">
                    <form action="{{ route('activities.store') }}" method="POST" id="createActivityForm">
                        @csrf
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="activity_name">Activity Name <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control @error('activity_name') is-invalid @enderror" 
                                           id="activity_name" name="activity_name" value="{{ old('activity_name') }}" required>
                                    @error('activity_name')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="activity_code">Activity Code <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control @error('activity_code') is-invalid @enderror" 
                                           id="activity_code" name="activity_code" value="{{ old('activity_code') }}" 
                                           placeholder="e.g., SPCH101" required>
                                    @error('activity_code')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="category">Category <span class="text-danger">*</span></label>
                                    <select class="form-control @error('category') is-invalid @enderror" 
                                            id="category" name="category" required>
                                        <option value="">Select Category</option>
                                        @foreach($categories as $category)
                                        <option value="{{ $category }}" {{ old('category') == $category ? 'selected' : '' }}>
                                            {{ $category }}
                                        </option>
                                        @endforeach
                                    </select>
                                    @error('category')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                            </div>
                            
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="age_group">Age Group <span class="text-danger">*</span></label>
                                    <select class="form-control @error('age_group') is-invalid @enderror" 
                                            id="age_group" name="age_group" required>
                                        <option value="">Select Age Group</option>
                                        <option value="3-6" {{ old('age_group') == '3-6' ? 'selected' : '' }}>3-6 years</option>
                                        <option value="7-12" {{ old('age_group') == '7-12' ? 'selected' : '' }}>7-12 years</option>
                                        <option value="13-18" {{ old('age_group') == '13-18' ? 'selected' : '' }}>13-18 years</option>
                                        <option value="All Ages" {{ old('age_group') == 'All Ages' ? 'selected' : '' }}>All Ages</option>
                                    </select>
                                    @error('age_group')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                            </div>
                            
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="difficulty_level">Difficulty <span class="text-danger">*</span></label>
                                    <select class="form-control @error('difficulty_level') is-invalid @enderror" 
                                            id="difficulty_level" name="difficulty_level" required>
                                        <option value="">Select Level</option>
                                        <option value="Beginner" {{ old('difficulty_level') == 'Beginner' ? 'selected' : '' }}>Beginner</option>
                                        <option value="Intermediate" {{ old('difficulty_level') == 'Intermediate' ? 'selected' : '' }}>Intermediate</option>
                                        <option value="Advanced" {{ old('difficulty_level') == 'Advanced' ? 'selected' : '' }}>Advanced</option>
                                    </select>
                                    @error('difficulty_level')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="description">Description <span class="text-danger">*</span></label>
                            <textarea class="form-control @error('description') is-invalid @enderror" 
                                      id="description" name="description" rows="3" required>{{ old('description') }}</textarea>
                            @error('description')
                                <div class="invalid-feedback">{{ $message }}</div>
                            @enderror
                        </div>
                        
                        <div class="form-group">
                            <label for="objectives">Learning Objectives</label>
                            <textarea class="form-control @error('objectives') is-invalid @enderror" 
                                      id="objectives" name="objectives" rows="3" 
                                      placeholder="Enter each objective on a new line">{{ old('objectives') }}</textarea>
                            @error('objectives')
                                <div class="invalid-feedback">{{ $message }}</div>
                            @enderror
                        </div>
                        
                        <div class="form-group">
                            <label for="materials_needed">Materials Needed</label>
                            <textarea class="form-control @error('materials_needed') is-invalid @enderror" 
                                      id="materials_needed" name="materials_needed" rows="2" 
                                      placeholder="List required materials">{{ old('materials_needed') }}</textarea>
                            @error('materials_needed')
                                <div class="invalid-feedback">{{ $message }}</div>
                            @enderror
                        </div>
                        
                        <div class="form-group">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Create Activity
                            </button>
                            <a href="{{ route('activities.index') }}" class="btn btn-secondary">
                                <i class="fas fa-times"></i> Cancel
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection

@section('scripts')
<script src="{{ asset('js/activities.js') }}"></script>
@endsection

activitiesedit.blade
views/activities

@extends('layouts.app')

@section('title', 'Edit Activity')

@section('styles')
<link rel="stylesheet" href="{{ asset('css/activities.css') }}">
@endsection

@section('content')
<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h4 class="mb-0">Edit Activity</h4>
                </div>
                <div class="card-body">
                    <form action="{{ route('activities.update', $activity->id) }}" method="POST" id="editActivityForm">
                        @csrf
                        @method('PUT')
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="activity_name">Activity Name <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control @error('activity_name') is-invalid @enderror" 
                                           id="activity_name" name="activity_name" 
                                           value="{{ old('activity_name', $activity->activity_name) }}" required>
                                    @error('activity_name')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="activity_code">Activity Code <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control @error('activity_code') is-invalid @enderror" 
                                           id="activity_code" name="activity_code" 
                                           value="{{ old('activity_code', $activity->activity_code) }}" required>
                                    @error('activity_code')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="category">Category <span class="text-danger">*</span></label>
                                    <select class="form-control @error('category') is-invalid @enderror" 
                                            id="category" name="category" required>
                                        <option value="">Select Category</option>
                                        @foreach($categories as $category)
                                        <option value="{{ $category }}" 
                                                {{ old('category', $activity->category) == $category ? 'selected' : '' }}>
                                            {{ $category }}
                                        </option>
                                        @endforeach
                                    </select>
                                    @error('category')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                            </div>
                            
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="age_group">Age Group <span class="text-danger">*</span></label>
                                    <select class="form-control @error('age_group') is-invalid @enderror" 
                                            id="age_group" name="age_group" required>
                                        <option value="">Select Age Group</option>
                                        <option value="3-6" {{ old('age_group', $activity->age_group) == '3-6' ? 'selected' : '' }}>3-6 years</option>
                                        <option value="7-12" {{ old('age_group', $activity->age_group) == '7-12' ? 'selected' : '' }}>7-12 years</option>
                                        <option value="13-18" {{ old('age_group', $activity->age_group) == '13-18' ? 'selected' : '' }}>13-18 years</option>
                                        <option value="All Ages" {{ old('age_group', $activity->age_group) == 'All Ages' ? 'selected' : '' }}>All Ages</option>
                                    </select>
                                    @error('age_group')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                            </div>
                            
                            <div class="col-md-3">
                                <div class="form-group">
                                    <label for="difficulty_level">Difficulty <span class="text-danger">*</span></label>
                                    <select class="form-control @error('difficulty_level') is-invalid @enderror" 
                                            id="difficulty_level" name="difficulty_level" required>
                                        <option value="">Select Level</option>
                                        <option value="Beginner" {{ old('difficulty_level', $activity->difficulty_level) == 'Beginner' ? 'selected' : '' }}>Beginner</option>
                                        <option value="Intermediate" {{ old('difficulty_level', $activity->difficulty_level) == 'Intermediate' ? 'selected' : '' }}>Intermediate</option>
                                        <option value="Advanced" {{ old('difficulty_level', $activity->difficulty_level) == 'Advanced' ? 'selected' : '' }}>Advanced</option>
                                    </select>
                                    @error('difficulty_level')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="description">Description <span class="text-danger">*</span></label>
                            <textarea class="form-control @error('description') is-invalid @enderror" 
                                      id="description" name="description" rows="3" required>{{ old('description', $activity->description) }}</textarea>
                            @error('description')
                                <div class="invalid-feedback">{{ $message }}</div>
                            @enderror
                        </div>
                        
                        <div class="form-group">
                            <label for="objectives">Learning Objectives</label>
                            <textarea class="form-control @error('objectives') is-invalid @enderror" 
                                      id="objectives" name="objectives" rows="3" 
                                      placeholder="Enter each objective on a new line">{{ old('objectives', $activity->objectives) }}</textarea>
                            @error('objectives')
                                <div class="invalid-feedback">{{ $message }}</div>
                            @enderror
                        </div>
                        
                        <div class="form-group">
                            <label for="materials_needed">Materials Needed</label>
                            <textarea class="form-control @error('materials_needed') is-invalid @enderror" 
                                      id="materials_needed" name="materials_needed" rows="2" 
                                      placeholder="List required materials">{{ old('materials_needed', $activity->materials_needed) }}</textarea>
                            @error('materials_needed')
                                <div class="invalid-feedback">{{ $message }}</div>
                            @enderror
                        </div>
                        
                        <div class="form-group">
                            <div class="custom-control custom-switch">
                                <input type="checkbox" class="custom-control-input" id="is_active" 
                                       name="is_active" value="1" 
                                       {{ old('is_active', $activity->is_active) ? 'checked' : '' }}>
                                <label class="custom-control-label" for="is_active">
                                    Activity is Active
                                </label>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Update Activity
                            </button>
                            <a href="{{ route('activities.show', $activity->id) }}" class="btn btn-secondary">
                                <i class="fas fa-times"></i> Cancel
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection

@section('scripts')
<script src="{{ asset('js/activities.js') }}"></script>
@endsection

activitiesindex.blade
views/activities

@extends('layouts.app')

@section('title', 'Activities Management')

@section('styles')
<link rel="stylesheet" href="{{ asset('css/activities.css') }}">
@endsection

@section('content')
<div class="container-fluid">
    <!-- Header Section -->
    <div class="activities-header">
        <div class="activities-header-content">
            <div>
                <h1 class="activities-title">Activities Management</h1>
                <p class="activities-subtitle">Manage rehabilitation activities and sessions</p>
            </div>
            @if(in_array(session('role'), ['admin', 'supervisor']))
            <div>
                <a href="{{ route('activities.create') }}" class="btn btn-light">
                    <i class="fas fa-plus-circle"></i> Create New Activity
                </a>
            </div>
            @endif
        </div>
    </div>

    <!-- Statistics Cards -->
    <div class="stats-row row g-4 mb-4">
        <div class="col-xl-3 col-lg-6">
            <div class="activity-stat-card">
                <div class="stat-icon-wrapper">
                    <div>
                        <div class="activity-stat-value">{{ $stats['total_activities'] ?? 0 }}</div>
                        <div class="activity-stat-label">Total Activities</div>
                    </div>
                    <div class="activity-stat-icon primary">
                        <i class="fas fa-tasks"></i>
                    </div>
                </div>
                <div class="mt-3">
                    <small class="text-muted">
                        <i class="fas fa-info-circle"></i> All registered activities
                    </small>
                </div>
            </div>
        </div>
        
        <div class="col-xl-3 col-lg-6">
            <div class="activity-stat-card">
                <div class="stat-icon-wrapper">
                    <div>
                        <div class="activity-stat-value">{{ $stats['active_activities'] ?? 0 }}</div>
                        <div class="activity-stat-label">Active Activities</div>
                    </div>
                    <div class="activity-stat-icon success">
                        <i class="fas fa-check-circle"></i>
                    </div>
                </div>
                <div class="mt-3">
                    <small class="text-success">
                        <i class="fas fa-arrow-up"></i> {{ round(($stats['active_activities'] / max($stats['total_activities'], 1)) * 100) }}% active
                    </small>
                </div>
            </div>
        </div>
        
        <div class="col-xl-3 col-lg-6">
            <div class="activity-stat-card">
                <div class="stat-icon-wrapper">
                    <div>
                        <div class="activity-stat-value">{{ $stats['total_sessions'] ?? 0 }}</div>
                        <div class="activity-stat-label">Total Sessions</div>
                    </div>
                    <div class="activity-stat-icon info">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                </div>
                <div class="mt-3">
                    <small class="text-info">
                        <i class="fas fa-clock"></i> This semester
                    </small>
                </div>
            </div>
        </div>
        
        <div class="col-xl-3 col-lg-6">
            <div class="activity-stat-card">
                <div class="stat-icon-wrapper">
                    <div>
                        <div class="activity-stat-value">{{ $stats['total_enrollments'] ?? 0 }}</div>
                        <div class="activity-stat-label">Total Enrollments</div>
                    </div>
                    <div class="activity-stat-icon warning">
                        <i class="fas fa-users"></i>
                    </div>
                </div>
                <div class="mt-3">
                    <small class="text-warning">
                        <i class="fas fa-user-plus"></i> Active enrollments
                    </small>
                </div>
            </div>
        </div>
    </div>

    <!-- Filters Section -->
    <div class="filter-section">
        <div class="filter-row">
            <div class="filter-group">
                <label class="filter-label">Category</label>
                <select id="categoryFilter" class="form-select">
                    <option value="">All Categories</option>
                    @foreach($categories as $category)
                    <option value="{{ $category }}">{{ $category }}</option>
                    @endforeach
                </select>
            </div>
            
            <div class="filter-group">
                <label class="filter-label">Status</label>
                <select id="statusFilter" class="form-select">
                    <option value="">All Status</option>
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label class="filter-label">Age Group</label>
                <select id="ageFilter" class="form-select">
                    <option value="">All Ages</option>
                    <option value="3-6">3-6 years</option>
                    <option value="7-12">7-12 years</option>
                    <option value="13-18">13-18 years</option>
                    <option value="All Ages">All Ages</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label class="filter-label">Search</label>
                <div class="search-input">
                    <input type="text" id="searchInput" class="form-control" placeholder="Search activities...">
                    <i class="fas fa-search"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Activities Grid -->
    <div class="activities-grid" id="activitiesGrid">
        @forelse($activities as $activity)
        <div class="activity-card fade-in-up" 
             data-category="{{ $activity->category }}"
             data-status="{{ $activity->is_active ? 'active' : 'inactive' }}"
             data-age="{{ $activity->age_group }}"
             data-name="{{ strtolower($activity->activity_name) }}">
            
            <div class="activity-card-header">
                <h3 class="activity-card-title">
                    {{ $activity->activity_name }}
                    <span class="activity-code">{{ $activity->activity_code }}</span>
                </h3>
            </div>
            
            <div class="activity-card-body">
                <div class="activity-category-badge">
                    <i class="fas fa-tag"></i> {{ $activity->category }}
                </div>
                
                <p class="activity-description">
                    {{ Str::limit($activity->description, 120) }}
                </p>
                
                <div class="activity-meta-grid">
                    <div class="activity-meta-item">
                        <i class="fas fa-child"></i>
                        <span>{{ $activity->age_group }}</span>
                    </div>
                    <div class="activity-meta-item">
                        <i class="fas fa-signal"></i>
                        <span>{{ $activity->difficulty_level }}</span>
                    </div>
                    <div class="activity-meta-item">
                        <i class="fas fa-calendar-check"></i>
                        <span>{{ $activity->active_sessions_count }} sessions</span>
                    </div>
                    <div class="activity-meta-item">
                        <i class="fas fa-user"></i>
                        <span>{{ $activity->creator->name ?? 'System' }}</span>
                    </div>
                </div>
            </div>
            
            <div class="activity-card-footer">
                <div class="activity-actions">
                    <a href="{{ route('activities.show', $activity->id) }}" 
                       class="btn-activity btn-activity-primary"
                       data-bs-toggle="tooltip" title="View Details">
                        <i class="fas fa-eye"></i> View
                    </a>
                    
                    @if(in_array(session('role'), ['admin', 'supervisor']))
                    <a href="{{ route('activities.edit', $activity->id) }}" 
                       class="btn-activity btn-activity-secondary"
                       data-bs-toggle="tooltip" title="Edit Activity">
                        <i class="fas fa-edit"></i>
                    </a>
                    
                    <a href="{{ route('activities.sessions', $activity->id) }}" 
                       class="btn-activity btn-activity-secondary"
                       data-bs-toggle="tooltip" title="Manage Sessions">
                        <i class="fas fa-calendar"></i>
                    </a>
                    @endif
                </div>
                
                <span class="activity-status-badge {{ $activity->is_active ? 'badge-active' : 'badge-inactive' }}">
                    {{ $activity->is_active ? 'Active' : 'Inactive' }}
                </span>
            </div>
        </div>
        @empty
        <div class="col-12">
            <div class="empty-state-card">
                <div class="empty-state-icon">
                    <i class="fas fa-clipboard-list"></i>
                </div>
                <h4 class="empty-state-title">No Activities Found</h4>
                <p class="empty-state-text">
                    @if(request()->has('search') || request()->has('category'))
                        No activities match your search criteria. Try adjusting your filters.
                    @else
                        There are no activities in the system yet.
                    @endif
                </p>
                @if(in_array(session('role'), ['admin', 'supervisor']))
                <a href="{{ route('activities.create') }}" class="btn btn-primary">
                    <i class="fas fa-plus-circle"></i> Create First Activity
                </a>
                @endif
            </div>
        </div>
        @endforelse
    </div>
</div>

<!-- Success/Error Messages -->
@if(session('success'))
<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
    <div class="toast show align-items-center text-white bg-success border-0" role="alert">
        <div class="d-flex">
            <div class="toast-body">
                <i class="fas fa-check-circle me-2"></i>
                {{ session('success') }}
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
        </div>
    </div>
</div>
@endif

@if(session('error'))
<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
    <div class="toast show align-items-center text-white bg-danger border-0" role="alert">
        <div class="d-flex">
            <div class="toast-body">
                <i class="fas fa-exclamation-circle me-2"></i>
                {{ session('error') }}
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
        </div>
    </div>
</div>
@endif

@if(session('warning'))
<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
    <div class="toast show align-items-center text-dark bg-warning border-0" role="alert">
        <div class="d-flex">
            <div class="toast-body">
                <i class="fas fa-exclamation-triangle me-2"></i>
                {{ session('warning') }}
            </div>
            <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast"></button>
        </div>
    </div>
</div>
@endif
@endsection

@section('scripts')
<script src="{{ asset('js/activities.js') }}"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize tooltips
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    });
    
    // Auto-hide toasts after 5 seconds
    document.querySelectorAll('.toast').forEach(function(toast) {
        setTimeout(function() {
            toast.classList.remove('show');
        }, 5000);
    });
    
    // Enhanced filtering functionality
    const categoryFilter = document.getElementById('categoryFilter');
    const statusFilter = document.getElementById('statusFilter');
    const ageFilter = document.getElementById('ageFilter');
    const searchInput = document.getElementById('searchInput');
    const activitiesGrid = document.getElementById('activitiesGrid');
    
    function filterActivities() {
        const category = categoryFilter.value.toLowerCase();
        const status = statusFilter.value;
        const age = ageFilter.value;
        const search = searchInput.value.toLowerCase();
        
        const cards = activitiesGrid.querySelectorAll('.activity-card');
        let visibleCount = 0;
        
        cards.forEach(card => {
            const cardCategory = card.dataset.category.toLowerCase();
            const cardStatus = card.dataset.status;
            const cardAge = card.dataset.age;
            const cardName = card.dataset.name;
            
            let show = true;
            
            if (category && cardCategory !== category) show = false;
            if (status && cardStatus !== status) show = false;
            if (age && cardAge !== age) show = false;
            if (search && !cardName.includes(search)) show = false;
            
            if (show) {
                card.style.display = '';
                visibleCount++;
                // Add animation
                card.style.animation = 'fadeInUp 0.5s ease-out';
            } else {
                card.style.display = 'none';
            }
        });
        
        // Show empty state if no results
        const emptyState = activitiesGrid.querySelector('.empty-state-card');
        if (visibleCount === 0 && !emptyState) {
            const emptyHtml = `
                <div class="col-12">
                    <div class="empty-state-card">
                        <div class="empty-state-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h4 class="empty-state-title">No Results Found</h4>
                        <p class="empty-state-text">
                            Try adjusting your filters or search terms.
                        </p>
                        <button onclick="clearFilters()" class="btn btn-primary">
                            <i class="fas fa-redo"></i> Clear Filters
                        </button>
                    </div>
                </div>
            `;
            activitiesGrid.insertAdjacentHTML('beforeend', emptyHtml);
        } else if (visibleCount > 0 && emptyState) {
            emptyState.parentElement.remove();
        }
    }
    
    // Attach event listeners
    categoryFilter.addEventListener('change', filterActivities);
    statusFilter.addEventListener('change', filterActivities);
    ageFilter.addEventListener('change', filterActivities);
    
    // Debounce search input
    let searchTimeout;
    searchInput.addEventListener('input', function() {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(filterActivities, 300);
    });
    
    // Clear filters function
    window.clearFilters = function() {
        categoryFilter.value = '';
        statusFilter.value = '';
        ageFilter.value = '';
        searchInput.value = '';
        filterActivities();
    }
});
</script>
@endsection

activitiesshow.blade
views/activities

@extends('layouts.app')

@section('title', $activity->activity_name)

@section('styles')
<link rel="stylesheet" href="{{ asset('css/activities.css') }}">
@endsection

@section('content')
<div class="container-fluid">
    <div class="row">
        <div class="col-md-8">
            <!-- Activity Details Card -->
            <div class="card mb-4">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h4 class="mb-0">{{ $activity->activity_name }}</h4>
                    <span class="badge {{ $activity->is_active ? 'badge-success' : 'badge-secondary' }}">
                        {{ $activity->is_active ? 'Active' : 'Inactive' }}
                    </span>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <p><strong>Activity Code:</strong> {{ $activity->activity_code }}</p>
                            <p><strong>Category:</strong> {{ $activity->category }}</p>
                            <p><strong>Age Group:</strong> {{ $activity->age_group }}</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Difficulty Level:</strong> {{ $activity->difficulty_level }}</p>
                            <p><strong>Created By:</strong> {{ $activity->creator->name ?? 'System' }}</p>
                            <p><strong>Created On:</strong> {{ $activity->created_at->format('d M Y') }}</p>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <h5>Description</h5>
                        <p>{{ $activity->description }}</p>
                    </div>
                    
                    @if($activity->objectives)
                    <div class="mb-3">
                        <h5>Learning Objectives</h5>
                        <ul>
                            @foreach(explode("\n", $activity->objectives) as $objective)
                                @if(trim($objective))
                                <li>{{ trim($objective) }}</li>
                                @endif
                            @endforeach
                        </ul>
                    </div>
                    @endif
                    
                    @if($activity->materials_needed)
                    <div class="mb-3">
                        <h5>Materials Needed</h5>
                        <p>{{ $activity->materials_needed }}</p>
                    </div>
                    @endif
                    
                    <div class="mt-4">
                        @if(in_array(session('role'), ['admin', 'supervisor']))
                        <a href="{{ route('activities.edit', $activity->id) }}" class="btn btn-primary">
                            <i class="fas fa-edit"></i> Edit Activity
                        </a>
                        <a href="{{ route('activities.sessions', $activity->id) }}" class="btn btn-info">
                            <i class="fas fa-calendar"></i> Manage Sessions
                        </a>
                        @endif
                        <a href="{{ route('activities.index') }}" class="btn btn-secondary">
                            <i class="fas fa-arrow-left"></i> Back to Activities
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Sessions Card -->
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Active Sessions</h5>
                </div>
                <div class="card-body">
                    @if($activity->activeSessions->count() > 0)
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Class</th>
                                    <th>Teacher</th>
                                    <th>Schedule</th>
                                    <th>Time</th>
                                    <th>Enrollments</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach($activity->activeSessions as $session)
                                <tr>
                                    <td>{{ $session->class_name }}</td>
                                    <td>{{ $session->teacher->name ?? 'Not Assigned' }}</td>
                                    <td>{{ $session->day_of_week }}</td>
                                    <td>{{ Carbon\Carbon::parse($session->start_time)->format('g:i A') }} - 
                                        {{ Carbon\Carbon::parse($session->end_time)->format('g:i A') }}</td>
                                    <td>
                                        {{ $session->activeEnrollments->count() }} / {{ $session->max_trainees }}
                                    </td>
                                    <td>
                                        @if(in_array(session('role'), ['admin', 'supervisor', 'teacher']))
                                        <a href="{{ route('activities.attendance.mark', $session->id) }}" 
                                           class="btn btn-sm btn-outline-primary">
                                            <i class="fas fa-check-square"></i> Attendance
                                        </a>
                                        @endif
                                    </td>
                                </tr>
                                @endforeach
                            </tbody>
                        </table>
                    </div>
                    @else
                    <p class="text-muted text-center">No active sessions scheduled for this activity.</p>
                    @endif
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <!-- Statistics Card -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">Statistics</h5>
                </div>
                <div class="card-body">
                    <div class="stat-item">
                        <i class="fas fa-calendar-alt text-primary"></i>
                        <span>Total Sessions: {{ $stats['total_sessions'] }}</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-check-circle text-success"></i>
                        <span>Active Sessions: {{ $stats['active_sessions'] }}</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-users text-info"></i>
                        <span>Total Enrollments: {{ $stats['total_enrollments'] }}</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-chalkboard-teacher text-warning"></i>
                        <span>Teachers: {{ $stats['teachers'] }}</span>
                    </div>
                </div>
            </div>
            
            <!-- Quick Actions Card -->
            @if(in_array(session('role'), ['admin', 'supervisor']))
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Quick Actions</h5>
                </div>
                <div class="card-body">
                    <a href="{{ route('activities.sessions.create', $activity->id) }}" 
                       class="btn btn-block btn-primary mb-2">
                        <i class="fas fa-plus"></i> Add New Session
                    </a>
                    <a href="{{ route('activities.edit', $activity->id) }}" 
                       class="btn btn-block btn-secondary mb-2">
                        <i class="fas fa-edit"></i> Edit Activity
                    </a>
                    @if(!$activity->hasActiveEnrollments())
                    <form action="{{ route('activities.destroy', $activity->id) }}" method="POST" 
                          onsubmit="return confirm('Are you sure you want to deactivate this activity?')">
                        @csrf
                        @method('DELETE')
                        <button type="submit" class="btn btn-block btn-danger">
                            <i class="fas fa-times-circle"></i> Deactivate Activity
                        </button>
                    </form>
                    @endif
                </div>
            </div>
            @endif
        </div>
    </div>
</div>
@endsection

@section('scripts')
<script src="{{ asset('js/activities.js') }}"></script>
@endsection

activitiesstaffview.blade
views/activities

{{-- activities/ajk-view.blade.php --}}
@extends('layouts.app')

@section('title', 'Activities Overview - CREAMS')

@section('styles')
<link rel="stylesheet" href="{{ asset('css/activities.css') }}">
@endsection

@section('content')
<div class="container-fluid">
    <div class="page-header">
        <h1 class="page-title">
            <i class="fas fa-tasks"></i> Activities Overview
        </h1>
        <div class="page-actions">
            <button type="button" class="btn btn-outline-primary" onclick="window.print()">
                <i class="fas fa-print"></i> Print Report
            </button>
        </div>
    </div>

    <!-- Statistics Cards -->
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="stat-card stat-card-primary">
                <div class="stat-icon">
                    <i class="fas fa-clipboard-list"></i>
                </div>
                <div class="stat-content">
                    <h3>{{ $stats['total_activities'] }}</h3>
                    <p>Total Activities</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-card stat-card-success">
                <div class="stat-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="stat-content">
                    <h3>{{ $stats['active_activities'] }}</h3>
                    <p>Active Activities</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-card stat-card-info">
                <div class="stat-icon">
                    <i class="fas fa-calendar-alt"></i>
                </div>
                <div class="stat-content">
                    <h3>{{ $stats['total_sessions'] }}</h3>
                    <p>Active Sessions</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-card stat-card-warning">
                <div class="stat-icon">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-content">
                    <h3>{{ $stats['total_enrollments'] }}</h3>
                    <p>Total Enrollments</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Activities Overview -->
    <div class="card">
        <div class="card-header">
            <h5 class="m-0">Activities Overview</h5>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>Code</th>
                            <th>Activity Name</th>
                            <th>Category</th>
                            <th>Age Group</th>
                            <th>Difficulty</th>
                            <th>Sessions</th>
                            <th>Enrollments</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        @forelse($activities as $activity)
                            <tr>
                                <td>{{ $activity->activity_code }}</td>
                                <td>
                                    <strong>{{ $activity->activity_name }}</strong>
                                    <br>
                                    <small class="text-muted">{{ Str::limit($activity->description, 50) }}</small>
                                </td>
                                <td><span class="badge badge-info">{{ $activity->category }}</span></td>
                                <td>{{ $activity->age_group }}</td>
                                <td>
                                    <span class="badge badge-{{ $activity->difficulty_level == 'Beginner' ? 'success' : ($activity->difficulty_level == 'Intermediate' ? 'warning' : 'danger') }}">
                                        {{ $activity->difficulty_level }}
                                    </span>
                                </td>
                                <td>{{ $activity->activeSessions->count() }}</td>
                                <td>{{ $activity->activeSessions->sum('current_enrollment') }}</td>
                                <td>
                                    @if($activity->is_active)
                                        <span class="badge badge-success">Active</span>
                                    @else
                                        <span class="badge badge-secondary">Inactive</span>
                                    @endif
                                </td>
                            </tr>
                        @empty
                            <tr>
                                <td colspan="8" class="text-center text-muted py-4">
                                    No activities found.
                                </td>
                            </tr>
                        @endforelse
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Activity Categories Summary -->
    <div class="row mt-4">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="m-0">Activities by Category</h5>
                </div>
                <div class="card-body">
                    @php
                        $categoryCounts = $activities->groupBy('category')->map->count();
                    @endphp
                    @forelse($categoryCounts as $category => $count)
                        <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                            <span class="font-weight-medium">{{ $category }}</span>
                            <span class="badge badge-primary">{{ $count }}</span>
                        </div>
                    @empty
                        <p class="text-muted">No categories available.</p>
                    @endforelse
                </div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h5 class="m-0">Activities by Difficulty</h5>
                </div>
                <div class="card-body">
                    @php
                        $difficultyCounts = $activities->groupBy('difficulty_level')->map->count();
                    @endphp
                    @forelse($difficultyCounts as $difficulty => $count)
                        <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                            <span class="font-weight-medium">{{ $difficulty }}</span>
                            <span class="badge badge-{{ $difficulty == 'Beginner' ? 'success' : ($difficulty == 'Intermediate' ? 'warning' : 'danger') }}">
                                {{ $count }}
                            </span>
                        </div>
                    @empty
                        <p class="text-muted">No difficulty levels available.</p>
                    @endforelse
                </div>
            </div>
        </div>
    </div>

    <!-- Sessions Schedule Overview -->
    <div class="card mt-4">
        <div class="card-header">
            <h5 class="m-0">Weekly Schedule Overview</h5>
        </div>
        <div class="card-body">
            @php
                $allSessions = $activities->flatMap->activeSessions;
                $sessionsByDay = $allSessions->groupBy('day_of_week');
                $days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
            @endphp
            
            <div class="row">
                @foreach($days as $day)
                    <div class="col-md-4 col-lg-3 mb-3">
                        <div class="card border-left-primary">
                            <div class="card-body">
                                <h6 class="card-title">{{ $day }}</h6>
                                <p class="card-text">
                                    <strong>{{ $sessionsByDay->get($day, collect())->count() }}</strong> sessions
                                </p>
                                @if($sessionsByDay->has($day))
                                    <small class="text-muted">
                                        {{ $sessionsByDay[$day]->sum('current_enrollment') }} total enrollments
                                    </small>
                                @endif
                            </div>
                        </div>
                    </div>
                @endforeach
            </div>
        </div>
    </div>
</div>
@endsection

@section('scripts')
<script src="{{ asset('js/activities.js') }}"></script>
@endsection

activitiesteacherschedule.blade
views/activities

{{-- activities/teacher-schedule.blade.php --}}
@extends('layouts.app')

@section('title', 'My Schedule - CREAMS')

@section('styles')
<link rel="stylesheet" href="{{ asset('css/activities.css') }}">
@endsection

@section('content')
<div class="container-fluid">
    <div class="page-header">
        <h1 class="page-title">
            <i class="fas fa-calendar-alt"></i> My Teaching Schedule
        </h1>
    </div>

    @if($groupedSessions->count() > 0)
        <div class="row">
            @foreach(['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'] as $day)
                @if($groupedSessions->has($day))
                    <div class="col-lg-6 col-xl-4 mb-4">
                        <div class="card day-schedule">
                            <div class="card-header day-header">
                                <h5 class="m-0">{{ $day }}</h5>
                                <span class="badge badge-primary">{{ $groupedSessions[$day]->count() }} session(s)</span>
                            </div>
                            <div class="card-body">
                                @foreach($groupedSessions[$day] as $session)
                                    <div class="session-card teacher-session">
                                        <div class="session-time">
                                            <i class="fas fa-clock"></i>
                                            {{ $session->start_time->format('H:i') }} - {{ $session->end_time->format('H:i') }}
                                        </div>
                                        <h6 class="session-activity">{{ $session->activity->activity_name }}</h6>
                                        <div class="session-details">
                                            <div class="detail-item">
                                                <i class="fas fa-users"></i>
                                                <span>{{ $session->class_name }}</span>
                                            </div>
                                            <div class="detail-item">
                                                <i class="fas fa-map-marker-alt"></i>
                                                <span>{{ $session->location }}</span>
                                            </div>
                                            <div class="detail-item">
                                                <i class="fas fa-user-friends"></i>
                                                <span>{{ $session->current_enrollment }}/{{ $session->max_capacity }} trainees</span>
                                            </div>
                                        </div>
                                        <div class="session-actions">
                                            <a href="{{ route('teacher.attendance.mark', $session->id) }}" 
                                               class="btn btn-sm btn-primary">
                                                <i class="fas fa-check"></i> Mark Attendance
                                            </a>
                                            <a href="{{ route('activities.show', $session->activity_id) }}" 
                                               class="btn btn-sm btn-outline-info">
                                                <i class="fas fa-eye"></i> View Details
                                            </a>
                                        </div>
                                    </div>
                                @endforeach
                            </div>
                        </div>
                    </div>
                @endif
            @endforeach
        </div>
    @else
        <div class="card">
            <div class="card-body text-center py-5">
                <i class="fas fa-calendar-times fa-3x text-muted mb-3"></i>
                <h5>No Sessions Scheduled</h5>
                <p class="text-muted">You don't have any sessions assigned to you yet. Please contact your supervisor for session assignments.</p>
            </div>
        </div>
    @endif
</div>
@endsection

@section('scripts')
<script src="{{ asset('js/activities.js') }}"></script>
@endsection

attendanceindex.blade
views/attendance

<!-- resources/views/attendance/index.blade.php -->
@extends('layouts.app')

@section('title', 'Attendance Management | CREAMS')

@section('styles')
<link rel="stylesheet" href="{{ asset('css/dashboardstyle.css') }}">
@endsection

@section('content')
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title">Attendance Management</h5>
                    <div class="card-options">
                        <a href="{{ route('attendance.report') }}" class="btn btn-sm btn-primary">
                            <i class="fas fa-chart-bar mr-2"></i>Attendance Reports
                        </a>
                    </div>
                </div>
                <div class="card-body">
                    <form action="{{ route('attendance.index') }}" method="GET" class="mb-4">
                        <div class="row">
                            <div class="col-md-3 mb-3">
                                <label for="date">Date</label>
                                <input type="date" class="form-control" id="date" name="date" value="{{ request('date', date('Y-m-d')) }}">
                            </div>
                            @if(auth()->user()->role == 'admin' || auth()->user()->role == 'supervisor')
                            <div class="col-md-3 mb-3">
                                <label for="center">Centre</label>
                                <select class="form-control" id="center" name="center_id">
                                    <option value="">All Centres</option>
                                    @foreach($centers as $center)
                                    <option value="{{ $center->center_id }}" {{ request('center_id') == $center->center_id ? 'selected' : '' }}>{{ $center->center_name }}</option>
                                    @endforeach
                                </select>
                            </div>
                            <div class="col-md-3 mb-3">
                                <label for="activity">Activity</label>
                                <select class="form-control" id="activity" name="activity_id">
                                    <option value="">All Activities</option>
                                    @foreach($activities as $activity)
                                    <option value="{{ $activity->id }}" {{ request('activity_id') == $activity->id ? 'selected' : '' }}>{{ $activity->name }}</option>
                                    @endforeach
                                </select>
                            </div>
                            @endif
                            <div class="col-md-3 mb-3 d-flex align-items-end">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-filter mr-2"></i>Filter
                                </button>
                            </div>
                        </div>
                    </form>

                    <form action="{{ route('attendance.store') }}" method="POST">
                        @csrf
                        <input type="hidden" name="date" value="{{ request('date', date('Y-m-d')) }}">
                        <input type="hidden" name="activity_id" value="{{ request('activity_id') }}">
                        
                        <div class="table-responsive">
                            <table class="table table-hover table-striped">
                                <thead class="thead-dark">
                                    <tr>
                                        <th>Trainee ID</th>
                                        <th>Name</th>
                                        <th>Condition</th>
                                        <th>Centre</th>
                                        <th>Status</th>
                                        <th>Remarks</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @forelse($trainees as $trainee)
                                    <tr>
                                        <td>{{ $trainee->id }}</td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="avatar mr-3">
                                                    <img src="{{ asset($trainee->trainee_avatar) }}" alt="{{ $trainee->trainee_first_name }}" class="rounded-circle" width="40">
                                                </div>
                                                <div>
                                                    <h6 class="mb-0">{{ $trainee->trainee_first_name }} {{ $trainee->trainee_last_name }}</h6>
                                                </div>
                                            </div>
                                        </td>
                                        <td>{{ $trainee->trainee_condition }}</td>
                                        <td>{{ $trainee->center_name }}</td>
                                        <td>
                                            <input type="hidden" name="attendance[{{ $trainee->id }}][trainee_id]" value="{{ $trainee->id }}">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="attendance[{{ $trainee->id }}][status]" id="present-{{ $trainee->id }}" value="present" {{ isset($attendanceRecords[$trainee->id]) && $attendanceRecords[$trainee->id]->status == 'present' ? 'checked' : '' }}>
                                                <label class="form-check-label text-success" for="present-{{ $trainee->id }}">Present</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="attendance[{{ $trainee->id }}][status]" id="absent-{{ $trainee->id }}" value="absent" {{ isset($attendanceRecords[$trainee->id]) && $attendanceRecords[$trainee->id]->status == 'absent' ? 'checked' : '' }}>
                                                <label class="form-check-label text-danger" for="absent-{{ $trainee->id }}">Absent</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="attendance[{{ $trainee->id }}][status]" id="late-{{ $trainee->id }}" value="late" {{ isset($attendanceRecords[$trainee->id]) && $attendanceRecords[$trainee->id]->status == 'late' ? 'checked' : '' }}>
                                                <label class="form-check-label text-warning" for="late-{{ $trainee->id }}">Late</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="attendance[{{ $trainee->id }}][status]" id="excused-{{ $trainee->id }}" value="excused" {{ isset($attendanceRecords[$trainee->id]) && $attendanceRecords[$trainee->id]->status == 'excused' ? 'checked' : '' }}>
                                                <label class="form-check-label text-info" for="excused-{{ $trainee->id }}">Excused</label>
                                            </div>
                                        </td>
                                        <td>
                                            <input type="text" class="form-control" name="attendance[{{ $trainee->id }}][remarks]" placeholder="Optional remarks" value="{{ isset($attendanceRecords[$trainee->id]) ? $attendanceRecords[$trainee->id]->remarks : '' }}">
                                        </td>
                                    </tr>
                                    @empty
                                    <tr>
                                        <td colspan="6" class="text-center">No trainees found matching the selected criteria.</td>
                                    </tr>
                                    @endforelse
                                </tbody>
                            </table>
                        </div>

                        <div class="text-right mt-4">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save mr-2"></i>Save Attendance
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Attendance Summary Card -->
    <div class="row mt-4">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title">Attendance Summary</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="stats-card">
                                <div class="stats-icon">
                                    <i class="fas fa-user-check"></i>
                                </div>
                                <div class="stats-details">
                                    <div class="stats-value">{{ $stats['present_count'] ?? 0 }}</div>
                                    <div class="stats-label">Present</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stats-card">
                                <div class="stats-icon" style="background: linear-gradient(-135deg, #ff4757, #ff6b81);">
                                    <i class="fas fa-user-times"></i>
                                </div>
                                <div class="stats-details">
                                    <div class="stats-value">{{ $stats['absent_count'] ?? 0 }}</div>
                                    <div class="stats-label">Absent</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stats-card">
                                <div class="stats-icon" style="background: linear-gradient(-135deg, #ffa502, #ff7f50);">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="stats-details">
                                    <div class="stats-value">{{ $stats['late_count'] ?? 0 }}</div>
                                    <div class="stats-label">Late</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stats-card">
                                <div class="stats-icon" style="background: linear-gradient(-135deg, #2e86de, #54a0ff);">
                                    <i class="fas fa-notes-medical"></i>
                                </div>
                                <div class="stats-details">
                                    <div class="stats-value">{{ $stats['excused_count'] ?? 0 }}</div>
                                    <div class="stats-label">Excused</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection

@section('scripts')
<script>
    $(document).ready(function() {
        // Date change automatic submit
        $('#date, #center, #activity').change(function() {
            $(this).closest('form').submit();
        });
        
        // Row highlighting based on attendance status
        $('input[type="radio"]').change(function() {
            const row = $(this).closest('tr');
            row.removeClass('table-success table-danger table-warning table-info');
            
            if ($(this).val() === 'present') {
                row.addClass('table-success');
            } else if ($(this).val() === 'absent') {
                row.addClass('table-danger');
            } else if ($(this).val() === 'late') {
                row.addClass('table-warning');
            } else if ($(this).val() === 'excused') {
                row.addClass('table-info');
            }
        });
        
        // Initialize row colors based on selected status
        $('input[type="radio"]:checked').each(function() {
            const row = $(this).closest('tr');
            if ($(this).val() === 'present') {
                row.addClass('table-success');
            } else if ($(this).val() === 'absent') {
                row.addClass('table-danger');
            } else if ($(this).val() === 'late') {
                row.addClass('table-warning');
            } else if ($(this).val() === 'excused') {
                row.addClass('table-info');
            }
        });
    });
</script>
@endsection

attendancereport.blade
views/attendance

<!-- resources/views/attendance/report.blade.php -->
@extends('layouts.app')

@section('title', 'Attendance Reports | CREAMS')

@section('styles')
<link rel="stylesheet" href="{{ asset('css/dashboardstyle.css') }}">
@endsection

@section('content')
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title">Attendance Reports</h5>
                    <div class="card-options">
                        <a href="{{ route('attendance.index') }}" class="btn btn-sm btn-secondary">
                            <i class="fas fa-arrow-left mr-2"></i>Back to Attendance
                        </a>
                    </div>
                </div>
                <div class="card-body">
                    <form action="{{ route('attendance.report') }}" method="GET" class="mb-4">
                        <div class="row">
                            <div class="col-md-3 mb-3">
                                <label for="start_date">Start Date</label>
                                <input type="date" class="form-control" id="start_date" name="start_date" value="{{ request('start_date', $startDate) }}">
                            </div>
                            <div class="col-md-3 mb-3">
                                <label for="end_date">End Date</label>
                                <input type="date" class="form-control" id="end_date" name="end_date" value="{{ request('end_date', $endDate) }}">
                            </div>
                            @if(auth()->user()->role == 'admin' || auth()->user()->role == 'supervisor')
                            <div class="col-md-3 mb-3">
                                <label for="center_name">Centre</label>
                                <select class="form-control" id="center_name" name="center_name">
                                    <option value="">All Centres</option>
                                    @foreach($centers as $center)
                                    <option value="{{ $center->center_name }}" {{ request('center_name') == $center->center_name ? 'selected' : '' }}>{{ $center->center_name }}</option>
                                    @endforeach
                                </select>
                            </div>
                            @endif
                            <div class="col-md-3 mb-3 d-flex align-items-end">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-filter mr-2"></i>Generate Report
                                </button>
                                <button type="button" class="btn btn-success ml-2" onclick="exportToExcel()">
                                    <i class="fas fa-file-excel mr-2"></i>Export
                                </button>
                            </div>
                        </div>
                    </form>

                    <!-- Attendance Overview Chart -->
                    <div class="row mb-4">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="card-title">Attendance Overview</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="attendanceOverviewChart" height="100"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Trainee Attendance Statistics -->
                    <div class="table-responsive">
                        <table class="table table-hover table-striped" id="attendanceStatsTable">
                            <thead class="thead-dark">
                                <tr>
                                    <th>Trainee ID</th>
                                    <th>Name</th>
                                    <th>Centre</th>
                                    <th>Present</th>
                                    <th>Absent</th>
                                    <th>Late</th>
                                    <th>Excused</th>
                                    <th>Attendance Rate</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach($trainees as $trainee)
                                <tr>
                                    <td>{{ $trainee->id }}</td>
                                    <td>
                                        <div class="d-flex align-items-center">
                                            <div class="avatar mr-3">
                                                <img src="{{ asset($trainee->trainee_avatar) }}" alt="{{ $trainee->trainee_first_name }}" class="rounded-circle" width="40">
                                            </div>
                                            <div>
                                                <h6 class="mb-0">{{ $trainee->trainee_first_name }} {{ $trainee->trainee_last_name }}</h6>
                                            </div>
                                        </div>
                                    </td>
                                    <td>{{ $trainee->center_name }}</td>
                                    <td>{{ $attendanceData[$trainee->id]['present'] ?? 0 }}</td>
                                    <td>{{ $attendanceData[$trainee->id]['absent'] ?? 0 }}</td>
                                    <td>{{ $attendanceData[$trainee->id]['late'] ?? 0 }}</td>
                                    <td>{{ $attendanceData[$trainee->id]['excused'] ?? 0 }}</td>
                                    <td>
                                        <div class="progress" style="height: 20px;">
                                            @php
                                                $attendanceRate = $attendanceData[$trainee->id]['percentage'] ?? 0;
                                                $bgClass = $attendanceRate >= 90 ? 'bg-success' :
                                                          ($attendanceRate >= 75 ? 'bg-primary' :
                                                          ($attendanceRate >= 60 ? 'bg-warning' : 'bg-danger'));
                                            @endphp
                                            <div class="progress-bar {{ $bgClass }}" role="progressbar" style="width: {{ $attendanceRate }}%;" aria-valuenow="{{ $attendanceRate }}" aria-valuemin="0" aria-valuemax="100">{{ $attendanceRate }}%</div>
                                        </div>
                                    </td>
                                    <td>
                                        <a href="{{ route('attendance.trainee', ['id' => $trainee->id, 'start_date' => request('start_date', $startDate), 'end_date' => request('end_date', $endDate)]) }}" class="btn btn-sm btn-primary">
                                            <i class="fas fa-eye"></i> Detail
                                        </a>
                                    </td>
                                </tr>
                                @endforeach
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection

@section('scripts')
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
<script>
    $(document).ready(function() {
        // Create attendance overview chart
        var ctx = document.getElementById('attendanceOverviewChart').getContext('2d');
        var overviewChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Present', 'Absent', 'Late', 'Excused'],
                datasets: [{
                    label: 'Attendance Overview',
                    data: [
                        {{ $summaryStats['present_count'] ?? 0 }},
                        {{ $summaryStats['absent_count'] ?? 0 }},
                        {{ $summaryStats['late_count'] ?? 0 }},
                        {{ $summaryStats['excused_count'] ?? 0 }}
                    ],
                    backgroundColor: [
                        'rgba(40, 167, 69, 0.7)',  // green for present
                        'rgba(220, 53, 69, 0.7)',  // red for absent
                        'rgba(255, 193, 7, 0.7)',  // yellow for late
                        'rgba(23, 162, 184, 0.7)'  // cyan for excused
                    ],
                    borderColor: [
                        'rgba(40, 167, 69, 1)',
                        'rgba(220, 53, 69, 1)',
                        'rgba(255, 193, 7, 1)',
                        'rgba(23, 162, 184, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            precision: 0
                        }
                    }
                }
            }
        });
    });

    // Function to export attendance data to Excel
    function exportToExcel() {
        // Get the table data
        const table = document.getElementById('attendanceStatsTable');
        const wb = XLSX.utils.table_to_book(table, { sheet: "Attendance Report" });
        
        // Save the Excel file
        const dateRange = document.getElementById('start_date').value + ' to ' + document.getElementById('end_date').value;
        XLSX.writeFile(wb, 'Attendance Report - ' + dateRange + '.xlsx');
    }
</script>
@endsection

attendancetrainee.blade
views/attendance

<!-- resources/views/attendance/trainee.blade.php -->
@extends('layouts.app')

@section('title', 'Trainee Attendance Details | CREAMS')

@section('styles')
<link rel="stylesheet" href="{{ asset('css/dashboardstyle.css') }}">
<style>
    .calendar-grid {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        gap: 5px;
        margin-bottom: 20px;
    }
    
    .calendar-day {
        padding: 10px;
        border-radius: 5px;
        text-align: center;
        background-color: #f8f9fa;
        position: relative;
    }
    
    .day-header {
        font-weight: bold;
        background-color: #343a40;
        color: white;
    }
    
    .current-month {
        font-weight: bold;
    }
    
    .day-number {
        font-size: 14px;
        font-weight: 600;
    }
    
    .day-status {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        display: inline-block;
        margin-top: 5px;
    }
    
    .status-present {
        background-color: #28a745;
    }
    
    .status-absent {
        background-color: #dc3545;
    }
    
    .status-late {
        background-color: #ffc107;
    }
    
    .status-excused {
        background-color: #17a2b8;
    }
    
    .status-none {
        background-color: #e9ecef;
    }
    
    .attendance-details {
        margin-top: 10px;
        font-size: 12px;
        color: #6c757d;
    }
    
    .day-tooltip {
        position: absolute;
        background-color: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 5px 10px;
        border-radius: 5px;
        font-size: 12px;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        white-space: nowrap;
        display: none;
        z-index: 10;
    }
    
    .calendar-day:hover .day-tooltip {
        display: block;
    }
    
    .timeline-item {
        position: relative;
        padding-left: 40px;
        margin-bottom: 20px;
    }
    
    .timeline-item:before {
        content: "";
        position: absolute;
        left: 16px;
        top: 0;
        bottom: 0;
        width: 2px;
        background-color: #dee2e6;
    }
    
    .timeline-item:last-child:before {
        bottom: 50%;
    }
    
    .timeline-date {
        position: absolute;
        left: 0;
        top: 0;
        width: 32px;
        height: 32px;
        background-color: #fff;
        border: 2px solid #dee2e6;
        border-radius: 50%;
        text-align: center;
        line-height: 28px;
        z-index: 1;
    }
    
    .timeline-content {
        background-color: #fff;
        padding: 15px;
        border-radius: 5px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .timeline-date.status-present {
        background-color: #28a745;
        color: white;
        border-color: #28a745;
    }
    
    .timeline-date.status-absent {
        background-color: #dc3545;
        color: white;
        border-color: #dc3545;
    }
    
    .timeline-date.status-late {
        background-color: #ffc107;
        color: black;
        border-color: #ffc107;
    }
    
    .timeline-date.status-excused {
        background-color: #17a2b8;
        color: white;
        border-color: #17a2b8;
    }
</style>
@endsection

@section('content')
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title">{{ $trainee->trainee_first_name }} {{ $trainee->trainee_last_name }}'s Attendance</h5>
                    <div class="card-options">
                        <a href="{{ route('attendance.report') }}" class="btn btn-sm btn-secondary">
                            <i class="fas fa-arrow-left mr-2"></i>Back to Reports
                        </a>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="d-flex align-items-center">
                                <div class="avatar mr-3">
                                    <img src="{{ asset($trainee->trainee_avatar) }}" alt="{{ $trainee->trainee_first_name }}" class="rounded-circle" width="60">
                                </div>
                                <div>
                                    <h4 class="mb-1">{{ $trainee->trainee_first_name }} {{ $trainee->trainee_last_name }}</h4>
                                    <p class="mb-0 text-muted">{{ $trainee->trainee_condition }}  {{ $trainee->center_name }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <form action="{{ route('attendance.trainee', ['id' => $trainee->id]) }}" method="GET" class="d-flex justify-content-end">
                                <div class="input-group" style="max-width: 400px;">
                                    <input type="date" class="form-control" name="start_date" value="{{ request('start_date', $startDate) }}">
                                    <div class="input-group-prepend input-group-append">
                                        <span class="input-group-text">to</span>
                                    </div>
                                    <input type="date" class="form-control" name="end_date" value="{{ request('end_date', $endDate) }}">
                                    <div class="input-group-append">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-filter"></i>
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Attendance Summary -->
                    <div class="row mb-4">
                        <div class="col-lg-3 col-md-6 mb-3">
                            <div class="card bg-light">
                                <div class="card-body text-center">
                                    <div class="display-4 text-success">{{ $attendanceRate['present'] }}</div>
                                    <h5 class="mt-2">Present Days</h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 mb-3">
                            <div class="card bg-light">
                                <div class="card-body text-center">
                                    <div class="display-4 text-danger">{{ $attendanceRate['absent'] }}</div>
                                    <h5 class="mt-2">Absent Days</h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 mb-3">
                            <div class="card bg-light">
                                <div class="card-body text-center">
                                    <div class="display-4 text-warning">{{ $attendanceRate['late'] }}</div>
                                    <h5 class="mt-2">Late Days</h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6 mb-3">
                            <div class="card bg-light">
                                <div class="card-body text-center">
                                    <div class="display-4">{{ $attendanceRate['percentage'] }}%</div>
                                    <h5 class="mt-2">Attendance Rate</h5>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Attendance Calendar -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="card-title mb-0">Monthly Attendance Calendar</h5>
                        </div>
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="mb-0">{{ date('F Y', strtotime($calendarMonth)) }}</h5>
                                <div>
                                    <a href="{{ route('attendance.trainee', ['id' => $trainee->id, 'month' => date('Y-m', strtotime($calendarMonth . ' -1 month')), 'start_date' => request('start_date'), 'end_date' => request('end_date')]) }}" class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-chevron-left"></i> Previous Month
                                    </a>
                                    <a href="{{ route('attendance.trainee', ['id' => $trainee->id, 'month' => date('Y-m', strtotime($calendarMonth . ' +1 month')), 'start_date' => request('start_date'), 'end_date' => request('end_date')]) }}" class="btn btn-sm btn-outline-primary">
                                        Next Month <i class="fas fa-chevron-right"></i>
                                    </a>
                                </div>
                            </div>

                            <div class="calendar-grid">
                                <!-- Days of week headers -->
                                <div class="calendar-day day-header">Sun</div>
                                <div class="calendar-day day-header">Mon</div>
                                <div class="calendar-day day-header">Tue</div>
                                <div class="calendar-day day-header">Wed</div>
                                <div class="calendar-day day-header">Thu</div>
                                <div class="calendar-day day-header">Fri</div>
                                <div class="calendar-day day-header">Sat</div>
                                
                                <!-- Calendar days -->
                                @foreach($calendarDays as $day)
                                    <div class="calendar-day {{ $day['current_month'] ? 'current-month' : '' }}" 
                                        style="{{ $day['is_today'] ? 'border: 2px solid #007bff;' : '' }}">
                                        <div class="day-number">{{ $day['day'] }}</div>
                                        
                                        @if(isset($day['status']))
                                            <div class="day-status status-{{ $day['status'] }}"></div>
                                            <div class="day-tooltip">
                                                <strong>{{ ucfirst($day['status']) }}</strong>
                                                @if(isset($day['remarks']) && !empty($day['remarks']))
                                                <br>{{ $day['remarks'] }}
                                                @endif
                                            </div>
                                        @else
                                            <div class="day-status status-none"></div>
                                        @endif
                                    </div>
                                @endforeach
                            </div>
                            
                            <div class="d-flex justify-content-center">
                                <div class="d-flex align-items-center mr-4">
                                    <span class="day-status status-present mr-1"></span> Present
                                </div>
                                <div class="d-flex align-items-center mr-4">
                                    <span class="day-status status-absent mr-1"></span> Absent
                                </div>
                                <div class="d-flex align-items-center mr-4">
                                    <span class="day-status status-late mr-1"></span> Late
                                </div>
                                <div class="d-flex align-items-center">
                                    <span class="day-status status-excused mr-1"></span> Excused
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Attendance Timeline -->
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title mb-0">Attendance Timeline</h5>
                        </div>
                        <div class="card-body">
                            <div class="timeline">
                                @forelse($attendanceRecords as $record)
                                    <div class="timeline-item">
                                        <div class="timeline-date status-{{ $record->status }}">
                                            <i class="fas fa-{{ 
                                                $record->status == 'present' ? 'check' : 
                                                ($record->status == 'absent' ? 'times' : 
                                                ($record->status == 'late' ? 'clock' : 'notes-medical')) 
                                            }}"></i>
                                        </div>
                                        <div class="timeline-content">
                                            <div class="d-flex justify-content-between">
                                                <h6 class="mb-1">{{ date('l, F j, Y', strtotime($record->date)) }}</h6>
                                                <span class="badge badge-{{ 
                                                    $record->status == 'present' ? 'success' : 
                                                    ($record->status == 'absent' ? 'danger' : 
                                                    ($record->status == 'late' ? 'warning' : 'info')) 
                                                }}">{{ ucfirst($record->status) }}</span>
                                            </div>
                                            
                                            @if($record->activity_id)
                                                <p class="mb-1"><strong>Activity:</strong> {{ $record->activity->name ?? 'Unknown Activity' }}</p>
                                            @endif
                                            
                                            @if($record->remarks)
                                                <p class="mb-0"><strong>Remarks:</strong> {{ $record->remarks }}</p>
                                            @endif
                                            
                                            <small class="text-muted">Marked by: {{ $record->markedBy->name ?? 'System' }}</small>
                                        </div>
                                    </div>
                                @empty
                                    <div class="text-center py-5">
                                        <i class="fas fa-calendar-times fa-3x text-muted mb-3"></i>
                                        <h5>No attendance records found for the selected date range.</h5>
                                        <p class="text-muted">Try selecting a different date range or check if attendance has been recorded for this trainee.</p>
                                    </div>
                                @endforelse
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection

centresassets.blade
views/centres

@extends('layouts.app')

@section('title', $centre['name'] . ' - Assets')

@section('content')
<div class="container-fluid">
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">{{ $centre['name'] }} - Assets</h1>
        <div>
            <a href="{{ route(session('role') . '.centres.show', $centre['id']) }}" class="btn btn-secondary btn-sm shadow-sm mr-2">
                <i class="fas fa-arrow-left fa-sm text-white-50"></i> Back to Centre
            </a>
            <a href="#" class="btn btn-primary btn-sm shadow-sm">
                <i class="fas fa-plus fa-sm text-white-50"></i> Add New Asset
            </a>
        </div>
    </div>
    
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">Asset List</h6>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-bordered" id="assetTable" width="100%" cellspacing="0">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Description</th>
                            <th>Quantity</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach($assets as $asset)
                            <tr>
                                <td>{{ $asset['id'] }}</td>
                                <td>{{ $asset['name'] }}</td>
                                <td>{{ $asset['type'] }}</td>
                                <td>{{ $asset['description'] }}</td>
                                <td>{{ $asset['quantity'] }}</td>
                                <td>
                                    <span class="badge badge-{{ $asset['status'] == 'available' ? 'success' : 'warning' }}">
                                        {{ ucfirst($asset['status']) }}
                                    </span>
                                </td>
                                <td>
                                    <a href="{{ route(session('role') . '.assets.show', $asset['id']) }}" class="btn btn-info btn-sm">
                                        <i class="fas fa-eye"></i>
                                    </a>
                                    <a href="#" class="btn btn-primary btn-sm">
                                        <i class="fas fa-edit"></i>
                                    </a>
                                </td>
                            </tr>
                        @endforeach
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
@endsection

@section('scripts')
<script>
    $(document).ready(function() {
        $('#assetTable').DataTable();
    });
</script>
@endsection

centresindex.blade
views/centres

@extends('layouts.app')

@section('title', 'Centres Management')

@section('content')
<div class="container-fluid">
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">Centres Management</h1>
        <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm">
            <i class="fas fa-plus fa-sm text-white-50"></i> Add New Centre
        </a>
    </div>
    
    <div class="row">
        @foreach($centres as $centre)
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="card shadow h-100">
                    <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                        <h6 class="m-0 font-weight-bold text-primary">{{ $centre['name'] }}</h6>
                        <div class="dropdown no-arrow">
                            <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in" aria-labelledby="dropdownMenuLink">
                                <div class="dropdown-header">Centre Actions:</div>
                                <a class="dropdown-item" href="{{ route(session('role') . '.centres.show', $centre['id']) }}">View Details</a>
                                <a class="dropdown-item" href="{{ route(session('role') . '.centres.assets', $centre['id']) }}">View Assets</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="#">Edit Centre</a>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="row no-gutters align-items-center">
                            <div class="col mr-2">
                                <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Location</div>
                                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ $centre['location'] }}</div>
                            </div>
                            <div class="col-auto">
                                <i class="fas fa-map-marker-alt fa-2x text-gray-300"></i>
                            </div>
                        </div>
                        
                        <hr>
                        
                        <div class="d-flex justify-content-between mb-3">
                            <div>
                                <p class="mb-0 text-muted">Staff</p>
                                <h6>{{ $centre['staff_count'] }}</h6>
                            </div>
                            <div>
                                <p class="mb-0 text-muted">Trainees</p>
                                <h6>{{ $centre['trainee_count'] }}</h6>
                            </div>
                            <div>
                                <p class="mb-0 text-muted">Assets</p>
                                <h6>{{ $centre['asset_count'] }}</h6>
                            </div>
                        </div>
                        
                        <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Capacity</div>
                        <div class="progress mb-2">
                            <div class="progress-bar bg-success" role="progressbar" style="width: {{ ($centre['trainee_count'] / $centre['capacity']) * 100 }}%" aria-valuenow="{{ ($centre['trainee_count'] / $centre['capacity']) * 100 }}" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <small>{{ $centre['trainee_count'] }} / {{ $centre['capacity'] }} ({{ round(($centre['trainee_count'] / $centre['capacity']) * 100) }}%)</small>
                    </div>
                    <div class="card-footer bg-white">
                        <span class="badge badge-{{ $centre['status'] == 'active' ? 'success' : 'secondary' }}">
                            {{ ucfirst($centre['status']) }}
                        </span>
                    </div>
                </div>
            </div>
        @endforeach
    </div>
</div>
@endsection

centresshow.blade
views/centres

@extends('layouts.app')

@section('title', $centre['name'])

@section('content')
<div class="container-fluid">
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">{{ $centre['name'] }}</h1>
        <div>
            <a href="{{ route(session('role') . '.centres') }}" class="btn btn-secondary btn-sm shadow-sm mr-2">
                <i class="fas fa-arrow-left fa-sm text-white-50"></i> Back to Centres
            </a>
            <a href="{{ route(session('role') . '.centres.assets', $centre['id']) }}" class="btn btn-info btn-sm shadow-sm mr-2">
                <i class="fas fa-boxes fa-sm text-white-50"></i> View Assets
            </a>
            <a href="#" class="btn btn-primary btn-sm shadow-sm">
                <i class="fas fa-edit fa-sm text-white-50"></i> Edit Centre
            </a>
        </div>
    </div>
    
    <div class="row">
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Location</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ $centre['location'] }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-map-marker-alt fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-success shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Staff</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ $centre['staff_count'] }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-users fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-info shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">Trainees</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ $centre['trainee_count'] }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-user-graduate fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-warning shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">Assets</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ $centre['asset_count'] }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-boxes fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-lg-6">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Centre Details</h6>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <tbody>
                                <tr>
                                    <th width="30%">Centre ID</th>
                                    <td>{{ $centre['id'] }}</td>
                                </tr>
                                <tr>
                                    <th>Name</th>
                                    <td>{{ $centre['name'] }}</td>
                                </tr>
                                <tr>
                                    <th>Location</th>
                                    <td>{{ $centre['location'] }}</td>
                                </tr>
                                <tr>
                                    <th>Status</th>
                                    <td>
                                        <span class="badge badge-{{ $centre['status'] == 'active' ? 'success' : 'secondary' }}">
                                            {{ ucfirst($centre['status']) }}
                                        </span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-lg-6">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Capacity</h6>
                </div>
                <div class="card-body">
                    <h4 class="small font-weight-bold">Trainees <span class="float-right">{{ $centre['trainee_count'] }} / {{ $centre['capacity'] }}</span></h4>
                    <div class="progress mb-4">
                        <div class="progress-bar bg-success" role="progressbar" style="width: {{ ($centre['trainee_count'] / $centre['capacity']) * 100 }}%"></div>
                    </div>
                    
                    <h4 class="small font-weight-bold">Staff <span class="float-right">{{ $centre['staff_count'] }}</span></h4>
                    <div class="progress mb-4">
                        <div class="progress-bar bg-info" role="progressbar" style="width: {{ ($centre['staff_count'] / 15) * 100 }}%"></div>
                    </div>
                    
                    <h4 class="small font-weight-bold">Assets <span class="float-right">{{ $centre['asset_count'] }}</span></h4>
                    <div class="progress">
                        <div class="progress-bar bg-warning" role="progressbar" style="width: {{ ($centre['asset_count'] / 50) * 100 }}%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection

dashboardadmin.blade
views/dashboard

<div class="admin-dashboard-content">
  <div class="row">
    <div class="col-md-6">
      <div class="chart-container" style="position: relative; height: 300px;">
        <canvas id="userRegistrationChart"></canvas>
      </div>
      <h6 class="text-centre mt-3">Monthly User Registrations</h6>
    </div>
    <div class="col-md-6">
      <div class="chart-container" style="position: relative; height: 300px;">
        <canvas id="userRoleChart"></canvas>
      </div>
      <h6 class="text-centre mt-3">User Role Distribution</h6>
    </div>
  </div>
  
  <!-- Last Accessed Profile Card -->
  <div class="card mt-4">
    <div class="card-header">
      <h5 class="card-title">Last Accessed Profile</h5>
    </div>
    <div class="card-body">
      <div class="profile-card">
        <div class="profile-avatar">
          <img src="{{ asset('images/trainee-avatar.jpg') }}" alt="Trainee Profile">
        </div>
        <div class="profile-details">
          <h5>Ahmad Ismail</h5>
          <div class="profile-info">
            <p><strong>Condition:</strong> Autism Spectrum Disorder</p>
            <p><strong>Progress:</strong> 75% Complete</p>
            <p><strong>Last Session:</strong> March 22, 2025</p>
          </div>
          <a href="#" class="btn btn-sm btn-primary">View Profile</a>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Current Courses In Progress -->
  <div class="card mt-4">
    <div class="card-header">
      <h5 class="card-title">Current Courses In Progress</h5>
    </div>
    <div class="card-body">
      <div class="course-progress-list">
        <div class="course-item">
          <div class="course-info">
            <h5>Communication Skills Development</h5>
            <div class="course-meta">
              <span><i class="fas fa-user-tie"></i> Dr. Nurul Hafizah</span>
              <span><i class="fas fa-users"></i> 15 Trainees</span>
              <span><i class="fas fa-calendar-alt"></i> Mon, Wed, Fri</span>
            </div>
            <div class="progress mt-2">
              <div class="progress-bar" role="progressbar" style="width: 65%" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100">65%</div>
            </div>
          </div>
        </div>
        
        <div class="course-item">
          <div class="course-info">
            <h5>Motor Skills Training</h5>
            <div class="course-meta">
              <span><i class="fas fa-user-tie"></i> Mr. Ismail Rahman</span>
              <span><i class="fas fa-users"></i> 12 Trainees</span>
              <span><i class="fas fa-calendar-alt"></i> Tue, Thu</span>
            </div>
            <div class="progress mt-2">
              <div class="progress-bar" role="progressbar" style="width: 42%" aria-valuenow="42" aria-valuemin="0" aria-valuemax="100">42%</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

dashboardajk.blade
views/dashboard

<div class="ajk-dashboard-content">
  <div class="row">
    <div class="col-md-12">
      <div class="chart-container" style="position: relative; height: 300px;">
        <canvas id="eventParticipationChart"></canvas>
      </div>
      <h6 class="text-centre mt-3">Event Participation Analytics</h6>
    </div>
  </div>
  
  <!-- Upcoming Events -->
  <div class="card mt-4">
    <div class="card-header">
      <h5 class="card-title">Upcoming Events</h5>
      <div class="card-options">
        <a href="{{ route('ajk.events') }}" class="btn btn-sm btn-primary">
          <i class="fas fa-plus"></i> Create New Event
        </a>
      </div>
    </div>
    <div class="card-body">
      @if(isset($data['events']) && $data['events']->count() > 0)
      <div class="events-list">
        @foreach($data['events'] as $event)
        <div class="event-item">
          <div class="event-date">
            <div class="date">{{ \Carbon\Carbon::parse($event->date)->format('d') }}</div>
            <div class="month">{{ \Carbon\Carbon::parse($event->date)->format('M') }}</div>
          </div>
          <div class="event-details">
            <h5>{{ $event->title }}</h5>
            <div class="event-info">
              <span><i class="fas fa-map-marker-alt"></i> {{ $event->location }}</span>
              <span><i class="fas fa-clock"></i> {{ $event->start_time }} - {{ $event->end_time }}</span>
            </div>
            <div class="event-participants">
              <div class="attendance">
                <span class="confirmed">{{ $event->participants()->where('status', 'confirmed')->count() }} Confirmed</span> / 
                <span class="invited">{{ $event->max_participants }} Capacity</span>
              </div>
            </div>
          </div>
          <div class="event-actions">
            <a href="{{ route('ajk.event.view', $event->id) }}" class="btn btn-sm btn-info">Manage</a>
          </div>
        </div>
        @endforeach
      </div>
      @else
      <div class="empty-state">
        <div class="empty-state-icon">
          <i class="fas fa-calendar-plus"></i>
        </div>
        <p>No upcoming events scheduled</p>
        <a href="{{ route('ajk.event.create') }}" class="btn btn-primary mt-3">Create New Event</a>
      </div>
      @endif
    </div>
  </div>
  
  <!-- Volunteer Management -->
  <div class="card mt-4">
    <div class="card-header">
      <h5 class="card-title">Volunteer Applications</h5>
    </div>
    <div class="card-body">
      @if(isset($data['volunteers']) && $data['volunteers']->count() > 0)
      <div class="volunteers-list">
        @foreach($data['volunteers'] as $volunteer)
        <div class="volunteer-item">
          <div class="volunteer-info">
            <div class="volunteer-avatar">
              <img src="{{ asset('images/volunteer-avatar.jpg') }}" alt="Volunteer">
            </div>
            <div class="volunteer-details">
              <h5>{{ $volunteer->name }}</h5>
              <div class="volunteer-email">{{ $volunteer->email }}</div>
              <div class="volunteer-phone">{{ $volunteer->phone }}</div>
              <div class="volunteer-interests">
                <span class="interest-badge">{{ $volunteer->interest }}</span>
              </div>
            </div>
          </div>
          <div class="volunteer-actions">
            <form action="{{ route('ajk.volunteer.change-status', $volunteer->id) }}" method="POST" class="d-inline">
              @csrf
              <input type="hidden" name="status" value="approved">
              <button type="submit" class="btn btn-sm btn-success">Approve</button>
            </form>
            <form action="{{ route('ajk.volunteer.change-status', $volunteer->id) }}" method="POST" class="d-inline">
              @csrf
              <input type="hidden" name="status" value="rejected">
              <button type="submit" class="btn btn-sm btn-danger">Reject</button>
            </form>
          </div>
        </div>
        @endforeach
      </div>
      @else
      <div class="empty-state">
        <div class="empty-state-icon">
          <i class="fas fa-hands-helping"></i>
        </div>
        <p>No pending volunteer applications</p>
      </div>
      @endif
    </div>
  </div>
</div>

dashboardsupervisor.blade
views/dashboard

<div class="supervisor-dashboard-content">
  <div class="row">
    <div class="col-md-12">
      <div class="chart-container" style="position: relative; height: 300px;">
        <canvas id="teacherPerfChart"></canvas>
      </div>
      <h6 class="text-centre mt-3">Teacher Performance Metrics</h6>
    </div>
  </div>
  
  <!-- Teacher Management Overview -->
  <div class="card mt-4">
    <div class="card-header">
      <h5 class="card-title">Teacher Overview</h5>
    </div>
    <div class="card-body">
      <div class="teacher-overview">
        <div class="row">
          @foreach($data['teacherManagement']['teachers'] ?? [] as $teacher)
          <div class="col-md-4">
            <div class="teacher-card">
              <div class="teacher-avatar">
                <img src="{{ asset($teacher->avatar ?? 'images/default-avatar.jpg') }}" alt="{{ $teacher->name }}">
              </div>
              <div class="teacher-info">
                <h5>{{ $teacher->name }}</h5>
                <div class="teacher-class-count">
                  <i class="fas fa-book"></i> {{ $teacher->classes()->count() }} Classes
                </div>
                <div class="teacher-trainee-count">
                  <i class="fas fa-users"></i> {{ $teacher->trainees()->count() }} Trainees
                </div>
                <div class="teacher-actions mt-2">
                  <a href="{{ route('supervisor.teacher.view', $teacher->id) }}" class="btn btn-sm btn-primary">View Profile</a>
                </div>
              </div>
            </div>
          </div>
          @endforeach
        </div>
      </div>
    </div>
  </div>
  
  <!-- Pending Approvals -->
  <div class="card mt-4">
    <div class="card-header">
      <h5 class="card-title">Pending Approvals</h5>
    </div>
    <div class="card-body">
      @if(($data['teacherManagement']['pendingApprovals'] ?? 0) > 0)
      <div class="approval-list">
        <!-- List of activities/classes requiring supervisor approval -->
        <div class="approval-item">
          <div class="approval-info">
            <h5>Communication Skills Workshop</h5>
            <div class="approval-details">
              <span><i class="fas fa-user"></i> Requested by: Dr. Nurul Hafizah</span>
              <span><i class="fas fa-calendar"></i> March 28, 2025</span>
              <span><i class="fas fa-users"></i> 15 Trainees</span>
            </div>
          </div>
          <div class="approval-actions">
            <button class="btn btn-sm btn-success">Approve</button>
            <button class="btn btn-sm btn-danger">Reject</button>
          </div>
        </div>
      </div>
      @else
      <div class="empty-state">
        <div class="empty-state-icon">
          <i class="fas fa-check-circle"></i>
        </div>
        <p>No pending approvals at this time</p>
      </div>
      @endif
    </div>
  </div>
</div>

dashboardteacher.blade
views/dashboard

<div class="teacher-dashboard-content">
  <div class="row">
    <div class="col-md-12">
      <div class="chart-container" style="position: relative; height: 300px;">
        <canvas id="attendanceChart"></canvas>
      </div>
      <h6 class="text-centre mt-3">Weekly Attendance Rate</h6>
    </div>
  </div>
  
  <!-- Class Schedule -->
  <div class="card mt-4">
    <div class="card-header">
      <h5 class="card-title">Today's Schedule</h5>
      <div class="card-options">
        <a href="{{ route('teacher.schedule') }}" class="btn btn-sm btn-primary">View Full Schedule</a>
      </div>
    </div>
    <div class="card-body">
      @if(isset($data['todaySchedule']) && $data['todaySchedule']->count() > 0)
      <div class="today-schedule">
        @foreach($data['todaySchedule'] as $class)
        <div class="schedule-item">
          <div class="time-slot">{{ \Carbon\Carbon::parse($class->start_time)->format('g:i A') }} - {{ \Carbon\Carbon::parse($class->end_time)->format('g:i A') }}</div>
          <div class="class-details">
            <h5>{{ $class->name }}</h5>
            <div class="class-info">
              <span><i class="fas fa-users"></i> {{ $class->trainees()->count() }} Trainees</span>
              <span><i class="fas fa-map-marker-alt"></i> {{ $class->location }}</span>
            </div>
          </div>
          <div class="class-actions">
            <a href="{{ route('teacher.class.attendance', $class->id) }}" class="btn btn-sm btn-primary">Take Attendance</a>
          </div>
        </div>
        @endforeach
      </div>
      @else
      <div class="empty-state">
        <div class="empty-state-icon">
          <i class="fas fa-calendar-check"></i>
        </div>
        <p>No classes scheduled for today</p>
      </div>
      @endif
    </div>
  </div>
  
  <!-- Trainee Progress -->
  <div class="card mt-4">
    <div class="card-header">
      <h5 class="card-title">Trainee Progress Monitoring</h5>
    </div>
    <div class="card-body">
      <div class="trainee-list">
        @foreach($data['classList'] ?? [] as $class)
          @foreach($class->trainees()->get() as $trainee)
          <div class="trainee-item">
            <div class="trainee-info">
              <div class="trainee-avatar">
                <img src="{{ asset($trainee->trainee_avatar ?? 'images/default-avatar.jpg') }}" alt="{{ $trainee->trainee_first_name }}">
              </div>
              <div class="trainee-details">
                <h5>{{ $trainee->trainee_first_name }} {{ $trainee->trainee_last_name }}</h5>
                <div class="trainee-condition">{{ $trainee->trainee_condition }}</div>
              </div>
            </div>
            <div class="trainee-actions">
              <a href="{{ route('teacher.trainee.view', $trainee->id) }}" class="btn btn-sm btn-info">View Progress</a>
              <a href="{{ route('teacher.trainee.progress.update', $trainee->id) }}" class="btn btn-sm btn-primary">Update Progress</a>
            </div>
          </div>
          @endforeach
        @endforeach
      </div>
    </div>
  </div>
</div>

contact-messages.blade
views/emails

<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="{{ asset("css/contactmessagestyle.css") }}">
</head>
<body>
    
    <div class="container">
        <div class="header">
            <h1>New Contact Form Submission</h1>
        </div>
        <div class="content">
            <p><strong>Name:</strong> {{ $data['name'] }}</p>
            <p><strong>Email:</strong> {{ $data['email'] }}</p>
            
            @if(isset($data['phone']) && $data['phone'])
                <p><strong>Phone:</strong> {{ $data['phone'] }}</p>
            @endif
            
            <p><strong>Reason:</strong> {{ ucfirst($data['reason']) }}</p>
            
            <p><strong>Message:</strong><br>
            {{ $data['message'] }}</p>
            
            <p><em>Submitted on: {{ now()->format('d-m-Y H:i:s') }}</em></p>
        </div>
    </div>
</body>
</html>

forgot-password.blade
views/emails

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Your Password - CREAMS</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }
        .header {
            text-align: center;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
            margin-bottom: 20px;
        }
        .header h1 {
            color: #32bdea;
            margin: 0;
            font-size: 28px;
        }
        .header h2 {
            color: #c850c0;
            margin: 5px 0 0;
            font-size: 18px;
            font-weight: normal;
        }
        .content {
            padding: 20px 0;
        }
        .button {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(135deg, #32bdea, #c850c0);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: bold;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        }
        .footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #888;
            font-size: 12px;
        }
        .note {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            font-size: 14px;
            border-left: 4px solid #32bdea;
        }
        @media only screen and (max-width: 620px) {
            .container {
                width: 100%;
                padding: 15px;
            }
            .button {
                display: block;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>CREAMS</h1>
            <h2>Community-based REhAbilitation Management System</h2>
        </div>
        <div class="content">
            <h2>Hello, {{ $data['name'] }}</h2>
            
            <p>You are receiving this email because we received a password reset request for your account.</p>
            
            <p>Please click the button below to reset your password:</p>
            
            <a href="{{ $data['resetUrl'] }}" class="button">Reset Password</a>
            
            <div class="note">
                <p>If you did not request a password reset, no further action is required.</p>
                <p>This password reset link will expire in 60 minutes.</p>
            </div>
            
            <p>If you're having trouble clicking the "Reset Password" button, copy and paste the URL below into your web browser:</p>
            
            <p style="word-break: break-all;">{{ $data['resetUrl'] }}</p>
        </div>
        <div class="footer">
            <p>&copy; {{ date('Y') }} CREAMS - All rights reserved.</p>
            <p>Disability Services Unit (DSU), IIUM, 53100 Kuala Lumpur</p>
        </div>
    </div>
</body>
</html>

sidebar.blade
views/layouts/partials

@extends('layouts.main')

@section('title', $categoryInfo['name'] . ' Activities')

@section('content')
<div class="container-fluid">
    <!-- Page Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                        <a href="{{ route(session('role', 'admin') . '.rehabilitation') }}">Rehabilitation</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">{{ $categoryInfo['name'] }}</li>
                </ol>
            </nav>
            <h1 class="h3 mb-0 text-gray-800">
                <i class="fas {{ $categoryInfo['icon'] }} text-primary mr-2"></i>
                {{ $categoryInfo['name'] }} Activities
            </h1>
            <p class="text-muted">{{ $categoryInfo['description'] }}</p>
        </div>
        <div>
            <a href="{{ route(session('role', 'admin') . '.rehabilitation') }}" class="btn btn-outline-secondary mr-2">
                <i class="fas fa-arrow-left mr-2"></i>Back to Categories
            </a>
            @if(in_array(session('role'), ['admin', 'supervisor']))
            <a href="{{ route(session('role', 'admin') . '.rehabilitation.activities.create') }}?category={{ $categoryInfo['key'] }}" class="btn btn-primary">
                <i class="fas fa-plus mr-2"></i>Create New Activity
            </a>
            @endif
        </div>
    </div>

    <!-- Category Statistics -->
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                Total Activities
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">
                                {{ $activities->count() }}
                            </div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-clipboard-list fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card border-left-success shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                Published
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">
                                {{ $activities->where('status', 'published')->count() }}
                            </div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-check-circle fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card border-left-warning shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                Draft
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">
                                {{ $activities->where('status', 'draft')->count() }}
                            </div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-edit fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card border-left-info shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                                Recent
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">
                                {{ $activities->where('created_at', '>=', now()->subDays(30))->count() }}
                            </div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-clock fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Activities List -->
    <div class="card shadow mb-4">
        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
            <h6 class="m-0 font-weight-bold text-primary">
                {{ $categoryInfo['name'] }} Activities
            </h6>
            @if(in_array(session('role'), ['admin', 'supervisor']))
            <a href="{{ route(session('role', 'admin') . '.rehabilitation.activities.create') }}?category={{ $categoryInfo['key'] }}" class="btn btn-sm btn-primary">
                <i class="fas fa-plus mr-1"></i>Add Activity
            </a>
            @endif
        </div>
        <div class="card-body">
            @if($activities->count() > 0)
                <div class="row">
                    @foreach($activities as $activity)
                    <div class="col-lg-6 col-md-12 mb-4">
                        <div class="card h-100 activity-card">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-start mb-2">
                                    <h5 class="card-title mb-1">{{ $activity->name }}</h5>
                                    <span class="badge badge-{{ $activity->status == 'published' ? 'success' : 'warning' }}">
                                        {{ ucfirst($activity->status) }}
                                    </span>
                                </div>
                                <p class="card-text text-muted">{{ $activity->short_description ?? 'No description available' }}</p>
                                
                                <div class="mb-3">
                                    <small class="text-muted">
                                        <i class="fas fa-user mr-1"></i>
                                        Created by {{ $activity->creator->name ?? 'Unknown' }}
                                    </small>
                                    <br>
                                    <small class="text-muted">
                                        <i class="fas fa-calendar mr-1"></i>
                                        {{ $activity->created_at ? $activity->created_at->diffForHumans() : 'Unknown date' }}
                                    </small>
                                </div>
                                
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        @if(isset($activity->difficulty_level))
                                        <span class="badge badge-pill badge-{{ 
                                            $activity->difficulty_level == 'easy' ? 'success' : 
                                            ($activity->difficulty_level == 'medium' ? 'warning' : 'danger') 
                                        }}">
                                            {{ ucfirst($activity->difficulty_level) }}
                                        </span>
                                        @endif
                                        @if(isset($activity->duration))
                                        <span class="badge badge-pill badge-secondary">
                                            {{ $activity->duration }} min
                                        </span>
                                        @endif
                                    </div>
                                    <div class="btn-group" role="group">
                                        <a href="#" class="btn btn-sm btn-outline-primary">
                                            <i class="fas fa-eye"></i> View
                                        </a>
                                        @if(in_array(session('role'), ['admin', 'supervisor']))
                                        <a href="#" class="btn btn-sm btn-outline-secondary">
                                            <i class="fas fa-edit"></i> Edit
                                        </a>
                                        @endif
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    @endforeach
                </div>
            @else
                <div class="text-center py-5">
                    <i class="fas {{ $categoryInfo['icon'] }} fa-3x text-gray-300 mb-3"></i>
                    <h5 class="text-muted">No activities available in this category</h5>
                    <p class="text-muted">Get started by creating your first {{ strtolower($categoryInfo['name']) }} activity.</p>
                    @if(in_array(session('role'), ['admin', 'supervisor']))
                    <a href="{{ route(session('role', 'admin') . '.rehabilitation.activities.create') }}?category={{ $categoryInfo['key'] }}" class="btn btn-primary mt-3">
                        <i class="fas fa-plus mr-2"></i>Create First Activity
                    </a>
                    @endif
                </div>
            @endif
        </div>
    </div>
</div>

<style>
.activity-card {
    transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    border: 1px solid #e3e6f0;
}

.activity-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.1) !important;
}

.border-left-primary {
    border-left: 0.25rem solid #4e73df !important;
}

.border-left-success {
    border-left: 0.25rem solid #1cc88a !important;
}

.border-left-info {
    border-left: 0.25rem solid #36b9cc !important;
}

.border-left-warning {
    border-left: 0.25rem solid #f6c23e !important;
}

.breadcrumb {
    background-color: transparent;
    padding: 0;
    margin-bottom: 0.5rem;
}

.breadcrumb-item + .breadcrumb-item::before {
    content: ">";
    color: #6c757d;
}
</style>
@endsection

app.blade
views/layouts

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="{{ csrf_token() }}">
    <title>@yield('title', ucfirst(session('role')) . ' Dashboard - CREAMS')</title>
    
    <!-- External CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #32bdea;
            --secondary-color: #c850c0;
            --success-color: #2ed573;
            --danger-color: #ff4757;
            --warning-color: #ffa502;
            --info-color: #1e90ff;
            --dark-color: #1a2a3a;
            --light-color: #f8f9fa;
            --border-color: #e9ecef;
            --transition-speed: 0.3s;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f0f2f5;
            color: #333;
            overflow-x: hidden;
        }
        
        /* Topbar styles */
        .topbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: #fff;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 999;
            display: flex;
            align-items: center;
            padding: 0 15px 0 0;
        }
        
        .sidebar-toggle {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            color: #fff;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        }
        
        .topbar-logo {
            width: 190px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
        }
        
        .topbar-logo a {
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-weight: 700;
            font-size: 20px;
            letter-spacing: 1px;
            text-decoration: none;
            width: 100%;
            height: 100%;
        }
        
        .topbar-logo i {
            margin-right: 10px;
        }
        
        .topbar-title {
            margin-left: 20px;
            font-size: 18px;
            font-weight: 600;
            background-image: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
            padding-bottom: 3px;
        }
        
        .topbar-spacer {
            flex-grow: 1;
        }
        
        .topbar-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        /* Search box */
        .search-container {
            position: relative;
            margin-right: 15px;
        }
        
        .search-box {
            display: flex;
            align-items: center;
            background: var(--light-color);
            border-radius: 20px;
            height: 38px;
            width: 200px;
            overflow: hidden;
        }
        
        .search-box input {
            flex-grow: 1;
            border: none;
            background: transparent;
            padding: 0 15px;
            height: 100%;
            outline: none;
        }
        
        .btn-search {
            border: none;
            background: transparent;
            padding: 0 15px;
            height: 100%;
            color: #777;
        }
        
        .search-results-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-top: 5px;
            z-index: 1000;
            display: none;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .search-result-item {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            color: #333;
            text-decoration: none;
            transition: all var(--transition-speed) ease;
            border-bottom: 1px solid var(--border-color);
        }
        
        .search-result-item:last-child {
            border-bottom: none;
        }
        
        .search-result-item:hover {
            background-color: rgba(50, 189, 234, 0.05);
            text-decoration: none;
        }
        
        .search-result-icon {
            width: 40px;
            height: 40px;
            background: #f5f5f5;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: var(--primary-color);
        }
        
        .search-result-content {
            flex-grow: 1;
        }
        
        .search-result-name {
            font-weight: 500;
            margin-bottom: 2px;
        }
        
        .search-result-meta {
            font-size: 12px;
            color: #777;
        }
        
        .search-no-results {
            padding: 15px;
            text-align: center;
            color: #777;
        }
        
        /* Mobile search toggle */
        .search-mobile-toggle {
            display: none;
            width: 38px;
            height: 38px;
            background: var(--light-color);
            border-radius: 50%;
            align-items: center;
            justify-content: center;
            color: #777;
            cursor: pointer;
        }
        
        .mobile-search {
            position: absolute;
            top: 60px;
            left: 0;
            right: 0;
            background: white;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: none;
            z-index: 999;
        }
        
        .mobile-search.show {
            display: block;
        }
        
        /* Notifications dropdown */
        .notifications-dropdown {
            position: relative;
        }
        
        .icon-button {
            width: 38px;
            height: 38px;
            background: var(--light-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
        }
        
        .notification-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger-color);
            color: white;
            font-size: 10px;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .notification-menu {
            position: absolute;
            top: 100%;
            right: 0;
            width: 320px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-top: 10px;
            z-index: 1000;
            display: none;
            overflow: hidden;
        }
        
        .notification-menu.show {
            display: block;
        }
        
        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .notification-icon.primary {
            background: var(--primary-color);
        }
        
        .notification-icon.success {
            background: var(--success-color);
        }
        
        .notification-icon.warning {
            background: var(--warning-color);
        }
        
        .notification-icon.danger {
            background: var(--danger-color);
        }
        
        .smallest {
            font-size: 10px;
        }
        
        /* User profile */
        .user-profile {
            display: flex;
            align-items: center;
            cursor: pointer;
            background: var(--light-color);
            border-radius: 20px;
            padding: 6px 6px 6px 12px;
        }
        
        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            overflow: hidden;
            margin-right: 10px;
        }
        
        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .user-info {
            display: flex;
            flex-direction: column;
            margin-right: 8px;
        }
        
        .user-name {
            font-size: 14px;
            font-weight: 500;
            color: #333;
        }
        
        .user-role {
            font-size: 12px;
            color: #888;
            margin-top: -2px;
        }
        
        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            width: 250px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-top: 10px;
            z-index: 1000;
            display: none;
            overflow: hidden;
        }
        
        .user-dropdown.show {
            display: block;
        }
        
        .dropdown-header {
            padding: 15px;
            background-color: #f8f9fa;
            border-bottom: 1px solid var(--border-color);
        }
        
        .user-details {
            display: flex;
            align-items: center;
        }
        
        .dropdown-item {
            padding: 12px 15px;
            color: #333;
            transition: all var(--transition-speed) ease;
        }
        
        .dropdown-item:hover {
            background-color: rgba(50, 189, 234, 0.05);
        }
        
        .dropdown-item i {
            margin-right: 10px;
            width: 16px;
            text-align: center;
        }
        
        .dropdown-divider {
            height: 1px;
            background-color: var(--border-color);
            margin: 0;
        }
        
        /* Sidebar styles */
        .sidebar {
            position: fixed;
            left: 0;
            top: 60px;
            height: calc(100% - 60px);
            width: 250px;
            background: #fff;
            box-shadow: 2px 0 10px rgba(0,0,0,0.05);
            z-index: 998;
            overflow-y: auto;
            transition: width var(--transition-speed) ease;
        }
        
        .sidebar-menu {
            list-style: none;
            padding: 15px 0;
            margin: 0;
        }
        
        .sidebar-item {
            margin-bottom: 5px;
        }
        
        .sidebar-link {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: #555;
            transition: all var(--transition-speed) ease;
            text-decoration: none;
            position: relative;
        }
        
        .sidebar-link:hover {
            color: var(--primary-color);
            background: rgba(50, 189, 234, 0.05);
            text-decoration: none;
        }
        
        .sidebar-link.active {
            color: var(--primary-color);
            background: rgba(50, 189, 234, 0.1);
            font-weight: 500;
        }
        
        .sidebar-link.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background: linear-gradient(to bottom, var(--primary-color), var(--secondary-color));
        }
        
        .sidebar-icon {
            width: 20px;
            text-align: center;
            margin-right: 10px;
            font-size: 16px;
        }
        
        .sidebar-text {
            flex-grow: 1;
            font-size: 14px;
        }
        
        .sidebar-toggle-submenu {
            margin-left: auto;
            font-size: 12px;
            transition: transform var(--transition-speed) ease;
        }
        
        .sidebar-divider {
            height: 1px;
            background: var(--border-color);
            margin: 15px 0;
        }
        
        .sidebar-title {
            padding: 0 20px;
            margin: 15px 0 8px;
            font-size: 11px;
            text-transform: uppercase;
            color: #888;
            letter-spacing: 0.5px;
        }
        
        .sidebar-submenu {
            list-style: none;
            padding: 0;
            margin: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height var(--transition-speed) ease;
        }
        
        .submenu-open .sidebar-submenu {
            max-height: 200px;
        }
        
        .submenu-open .sidebar-toggle-submenu {
            transform: rotate(90deg);
        }
        
        .sidebar-submenu-link {
            display: block;
            padding: 10px 20px 10px 50px;
            color: #555;
            text-decoration: none;
            font-size: 13px;
            transition: all var(--transition-speed) ease;
        }
        
        .sidebar-submenu-link:hover {
            color: var(--primary-color);
            background: rgba(50, 189, 234, 0.05);
            text-decoration: none;
        }
        
        .sidebar-submenu-link.active {
            color: var(--primary-color);
            background: rgba(50, 189, 234, 0.1);
            font-weight: 500;
        }
        
        .feature-badge {
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            background-color: var(--warning-color);
            color: white;
            margin-left: auto;
        }
        
        /* Collapsed sidebar styles */
        body.sidebar-collapsed .sidebar {
            width: 60px;
        }
        
        body.sidebar-collapsed .sidebar-text,
        body.sidebar-collapsed .sidebar-title,
        body.sidebar-collapsed .sidebar-toggle-submenu,
        body.sidebar-collapsed .feature-badge {
            display: none;
        }
        
        body.sidebar-collapsed .sidebar-link {
            justify-content: center;
            padding: 15px;
        }
        
        body.sidebar-collapsed .sidebar-icon {
            margin-right: 0;
        }
        
        body.sidebar-collapsed .main-content {
            margin-left: 60px;
        }
        
        body.sidebar-collapsed .sidebar-item:hover .sidebar-submenu {
            display: none;
        }
        
        /* Main content styles */
        .main-content {
            margin-left: 250px;
            margin-top: 60px;
            padding: 20px;
            min-height: calc(100vh - 60px);
            transition: margin-left var(--transition-speed) ease;
        }
        
        /* Dashboard header */
        .dashboard-header {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .dashboard-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--dark-color);
        }
        
        .dashboard-subtitle {
            color: #6c757d;
            font-size: 14px;
        }
        
        .breadcrumb {
            display: flex;
            align-items: center;
            font-size: 13px;
            padding: 0;
            margin: 0;
            background: none;
        }
        
        .breadcrumb a {
            color: var(--primary-color);
            text-decoration: none;
        }
        
        .breadcrumb .separator {
            margin: 0 8px;
            color: #6c757d;
        }
        
        .breadcrumb .current {
            color: #6c757d;
        }
        
        /* Date display */
        .date-display {
            display: inline-flex;
            align-items: center;
            background: var(--light-color);
            border-radius: 20px;
            padding: 8px 15px;
            color: #6c757d;
            font-size: 14px;
        }
        
        .date-display i {
            margin-right: 8px;
        }
        
        /* Recent access card */
        .recent-access-card {
            border-radius: 10px;
            overflow: hidden;
            transition: all var(--transition-speed) ease;
        }
        
        .recent-access-header {
            background: var(--light-color);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .recent-access-title {
            margin: 0;
            font-weight: 600;
        }
        
        .section-action {
            color: #6c757d;
            text-decoration: none;
            font-size: 13px;
            transition: all var(--transition-speed) ease;
        }
        
        .section-action:hover {
            color: var(--primary-color);
            text-decoration: none;
        }
        
        .recent-items {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        .recent-item {
            border-bottom: 1px solid var(--border-color);
            transition: all var(--transition-speed) ease;
        }
        
        .recent-link {
            display: flex;
            align-items: center;
            padding: 10px 20px;
            color: #555;
            text-decoration: none;
        }
        
        .recent-link:hover {
            background-color: rgba(50, 189, 234, 0.05);
            color: #555;
            text-decoration: none;
        }
        
        .recent-icon {
            width: 40px;
            height: 40px;
            background: var(--light-color);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-color);
            margin-right: 15px;
        }
        
        .recent-content {
            flex-grow: 1;
        }
        
        .recent-name {
            font-weight: 500;
            font-size: 14px;
            margin-bottom: 2px;
        }
        
        .recent-meta {
            color: #6c757d;
            font-size: 12px;
        }
        
        .recent-time {
            color: #6c757d;
            font-size: 12px;
            margin-left: 15px;
        }
        
        /* Stats cards */
        .stats-card {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 0 10px rgba(0,0,0,0.05);
            transition: all var(--transition-speed) ease;
        }
        
        .stats-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .stats-icon {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        /* Rehab categories */
        .rehab-category {
            padding: 15px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--light-color);
            transition: all var(--transition-speed) ease;
        }
        
        .rehab-category:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .rehab-category-autism {
            background: linear-gradient(to right, rgba(79, 172, 254, 0.15), rgba(0, 242, 254, 0.15));
            border-left: 3px solid #4facfe;
        }
        
        .rehab-category-hearing {
            background: linear-gradient(to right, rgba(255, 154, 158, 0.15), rgba(250, 208, 196, 0.15));
            border-left: 3px solid #ff9a9e;
        }
        
        .rehab-category-visual {
            background: linear-gradient(to right, rgba(51, 204, 255, 0.15), rgba(0, 196, 154, 0.15));
            border-left: 3px solid #33ccff;
        }
        
        .rehab-category-physical {
            background: linear-gradient(to right, rgba(246, 211, 101, 0.15), rgba(253, 160, 133, 0.15));
            border-left: 3px solid #f6d365;
        }
        
        .rehab-category-learning {
            background: linear-gradient(to right, rgba(200, 80, 192, 0.15), rgba(65, 88, 208, 0.15));
            border-left: 3px solid #c850c0;
        }
        
        .rehab-category-speech {
            background: linear-gradient(to right, rgba(161, 140, 209, 0.15), rgba(251, 194, 235, 0.15));
            border-left: 3px solid #a18cd1;
        }
        
        .rehab-category-title {
            font-weight: 500;
            font-size: 14px;
        }
        
        .rehab-category-count {
            font-weight: 600;
            font-size: 18px;
            color: #555;
        }
        
        /* Media queries */
        @media (max-width: 991px) {
            body {
                overflow-x: hidden;
            }
            
            body:not(.sidebar-collapsed) .sidebar {
                transform: translateX(-100%);
            }
            
            body.sidebar-collapsed .sidebar {
                transform: translateX(0);
                width: 250px;
            }
            
            body.sidebar-collapsed .sidebar-text,
            body.sidebar-collapsed .sidebar-title,
            body.sidebar-collapsed .sidebar-toggle-submenu,
            body.sidebar-collapsed .feature-badge {
                display: block;
            }
            
            body.sidebar-collapsed .sidebar-link {
                justify-content: flex-start;
                padding: 12px 20px;
            }
            
            body.sidebar-collapsed .sidebar-icon {
                margin-right: 10px;
            }
            
            .main-content {
                margin-left: 0 !important;
                width: 100%;
            }
            
            .topbar-title {
                max-width: 200px;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
            }
            
            .search-container.d-none.d-md-block {
                display: none !important;
            }
            
            .search-mobile-toggle {
                display: flex;
            }
        }
        
        @media (max-width: 767px) {
            .user-info.d-none.d-md-flex {
                display: none !important;
            }
            
            .user-profile {
                padding: 6px;
            }
            
            .user-avatar {
                margin-right: 0;
            }
            
            .notification-menu,
            .user-dropdown {
                width: 280px;
            }
            
            .topbar-title {
                font-size: 16px;
                max-width: 150px;
            }
            
            .categories-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
    
    @yield('styles')
</head>
<body>
    <!-- Topbar -->
    <div class="topbar">
        <div class="sidebar-toggle" id="sidebarToggle">
            <i class="fas fa-bars"></i>
        </div>
        
        <div class="topbar-logo">
            <a href="{{ route('dashboard') }}">
                <i class="fas fa-clinic-medical"></i>
                <span>CREAMS</span>
            </a>
        </div>
        
        <div class="topbar-title">
            <!-- Dynamic title based on current page -->
            @if(Route::currentRouteName() == 'traineeshome' || strpos(Route::currentRouteName(), 'trainee') !== false)
                Trainees Management
            @elseif(Route::currentRouteName() == 'rehabilitation.categories' || strpos(Route::currentRouteName(), 'rehabilitation') !== false)
                Rehabilitation Categories
            @else
                {{ ucfirst(session('role')) }} Dashboard
            @endif
        </div>
        
        <div class="topbar-spacer"></div>
        
        <div class="search-container d-none d-md-block">
            <form id="searchForm" action="{{ route('search') }}" method="GET">
                <div class="search-box">
                    <input type="text" name="query" id="globalSearch" placeholder="Search..." class="form-control">
                    <button type="submit" class="btn-search">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </form>
            <div id="searchResults" class="search-results-dropdown"></div>
        </div>
        
        <div class="topbar-right">
            <div class="search-mobile-toggle d-md-none">
                <i class="fas fa-search"></i>
            </div>
            
            <div class="mobile-search">
                <form action="{{ route('search') }}" method="GET" class="mb-0">
                    <div class="input-group">
                        <input type="text" name="query" class="form-control" placeholder="Search...">
                        <div class="input-group-append">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>
                </form>
            </div>
            
            <div class="notifications-dropdown" id="notificationToggle">
                <div class="icon-button">
                    <i class="fas fa-bell"></i>
                    @if(isset($unreadNotifications) && $unreadNotifications > 0)
                        <span class="notification-count">{{ $unreadNotifications }}</span>
                    @endif
                </div>
                <div class="notification-menu" id="notificationMenu">
                    <!-- Notifications will be loaded via JavaScript -->
                </div>
            </div>
            
            <div class="user-profile" id="userProfileToggle">
                <div class="user-avatar">
                    <img src="{{ session('user_avatar') ?? asset('images/default-avatar.png') }}" alt="User Avatar">
                </div>
                <div class="user-info d-none d-md-flex">
                    <div class="user-name">{{ session('name') ?? 'User' }}</div>
                    <div class="user-role">{{ ucfirst(session('role') ?? 'User') }}</div>
                </div>
                <div class="dropdown-menu user-dropdown" id="userDropdown">
                    <div class="dropdown-header">
                        <div class="user-details d-flex align-items-center">
                            <div class="user-avatar mr-3">
                                <img src="{{ session('user_avatar') ?? asset('images/default-avatar.png') }}" alt="User Avatar">
                            </div>
                            <div class="user-info">
                                <div class="user-name">{{ session('name') ?? 'User' }}</div>
                                <div class="user-role">{{ ucfirst(session('role') ?? 'User') }}</div>
                            </div>
                        </div>
                    </div>
                    <div class="dropdown-divider"></div>
                    <a href="{{ route('profile') }}" class="dropdown-item">
                        <i class="fas fa-user-circle"></i> My Profile
                    </a>
                    <a href="{{ route('notifications.index') }}" class="dropdown-item">
                        <i class="fas fa-bell"></i> Notifications
                    </a>
                    <a href="{{ route(session('role') . '.settings') }}" class="dropdown-item">
                        <i class="fas fa-cog"></i> Settings
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="{{ route('logout') }}" class="dropdown-item text-danger">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Sidebar -->
    <div class="sidebar">
        <ul class="sidebar-menu">
            <li class="sidebar-item">
                <a href="{{ route('dashboard') }}" class="sidebar-link {{ Route::currentRouteName() == 'dashboard' ? 'active' : '' }}">
                    <span class="sidebar-icon"><i class="fas fa-home"></i></span>
                    <span class="sidebar-text">Dashboard</span>
                </a>
            </li>

            <li class="sidebar-item">
                <a href="{{ route('profile') }}" class="sidebar-link {{ Route::currentRouteName() == 'profile' ? 'active' : '' }}">
                    <span class="sidebar-icon"><i class="fas fa-user-circle"></i></span>
                    <span class="sidebar-text">My Profile</span>
                </a>
            </li>

            <li class="sidebar-divider"></li>

            <li class="sidebar-title">Management</li>

            @if(in_array(session('role'), ['admin', 'supervisor']))
            <li class="sidebar-item {{ strpos(Route::currentRouteName(), '.users') !== false ? 'submenu-open' : '' }}">
                <a href="#" class="sidebar-link">
                    <span class="sidebar-icon"><i class="fas fa-users"></i></span>
                    <span class="sidebar-text">Staffs</span>
                    <i class="fas fa-chevron-right sidebar-toggle-submenu"></i>
                </a>
                <ul class="sidebar-submenu">
                    <li>
                        <a href="{{ route(session('role') . '.users') }}" class="sidebar-submenu-link {{ Route::currentRouteName() == session('role') . '.users' ? 'active' : '' }}">
                            Home
                        </a>
                    </li>
                    <li>
                        <a href="{{ route('auth.registerpage') }}" class="sidebar-submenu-link {{ Route::currentRouteName() == 'auth.registerpage' ? 'active' : '' }}">
                            Registration
                        </a>
                    </li>
                </ul>
            </li>
            @endif

            <li class="sidebar-item {{ strpos(Route::currentRouteName(), 'trainee') !== false ? 'submenu-open' : '' }}">
                <a href="#" class="sidebar-link">
                    <span class="sidebar-icon"><i class="fas fa-user-graduate"></i></span>
                    <span class="sidebar-text">Trainees</span>
                    <i class="fas fa-chevron-right sidebar-toggle-submenu"></i>
                </a>
                <ul class="sidebar-submenu">
                    <li>
                        <a href="{{ route('traineeshome') }}" class="sidebar-submenu-link {{ Route::currentRouteName() == 'traineeshome' ? 'active' : '' }}">
                            Home
                        </a>
                    </li>
                    <li>
                        <a href="{{ route('traineesregistrationpage') }}" class="sidebar-submenu-link {{ Route::currentRouteName() == 'traineesregistrationpage' ? 'active' : '' }}">
                            Registration
                        </a>
                    </li>
                </ul>
            </li>

            <li class="sidebar-item {{ strpos(Route::currentRouteName(), 'activities') !== false || strpos(Route::currentRouteName(), 'rehabilitation') !== false ? 'submenu-open' : '' }}">
                <a href="#" class="sidebar-link">
                    <span class="sidebar-icon"><i class="fas fa-heartbeat"></i></span>
                    <span class="sidebar-text">Activities</span>
                    <i class="fas fa-chevron-right sidebar-toggle-submenu"></i>
                </a>
                <ul class="sidebar-submenu">
                    <li>
                        <a href="{{ route('rehabilitation.categories') }}" class="sidebar-submenu-link {{ Route::currentRouteName() == 'rehabilitation.categories' ? 'active' : '' }}">
                            Categories
                        </a>
                    </li>
                    <li>
                        <a href="{{ route('activities.index') }}" class="sidebar-submenu-link {{ Route::currentRouteName() == 'activities.index' ? 'active' : '' }}">
                            Schedule
                        </a>
                    </li>
                </ul>
            </li>

            <li class="sidebar-item {{ strpos(Route::currentRouteName(), '.centres') !== false || strpos(Route::currentRouteName(), '.assets') !== false ? 'submenu-open' : '' }}">
                <a href="#" class="sidebar-link">
                    <span class="sidebar-icon"><i class="fas fa-building"></i></span>
                    <span class="sidebar-text">Centres</span>
                    <i class="fas fa-chevron-right sidebar-toggle-submenu"></i>
                </a>
                <ul class="sidebar-submenu">
                    <li>
                        <a href="{{ route(session('role') . '.centres') }}" class="sidebar-submenu-link {{ Route::currentRouteName() == session('role') . '.centres' ? 'active' : '' }}">
                            Home
                        </a>
                    </li>
                    <li>
                        <a href="{{ route(session('role') . '.assets') }}" class="sidebar-submenu-link {{ Route::currentRouteName() == session('role') . '.assets' ? 'active' : '' }}">
                            Assets
                        </a>
                    </li>
                </ul>
            </li>

            <li class="sidebar-divider"></li>

            <li class="sidebar-title">Reports & Settings</li>

            <li class="sidebar-item">
                <a href="{{ route(session('role') . '.reports') }}" class="sidebar-link {{ Route::currentRouteName() == session('role') . '.reports' ? 'active' : '' }}">
                    <span class="sidebar-icon"><i class="fas fa-chart-bar"></i></span>
                    <span class="sidebar-text">Reports</span>
                    <span class="feature-badge">Development</span>
                </a>
            </li>

            <li class="sidebar-item">
                <a href="{{ route(session('role') . '.settings') }}" class="sidebar-link {{ Route::currentRouteName() == session('role') . '.settings' ? 'active' : '' }}">
                    <span class="sidebar-icon"><i class="fas fa-cog"></i></span>
                    <span class="sidebar-text">Settings</span>
                </a>
            </li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        @yield('content')
    </div>

    <!-- JavaScript Dependencies -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Handle sidebar toggle
            const sidebarToggle = document.getElementById('sidebarToggle');
            if (sidebarToggle) {
                sidebarToggle.addEventListener('click', function() {
                    document.body.classList.toggle('sidebar-collapsed');
                    
                    // Store preference in localStorage
                    localStorage.setItem('sidebar-collapsed', document.body.classList.contains('sidebar-collapsed'));
                });
            }
            
            // Check if sidebar was previously collapsed
            if (localStorage.getItem('sidebar-collapsed') === 'true') {
                document.body.classList.add('sidebar-collapsed');
            }
            
            // Handle sidebar submenu toggles
            const submenuLinks = document.querySelectorAll('.sidebar-link');
            submenuLinks.forEach(link => {
                if (link.nextElementSibling && link.nextElementSibling.classList.contains('sidebar-submenu')) {
                    link.addEventListener('click', function(e) {
                        e.preventDefault();
                        const parent = this.parentElement;
                        
                        // Toggle submenu-open class
                        parent.classList.toggle('submenu-open');
                        
                        // Close other submenus
                        const siblings = Array.from(parent.parentElement.children).filter(el => el !== parent);
                        siblings.forEach(sibling => {
                            sibling.classList.remove('submenu-open');
                        });
                    });
                }
            });
            
            // Handle notifications dropdown
            const notificationToggle = document.getElementById('notificationToggle');
            const notificationMenu = document.getElementById('notificationMenu');
            
            if (notificationToggle && notificationMenu) {
                notificationToggle.addEventListener('click', function(e) {
                    e.stopPropagation();
                    notificationMenu.classList.toggle('show');
                    
                    // Close user dropdown if open
                    const userDropdown = document.getElementById('userDropdown');
                    if (userDropdown) {
                        userDropdown.classList.remove('show');
                    }
                    
                    // Load notifications if menu is showing
                    if (notificationMenu.classList.contains('show')) {
                        loadNotifications();
                    }
                });
            }
            
            // Handle user profile dropdown
            const userProfileToggle = document.getElementById('userProfileToggle');
            const userDropdown = document.getElementById('userDropdown');
            
            if (userProfileToggle && userDropdown) {
                userProfileToggle.addEventListener('click', function(e) {
                    e.stopPropagation();
                    userDropdown.classList.toggle('show');
                    
                    // Close notification menu if open
                    if (notificationMenu) {
                        notificationMenu.classList.remove('show');
                    }
                });
            }
            
            // Close dropdowns when clicking outside
            document.addEventListener('click', function() {
                if (notificationMenu) {
                    notificationMenu.classList.remove('show');
                }
                
                if (userDropdown) {
                    userDropdown.classList.remove('show');
                }
                
                // Also close mobile search if open
                const mobileSearch = document.querySelector('.mobile-search');
                if (mobileSearch) {
                    mobileSearch.classList.remove('show');
                }
            });
            
            // Prevent dropdown close when clicking inside
            [notificationMenu, userDropdown].forEach(el => {
                if (el) {
                    el.addEventListener('click', function(e) {
                        e.stopPropagation();
                    });
                }
            });
            
            // Mobile search toggle
            const searchMobileToggle = document.querySelector('.search-mobile-toggle');
            const mobileSearch = document.querySelector('.mobile-search');
            
            if (searchMobileToggle && mobileSearch) {
                searchMobileToggle.addEventListener('click', function(e) {
                    e.stopPropagation();
                    mobileSearch.classList.toggle('show');
                });
                
                mobileSearch.addEventListener('click', function(e) {
                    e.stopPropagation();
                });
            }
            
            // Search functionality
            const globalSearch = document.getElementById('globalSearch');
            const searchResults = document.getElementById('searchResults');
            
            if (globalSearch && searchResults) {
                let searchTimer;
                
                globalSearch.addEventListener('input', function() {
                    const query = this.value;
                    clearTimeout(searchTimer);
                    
                    // Don't search for very short queries
                    if (query.length < 2) {
                        searchResults.innerHTML = '';
                        searchResults.style.display = 'none';
                        return;
                    }
                    
                    // Set a small delay to avoid too many requests
                    searchTimer = setTimeout(function() {
                        // This would normally be an AJAX request to the server
                        // Mock response for demo
                        const mockResults = [
                            {
                                name: 'John Doe',
                                role: 'Trainee',
                                location: 'Main Centre',
                                url: '#trainee-1'
                            },
                            {
                                name: 'Training Session: Social Skills',
                                role: 'Activity',
                                location: 'Main Centre',
                                url: '#activity-1'
                            },
                            {
                                name: 'Communication Tools',
                                role: 'Asset',
                                location: 'East Wing',
                                url: '#asset-1'
                            }
                        ];
                        
                        searchResults.innerHTML = '';
                        
                        if (mockResults.length === 0) {
                            searchResults.innerHTML = '<div class="search-no-results"><p>No results found</p></div>';
                            searchResults.style.display = 'block';
                            return;
                        }
                        
                        mockResults.forEach(function(item) {
                            // Create an icon based on role
                            let icon = 'file';
                            if (item.role.toLowerCase() === 'trainee') {
                                icon = 'user-graduate';
                            } else if (item.role.toLowerCase() === 'activity') {
                                icon = 'calendar-alt';
                            } else if (item.role.toLowerCase() === 'asset') {
                                icon = 'boxes';
                            }
                            
                            const resultItem = document.createElement('a');
                            resultItem.href = item.url;
                            resultItem.className = 'search-result-item';
                            resultItem.innerHTML = `
                                <div class="search-result-icon">
                                    <i class="fas fa-${icon}"></i>
                                </div>
                                <div class="search-result-content">
                                    <div class="search-result-name">${item.name}</div>
                                    <div class="search-result-meta">
                                        <span class="search-result-role">${item.role}</span>  
                                        <span class="search-result-location">${item.location}</span>
                                    </div>
                                </div>
                            `;
                            
                            searchResults.appendChild(resultItem);
                        });
                        
                        searchResults.style.display = 'block';
                    }, 300);
                });
                
                // Close search results when clicking outside
                document.addEventListener('click', function(e) {
                    if (!e.target.closest('.search-container')) {
                        searchResults.style.display = 'none';
                    }
                });
                
                // Prevent search form submission
                const searchForm = document.getElementById('searchForm');
                if (searchForm) {
                    searchForm.addEventListener('submit', function(e) {
                        e.preventDefault();
                        // Implement full search page redirect if needed
                    });
                }
            }
            
            // Function to load notifications
            function loadNotifications() {
                if (!notificationMenu) return;
                
                // This would normally be an AJAX request to the server
                // Mock notifications for demo
                const mockNotifications = [
                    {
                        id: 1,
                        title: 'New Trainee Registered',
                        content: 'A new trainee has been registered in the system.',
                        icon: 'fas fa-user-plus',
                        color: 'primary',
                        time: '5 minutes ago',
                        url: '#notification-1'
                    },
                    {
                        id: 2,
                        title: 'Activity Scheduled',
                        content: 'A new activity has been scheduled for tomorrow.',
                        icon: 'fas fa-calendar-alt',
                        color: 'success',
                        time: '1 hour ago',
                        url: '#notification-2'
                    },
                    {
                        id: 3,
                        title: 'System Update',
                        content: 'The system will be undergoing maintenance tonight.',
                        icon: 'fas fa-cog',
                        color: 'warning',
                        time: '3 hours ago',
                        url: '#notification-3'
                    }
                ];
                
                // Build notification HTML
                let notificationsHtml = `
                    <div class="p-3 border-bottom">
                        <div class="d-flex justify-content-between align-items-center">
                            <h6 class="m-0">Notifications</h6>
                            <a href="#" class="text-muted small" id="mark-all-read">
                                Mark all as read
                            </a>
                        </div>
                    </div>
                `;
                
                if (mockNotifications.length > 0) {
                    mockNotifications.forEach(notification => {
                        notificationsHtml += `
                            <a href="${notification.url}" class="d-flex p-3 border-bottom">
                                <div class="mr-3">
                                    <div class="notification-icon ${notification.color}">
                                        <i class="${notification.icon}"></i>
                                    </div>
                                </div>
                                <div>
                                    <div class="font-weight-bold">${notification.title}</div>
                                    <div class="small text-muted">${notification.content}</div>
                                    <div class="smallest text-muted mt-1">${notification.time}</div>
                                </div>
                            </a>
                        `;
                    });
                } else {
                    notificationsHtml += `
                        <div class="p-3 text-center text-muted">
                            <i class="fas fa-bell-slash fa-2x mb-3"></i>
                            <p>No new notifications</p>
                        </div>
                    `;
                }
                
                notificationsHtml += `
                    <div class="p-2 text-center border-top">
                        <a href="{{ route('notifications.index') }}" class="btn btn-sm btn-light w-100">
                            View All Notifications
                        </a>
                    </div>
                `;
                
                notificationMenu.innerHTML = notificationsHtml;
                
                // Set up mark all read button
                const markAllReadBtn = document.getElementById('mark-all-read');
                if (markAllReadBtn) {
                    markAllReadBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        const notificationCount = document.querySelector('.notification-count');
                        if (notificationCount) {
                            notificationCount.style.display = 'none';
                        }
                        
                        notificationMenu.classList.remove('show');
                    });
                }
            }
            
            // Fix avatar images
            const avatarImages = document.querySelectorAll('.user-avatar img, .profile-img, .rounded-circle[src*="profile"]');
            avatarImages.forEach(function(img) {
                // Check if src is empty, null, or undefined
                if (!img.getAttribute('src') || img.getAttribute('src') === '') {
                    img.src = '/images/default-avatar.png';
                }
                
                // Add error handler for loading failures
                img.addEventListener('error', function() {
                    this.src = '/images/default-avatar.png';
                });
            });
        });
    </script>
    
    @yield('scripts')
</body>
</html>

footer.blade
views/layouts

{{-- Enhanced Standard Footer With Icons --}}
<footer class="footer-area">
    <div class="footer-wave-box">
        <div class="footer-wave footer-animation"></div>
    </div>
    
    <div class="container">
        <div class="footer-main">
            <div class="row">
                <div class="col-lg-4 col-md-6">
                    <div class="footer-widget">
                        <div class="footer-logo">
                            <img src="{{ asset('images/creams-logo.png') }}" alt="CREAMS Logo">
                        </div>
                        <p class="footer-desc">A collaborative initiative dedicated to empowering children with disabilities through community-based rehabilitation services.</p>
                        <div class="social-icons">
                            <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                            <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                            <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                            <a href="#" class="social-icon"><i class="fab fa-linkedin-in"></i></a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="footer-widget">
                        <h3>Quick Links</h3>
                        <ul class="footer-links">
                            <li><a href="{{ route('home') }}"><i class="fas fa-home"></i> Home</a></li>
                            <li><a href="{{ route('home') }}#about"><i class="fas fa-info-circle"></i> About</a></li>
                            <li><a href="{{ route('volunteer') }}"><i class="fas fa-hands-helping"></i> Volunteer</a></li>
                            <li><a href="{{ route('contact') }}"><i class="fas fa-envelope"></i> Contact</a></li>
                            <li><a href="{{ route('auth.loginpage') }}"><i class="fas fa-sign-in-alt"></i> Staff Portal</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="footer-widget">
                        <h3><i class="fas fa-paper-plane"></i> Stay Connected</h3>
                        <p>Subscribe to our newsletter for updates on volunteer opportunities and impact stories.</p>
                        <div class="newsletter">
                            <form action="#" method="post" class="newsletter-form">
                                <div class="form-group">
                                    <input type="email" name="email" placeholder="Your email address" required>
                                    <button type="submit"><i class="fas fa-paper-plane"></i></button>
                                </div>
                            </form>
                        </div>
                        <div class="contact-info">
                            <p><i class="fas fa-phone-alt"></i> (+60) 3642 1633 5</p>
                            <p><i class="fas fa-envelope"></i> info@creams.org</p>
                            <p><i class="fas fa-map-marker-alt"></i> IIUM, Gombak, Selangor</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="copyright">
        <div class="container">
            <div class="row align-items-centre">
                <div class="col-md-6">
                    <p>&copy; {{ date('Y') }} CREAMS. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-right">
                    <ul class="footer-bottom-links">
                        <li><a href="#"><i class="fas fa-shield-alt"></i> Privacy Policy</a></li>
                        <li><a href="#"><i class="fas fa-gavel"></i> Terms of Service</a></li>
                        <li><a href="#"><i class="fas fa-sitemap"></i> Sitemap</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</footer>

guest.blade
views/layouts

<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="csrf-token" content="{{ csrf_token() }}">

        <title>{{ config('app.name', 'Laravel') }}</title>

        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.bunny.net">
        <link href="https://fonts.bunny.net/css?family=figtree:400,500,600&display=swap" rel="stylesheet" />

        <!-- Scripts -->
        <link rel="stylesheet" href="{{ asset('css/app.css') }}">
        <script src="{{ asset('js/app.js') }}"></script>
    </head>
    <body class="font-sans text-gray-900 antialiased">
        <div class="min-h-screen flex flex-col sm:justify-centre items-centre pt-6 sm:pt-0 bg-gray-100 dark:bg-gray-900">
            <div>
                <a href="/">
                    <x-application-logo class="w-20 h-20 fill-current text-gray-500" />
                </a>
            </div>

            <div class="w-full sm:max-w-md mt-6 px-6 py-4 bg-white dark:bg-gray-800 shadow-md overflow-hidden sm:rounded-lg">
                {{ $slot }}
            </div>
        </div>
    </body>
</html>

header.blade
views/layouts

{{-- Enhanced Header Section --}}
<header id="header">
    <div class="header-container">
        <div class="row align-items-center justify-content-between">
            <div class="col-auto d-md-none">
                <button class="mobile-nav-toggle" type="button" id="mobile-nav-toggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            
            <div class="col-lg-3 col-md-3">
                <div class="logo-wrapper">
                    <a href="{{ route('home') }}">
                        <img src="{{ asset('images/logo/logo_ppdk.jpg') }}" alt="IIUM Logo" class="header-logo">
                    </a>
                    <a href="{{ route('home') }}">
                        <h1 class="logo">IIUM PD-CARE</h1>
                        <span class="small-text">Community-based Rehabilitation Center</span>
                    </a>
                </div>
            </div>
            
            <div class="col-lg-9 col-md-9 d-none d-md-block">
                <div class="d-flex justify-content-end">
                    <ul class="nav-menu">
                        <li class="{{ Route::currentRouteName() == 'home' ? 'active' : '' }}">
                            <a href="{{ route('home') }}">Home</a>
                        </li>
                        <li class="{{ in_array(Route::currentRouteName(), ['home']) ? '' : 'disabled' }}">
                            <a href="{{ route('home') }}#services" class="support-link">Services</a>
                        </li>
                        <li>
                            <a href="{{ route('home') }}#about">About</a>
                        </li>
                        <li class="{{ Route::currentRouteName() == 'contact' ? 'active' : '' }}">
                            <a href="{{ route('contact') }}">Contact</a>
                        </li>
                    </ul>
                    
                    <div class="action-buttons">
                        <a href="{{ route('volunteer') }}" class="volunteer-btn">
                            <i class="fas fa-hands-helping"></i> Volunteer
                        </a>
                        <a href="{{ route('auth.loginpage') }}" class="login-btn">
                            <i class="fas fa-sign-in-alt"></i> Login
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

navigation.blade
views/layouts

<nav x-data="{ open: false }" class="bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700">
    <!-- Primary Navigation Menu -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
            <div class="flex">
                <!-- Logo -->
                <div class="shrink-0 flex items-centre">
                    <a href="{{ route('dashboard') }}">
                        <x-application-logo class="block h-9 w-auto fill-current text-gray-800 dark:text-gray-200" />
                    </a>
                </div>

                <!-- Navigation Links -->
                <div class="hidden space-x-8 sm:-my-px sm:ms-10 sm:flex">
                    <x-nav-link :href="route('dashboard')" :active="request()->routeIs('dashboard')">
                        {{ __('Dashboard') }}
                    </x-nav-link>
                    <!-- Add trainee module link -->
                    <x-nav-link :href="route('traineeshome')" :active="request()->routeIs('traineeshome')">
                        {{ __('Trainees') }}
                    </x-nav-link>
                </div>
            </div>

            <!-- Settings Dropdown -->
            <div class="hidden sm:flex sm:items-centre sm:ms-6">
                <x-dropdown align="right" width="48">
                    <x-slot name="trigger">
                        <button class="inline-flex items-centre px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 hover:text-gray-700 dark:hover:text-gray-300 focus:outline-none transition ease-in-out duration-150">
                            <div>{{ session('name') ?? 'User' }}</div>

                            <div class="ms-1">
                                <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                                </svg>
                            </div>
                        </button>
                    </x-slot>

                    <x-slot name="content">
                        <x-dropdown-link :href="route('profile')">
                            {{ __('Profile') }}
                        </x-dropdown-link>

                        <!-- Authentication -->
                        <form method="GET" action="{{ route('logout') }}">
                            @csrf

                            <x-dropdown-link :href="route('logout')"
                                    onclick="event.preventDefault();
                                                this.closest('form').submit();">
                                {{ __('Log Out') }}
                            </x-dropdown-link>
                        </form>
                    </x-slot>
                </x-dropdown>
            </div>

            <!-- Hamburger -->
            <div class="-me-2 flex items-centre sm:hidden">
                <button @click="open = ! open" class="inline-flex items-centre justify-centre p-2 rounded-md text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-900 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-900 focus:text-gray-500 dark:focus:text-gray-400 transition duration-150 ease-in-out">
                    <svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                        <path :class="{'hidden': open, 'inline-flex': ! open }" class="inline-flex" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        <path :class="{'hidden': ! open, 'inline-flex': open }" class="hidden" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Responsive Navigation Menu -->
    <div :class="{'block': open, 'hidden': ! open}" class="hidden sm:hidden">
        <div class="pt-2 pb-3 space-y-1">
            <x-responsive-nav-link :href="route('dashboard')" :active="request()->routeIs('dashboard')">
                {{ __('Dashboard') }}
            </x-responsive-nav-link>
            <!-- Add mobile trainee module link -->
            <x-responsive-nav-link :href="route('traineeshome')" :active="request()->routeIs('traineeshome')">
                {{ __('Trainees') }}
            </x-responsive-nav-link>
        </div>

        <!-- Responsive Settings Options -->
        <div class="pt-4 pb-1 border-t border-gray-200 dark:border-gray-600">
            <div class="px-4">
                <div class="font-medium text-base text-gray-800 dark:text-gray-200">{{ session('name') ?? 'User' }}</div>
                <div class="font-medium text-sm text-gray-500">{{ session('email') ?? '' }}</div>
            </div>

            <div class="mt-3 space-y-1">
                <x-responsive-nav-link :href="route('profile')">
                    {{ __('Profile') }}
                </x-responsive-nav-link>

                <!-- Authentication -->
                <form method="GET" action="{{ route('logout') }}">
                    @csrf

                    <x-responsive-nav-link :href="route('logout')"
                            onclick="event.preventDefault();
                                        this.closest('form').submit();">
                        {{ __('Log Out') }}
                    </x-responsive-nav-link>
                </form>
            </div>
        </div>
    </div>
</nav>

notifications.blade
views/layouts

<!-- Notification Component -->
<div class="notification-component">
    <div class="notification-bell" id="notificationToggle">
        <i class="fas fa-bell"></i>
        <span class="notification-count" id="notificationCount">0</span>
    </div>
    
    <div class="notification-dropdown" id="notificationDropdown">
        <div class="notification-header">
            <h3>Notifications</h3>
            <div class="notification-actions">
                <button class="notification-action-btn refresh-btn" id="refreshNotifications" title="Refresh">
                    <i class="fas fa-sync-alt"></i>
                </button>
                <button class="notification-action-btn mark-all-btn" id="markAllReadBtn" title="Mark All as Read">
                    <i class="fas fa-check-double"></i>
                </button>
            </div>
        </div>
        
        <div class="notification-body">
            <div class="loading-indicator">
                <div class="spinner"></div>
                <span>Loading notifications...</span>
            </div>
            
            <div class="notification-list" id="notificationList">
                <!-- Notifications will be populated here via JavaScript -->
            </div>
            
            <div class="empty-notifications hidden" id="emptyNotifications">
                <div class="empty-icon">
                    <i class="fas fa-bell-slash"></i>
                </div>
                <p>No new notifications</p>
            </div>
        </div>
        
        <div class="notification-footer">
            <a href="{{ route('notifications.index') }}" class="view-all-link">
                View All Notifications
                <i class="fas fa-arrow-right"></i>
            </a>
        </div>
    </div>
</div>

<!-- Include CSS -->
<style>
    .notification-component {
        position: relative;
    }
    
    .notification-bell {
        position: relative;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        background: var(--light-bg, #f8f9fa);
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .notification-bell:hover {
        background: rgba(50, 189, 234, 0.1);
    }
    
    .notification-count {
        position: absolute;
        top: -5px;
        right: -5px;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: var(--danger-color, #ff4757);
        color: #ffffff;
        font-size: 11px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
    }
    
    .notification-count:empty {
        display: none;
    }
    
    .notification-dropdown {
        position: absolute;
        top: 100%;
        right: -10px;
        width: 350px;
        max-width: calc(100vw - 40px);
        background: #ffffff;
        border-radius: 10px;
        box-shadow: 0 5px 25px rgba(0, 0, 0, 0.15);
        margin-top: 10px;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transform: translateY(10px);
        transition: all 0.3s ease;
    }
    
    .notification-dropdown.show {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
    }
    
    .notification-dropdown::before {
        content: '';
        position: absolute;
        top: -8px;
        right: 20px;
        width: 16px;
        height: 16px;
        background: #ffffff;
        transform: rotate(45deg);
        border-top-left-radius: 4px;
    }
    
    .notification-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 20px;
        border-bottom: 1px solid var(--border-color, #e9ecef);
    }
    
    .notification-header h3 {
        font-size: 16px;
        font-weight: 600;
        margin: 0;
        color: var(--dark-color, #1a2a3a);
    }
    
    .notification-actions {
        display: flex;
        gap: 10px;
    }
    
    .notification-action-btn {
        width: 32px;
        height: 32px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--light-bg, #f8f9fa);
        border: none;
        color: #888;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .notification-action-btn:hover {
        background: rgba(50, 189, 234, 0.15);
        color: var(--primary-color, #32bdea);
    }
    
    .notification-body {
        max-height: 400px;
        overflow-y: auto;
    }
    
    .notification-body::-webkit-scrollbar {
        width: 5px;
    }
    
    .notification-body::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.05);
        border-radius: 10px;
    }
    
    .notification-body::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.2);
        border-radius: 10px;
    }
    
    .loading-indicator {
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
    }
    
    .spinner {
        width: 30px;
        height: 30px;
        border: 3px solid rgba(50, 189, 234, 0.3);
        border-top-color: var(--primary-color, #32bdea);
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
        to {
            transform: rotate(360deg);
        }
    }
    
    .loading-indicator span {
        font-size: 14px;
        color: #888;
    }
    
    .notification-list {
        display: flex;
        flex-direction: column;
    }
    
    .notification-item {
        display: flex;
        padding: 15px 20px;
        border-bottom: 1px solid var(--border-color, #e9ecef);
        cursor: pointer;
        transition: background 0.3s ease;
    }
    
    .notification-item:hover {
        background: var(--light-bg, #f8f9fa);
    }
    
    .notification-item:last-child {
        border-bottom: none;
    }
    
    .notification-icon {
        width: 40px;
        height: 40px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 15px;
        font-size: 16px;
        color: #ffffff;
    }
    
    .notification-icon.primary {
        background: linear-gradient(135deg, var(--primary-color, #32bdea), #00d2ff);
    }
    
    .notification-icon.success {
        background: linear-gradient(135deg, var(--success-color, #2ed573), #00e676);
    }
    
    .notification-icon.info {
        background: linear-gradient(135deg, #00b0ff, #0091ea);
    }
    
    .notification-icon.warning {
        background: linear-gradient(135deg, var(--warning-color, #ffa502), #ffca28);
    }
    
    .notification-icon.danger {
        background: linear-gradient(135deg, var(--danger-color, #ff4757), #ff5252);
    }
    
    .notification-icon.secondary {
        background: linear-gradient(135deg, #9e9e9e, #757575);
    }
    
    .notification-content {
        flex: 1;
    }
    
    .notification-title {
        font-size: 14px;
        font-weight: 600;
        color: var(--dark-color, #1a2a3a);
        margin-bottom: 5px;
    }
    
    .notification-message {
        font-size: 13px;
        color: #777;
        margin-bottom: 5px;
    }
    
    .notification-time {
        font-size: 12px;
        color: #888;
    }
    
    .empty-notifications {
        padding: 30px 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
        text-align: center;
    }
    
    .empty-notifications .empty-icon {
        font-size: 40px;
        color: #e0e0e0;
    }
    
    .empty-notifications p {
        font-size: 14px;
        color: #888;
    }
    
    .hidden {
        display: none;
    }
    
    .notification-footer {
        padding: 15px 20px;
        border-top: 1px solid var(--border-color, #e9ecef);
        text-align: center;
    }
    
    .view-all-link {
        color: var(--primary-color, #32bdea);
        font-size: 14px;
        font-weight: 500;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 5px;
        transition: color 0.3s ease;
    }
    
    .view-all-link:hover {
        color: var(--secondary-color, #c850c0);
    }
</style>

<!-- Include JavaScript -->
<script>
$(document).ready(function() {
    // Toggle notification dropdown
    $('#notificationToggle').click(function(e) {
        e.stopPropagation();
        $('#notificationDropdown').toggleClass('show');
        
        // Load notifications when opening the dropdown
        if ($('#notificationDropdown').hasClass('show')) {
            loadNotifications();
        }
    });
    
    // Close dropdown when clicking outside
    $(document).click(function(e) {
        if (!$(e.target).closest('.notification-component').length) {
            $('#notificationDropdown').removeClass('show');
        }
    });
    
    // Prevent dropdown from closing when clicking inside
    $('#notificationDropdown').click(function(e) {
        e.stopPropagation();
    });
    
    // Load notifications function
    function loadNotifications() {
        $('.loading-indicator').show();
        $('#notificationList').empty();
        $('#emptyNotifications').addClass('hidden');
        
        $.ajax({
            url: '{{ route("notifications.unread") }}',
            type: 'GET',
            success: function(response) {
                $('.loading-indicator').hide();
                
                if (response.success) {
                    // Update notification count
                    $('#notificationCount').text(response.count);
                    
                    if (response.count > 0) {
                        // Populate notifications
                        $.each(response.notifications, function(index, notification) {
                            const notificationItem = `
                                <div class="notification-item" data-id="${notification.id}" data-url="${notification.url}">
                                    <div class="notification-icon ${notification.color}">
                                        <i class="${notification.icon}"></i>
                                    </div>
                                    <div class="notification-content">
                                        <div class="notification-title">${notification.title}</div>
                                        <div class="notification-message">${notification.content}</div>
                                        <div class="notification-time">${notification.time}</div>
                                    </div>
                                </div>
                            `;
                            
                            $('#notificationList').append(notificationItem);
                        });
                        
                        // Add click event to notification items
                        $('.notification-item').click(function() {
                            const url = $(this).data('url');
                            window.location.href = url;
                        });
                    } else {
                        // Show empty state
                        $('#emptyNotifications').removeClass('hidden');
                    }
                } else {
                    console.error('Error loading notifications:', response.message);
                    $('#notificationList').html('<div class="error-message">Failed to load notifications</div>');
                }
            },
            error: function(error) {
                $('.loading-indicator').hide();
                console.error('Error loading notifications:', error);
                $('#notificationList').html('<div class="error-message">Failed to load notifications</div>');
            }
        });
    }
    
    // Refresh notifications
    $('#refreshNotifications').click(function() {
        loadNotifications();
    });
    
    // Mark all as read
    $('#markAllReadBtn').click(function() {
        $.ajax({
            url: '{{ route("notifications.mark-all-read") }}',
            type: 'POST',
            data: {
                _token: '{{ csrf_token() }}'
            },
            success: function(response) {
                loadNotifications();
            },
            error: function(error) {
                console.error('Error marking notifications as read:', error);
            }
        });
    });
    
    // Initial load of notification count
    function loadInitialCount() {
        $.ajax({
            url: '{{ route("notifications.unread") }}',
            type: 'GET',
            success: function(response) {
                if (response.success) {
                    $('#notificationCount').text(response.count);
                }
            }
        });
    }
    
    // Load initial notification count
    loadInitialCount();
    
    // Refresh notification count periodically
    setInterval(loadInitialCount, 60000); // Refresh every minute
});
</script>

messagesindex.blade
views/messages

@extends('layouts.dashboard')

@section('title', 'Messages')

@section('content')
<div class="content-section">
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="card-title">Messages</h5>
            <div class="card-options">
                <button class="btn btn-sm btn-primary" data-toggle="modal" data-target="#composeModal">
                    <i class="fas fa-paper-plane"></i> Compose New Message
                </button>
            </div>
        </div>
        <div class="card-body">
            <div class="messages-container">
                @if(count($messages) > 0)
                    <div class="messages-list">
                        @foreach($messages as $message)
                            <div class="message-item {{ !$message['read'] ? 'unread' : '' }}">
                                <div class="message-checkbox">
                                    <input type="checkbox" class="message-select" data-id="{{ $message['id'] }}">
                                </div>
                                <div class="message-sender">
                                    <strong>{{ $message['sender_name'] }}</strong>
                                    <span class="sender-role">{{ $message['sender_role'] }}</span>
                                </div>
                                <div class="message-content">
                                    <a href="{{ route('messages.conversation', $message['id']) }}" class="message-subject">
                                        {{ $message['subject'] }}
                                    </a>
                                    <p class="message-preview">{{ Str::limit($message['message'], 100) }}</p>
                                </div>
                                <div class="message-date">
                                    {{ \Carbon\Carbon::parse($message['date'])->format('M d, Y') }}
                                </div>
                                <div class="message-actions">
                                    <button class="btn-icon" title="Mark as {{ $message['read'] ? 'unread' : 'read' }}">
                                        <i class="fas fa-{{ $message['read'] ? 'envelope' : 'envelope-open' }}"></i>
                                    </button>
                                    <button class="btn-icon" title="Delete">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </div>
                            </div>
                        @endforeach
                    </div>
                @else
                    <div class="empty-state">
                        <div class="empty-state-icon">
                            <i class="fas fa-envelope-open"></i>
                        </div>
                        <h4>No Messages</h4>
                        <p>You don't have any messages yet.</p>
                    </div>
                @endif
            </div>
        </div>
    </div>
</div>

<!-- Compose Message Modal -->
<div class="modal fade" id="composeModal" tabindex="-1" role="dialog" aria-labelledby="composeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="composeModalLabel">Compose New Message</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="{{ route('messages.send') }}" method="POST">
                @csrf
                <div class="modal-body">
                    <div class="form-group">
                        <label for="recipient_id">Recipient</label>
                        <select class="form-control" id="recipient_id" name="recipient_id" required>
                            <option value="" disabled selected>Select recipient</option>
                            <option value="1">Ahmad Razif (Admin)</option>
                            <option value="2">Dr. Nurul Hafizah (Teacher)</option>
                            <option value="3">Mr. Ismail Rahman (Teacher)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="subject">Subject</label>
                        <input type="text" class="form-control" id="subject" name="subject" required>
                    </div>
                    <div class="form-group">
                        <label for="message">Message</label>
                        <textarea class="form-control" id="message" name="message" rows="5" required></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Send Message</button>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
    .messages-container {
        min-height: 400px;
    }
    
    .messages-list {
        border: 1px solid rgba(0, 0, 0, 0.1);
        border-radius: 10px;
        overflow: hidden;
    }
    
    .message-item {
        display: flex;
        align-items: centre;
        padding: 15px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        background-color: var(--light-color);
        transition: all 0.3s ease;
    }
    
    .message-item:last-child {
        border-bottom: none;
    }
    
    .message-item:hover {
        background-color: var(--light-bg);
    }
    
    .message-item.unread {
        background-color: rgba(50, 189, 234, 0.05);
        font-weight: 500;
    }
    
    .message-checkbox {
        width: 30px;
    }
    
    .message-sender {
        width: 180px;
        padding-right: 15px;
    }
    
    .sender-role {
        font-size: 12px;
        color: rgba(0, 0, 0, 0.5);
        display: block;
    }
    
    .message-content {
        flex: 1;
        padding-right: 15px;
    }
    
    .message-subject {
        font-weight: 500;
        color: var(--text-color);
        text-decoration: none;
        display: block;
        margin-bottom: 5px;
    }
    
    .message-preview {
        font-size: 13px;
        color: rgba(0, 0, 0, 0.6);
        margin: 0;
    }
    
    .message-date {
        width: 100px;
        font-size: 12px;
        color: rgba(0, 0, 0, 0.5);
        text-align: right;
    }
    
    .message-actions {
        width: 80px;
        display: flex;
        justify-content: flex-end;
        gap: 10px;
    }
    
    .btn-icon {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background: transparent;
        border: none;
        display: flex;
        align-items: centre;
        justify-content: centre;
        color: var(--text-color);
        transition: all 0.3s ease;
    }
    
    .btn-icon:hover {
        background: rgba(0, 0, 0, 0.1);
        color: var(--primary-color);
    }
    
    .empty-state {
        text-align: centre;
        padding: 60px 20px;
    }
    
    .empty-state-icon {
        font-size: 50px;
        color: rgba(0, 0, 0, 0.2);
        margin-bottom: 15px;
    }
    
    .empty-state h4 {
        margin-bottom: 10px;
    }
    
    .empty-state p {
        color: rgba(0, 0, 0, 0.5);
    }
    
    @media (max-width: 767px) {
        .message-item {
            flex-wrap: wrap;
        }
        
        .message-sender {
            width: 50%;
            order: 2;
        }
        
        .message-date {
            width: 50%;
            order: 3;
        }
        
        .message-content {
            width: 100%;
            order: 4;
            padding-top: 10px;
        }
        
        .message-checkbox {
            order: 1;
        }
        
        .message-actions {
            width: 100%;
            order: 5;
            justify-content: flex-start;
            padding-top: 10px;
        }
    }
</style>
@endsection

messagesshow.blade
views/messages

@extends('layouts.dashboard')

@section('title', 'View Conversation')

@section('content')
<div class="content-section">
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="card-title">Conversation with {{ $conversation['with'] }}</h5>
            <div class="card-options">
                <a href="{{ route('messages') }}" class="btn btn-sm btn-secondary">
                    <i class="fas fa-arrow-left"></i> Back to Messages
                </a>
                <button class="btn btn-sm btn-primary ml-2" data-toggle="modal" data-target="#replyModal">
                    <i class="fas fa-reply"></i> Reply
                </button>
            </div>
        </div>
        <div class="card-body">
            <div class="conversation-container">
                <div class="conversation-header">
                    <div class="conversation-subject">
                        <h4>Weekly Progress Report</h4>
                    </div>
                    <div class="conversation-participants">
                        <span class="participant">
                            <i class="fas fa-user-circle"></i> {{ $conversation['with'] }} ({{ $conversation['with_role'] }})
                        </span>
                        <span class="participant">
                            <i class="fas fa-user-circle"></i> You
                        </span>
                    </div>
                </div>
                
                <div class="conversation-messages">
                    @foreach($conversation['messages'] as $message)
                        <div class="conversation-message {{ $message['is_mine'] ? 'my-message' : '' }}">
                            <div class="message-sender">
                                <div class="sender-avatar">
                                    <i class="fas fa-user-circle"></i>
                                </div>
                                <div class="sender-details">
                                    <span class="sender-name">{{ $message['sender_name'] }}</span>
                                    <span class="message-time">{{ \Carbon\Carbon::parse($message['date'])->format('M d, Y - h:i A') }}</span>
                                </div>
                            </div>
                            <div class="message-body">
                                <p>{{ $message['content'] }}</p>
                            </div>
                            <div class="message-actions">
                                <button class="btn-icon" title="Forward">
                                    <i class="fas fa-share"></i>
                                </button>
                            </div>
                        </div>
                    @endforeach
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Reply Modal -->
<div class="modal fade" id="replyModal" tabindex="-1" role="dialog" aria-labelledby="replyModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="replyModalLabel">Reply to {{ $conversation['with'] }}</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="{{ route('messages.send') }}" method="POST">
                @csrf
                <input type="hidden" name="recipient_id" value="2">
                <input type="hidden" name="subject" value="RE: Weekly Progress Report">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="message">Message</label>
                        <textarea class="form-control" id="message" name="message" rows="5" required></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Send Reply</button>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
    .conversation-container {
        min-height: 400px;
    }
    
    .conversation-header {
        padding-bottom: 20px;
        margin-bottom: 20px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }
    
    .conversation-subject h4 {
        margin-bottom: 10px;
    }
    
    .conversation-participants {
        display: flex;
        gap: 15px;
    }
    
    .participant {
        font-size: 14px;
        color: rgba(0, 0, 0, 0.7);
    }
    
    .conversation-messages {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }
    
    .conversation-message {
        background-color: var(--light-bg);
        border-radius: 10px;
        padding: 15px;
    }
    
    .conversation-message.my-message {
        background-color: rgba(50, 189, 234, 0.1);
        margin-left: 40px;
    }
    
    .message-sender {
        display: flex;
        align-items: centre;
        margin-bottom: 10px;
    }
    
    .sender-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: var(--primary-color);
        color: white;
        display: flex;
        align-items: centre;
        justify-content: centre;
        font-size: 20px;
        margin-right: 10px;
    }
    
    .my-message .sender-avatar {
        background-color: var(--secondary-color);
    }
    
    .sender-details {
        display: flex;
        flex-direction: column;
    }
    
    .sender-name {
        font-weight: 500;
    }
    
    .message-time {
        font-size: 12px;
        color: rgba(0, 0, 0, 0.5);
    }
    
    .message-body {
        padding: 0 10px;
    }
    
    .message-actions {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        margin-top: 10px;
    }
    
    .btn-icon {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background: transparent;
        border: none;
        display: flex;
        align-items: centre;
        justify-content: centre;
        color: var(--text-color);
        transition: all 0.3s ease;
    }
    
    .btn-icon:hover {
        background: rgba(0, 0, 0, 0.1);
        color: var(--primary-color);
    }
</style>
@endsection

notificationsindex.blade
views/notifications

@extends('layouts.dashboard')

@section('title', 'Notifications')

@section('content')
<div class="content-section">
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="card-title">Notifications</h5>
            <div class="card-options">
                <form action="{{ route('notifications.mark-read') }}" method="POST" class="d-inline">
                    @csrf
                    <input type="hidden" name="notification_ids[]" value="all">
                    <button type="submit" class="btn btn-sm btn-outline-primary">
                        <i class="fas fa-check-double"></i> Mark All as Read
                    </button>
                </form>
            </div>
        </div>
        <div class="card-body">
            <div class="notifications-container">
                @if(count($notifications) > 0)
                    <div class="notifications-list">
                        @foreach($notifications as $notification)
                            <div class="notification-item {{ !$notification['read'] ? 'unread' : '' }}">
                                <div class="notification-icon notification-{{ $notification['type'] }}">
                                    @if($notification['type'] == 'info')
                                        <i class="fas fa-info-circle"></i>
                                    @elseif($notification['type'] == 'success')
                                        <i class="fas fa-check-circle"></i>
                                    @elseif($notification['type'] == 'warning')
                                        <i class="fas fa-exclamation-triangle"></i>
                                    @elseif($notification['type'] == 'danger')
                                        <i class="fas fa-times-circle"></i>
                                    @endif
                                </div>
                                <div class="notification-content">
                                    <h5 class="notification-title">{{ $notification['title'] }}</h5>
                                    <p class="notification-message">{{ $notification['message'] }}</p>
                                    <span class="notification-time">
                                        {{ \Carbon\Carbon::parse($notification['date'])->diffForHumans() }}
                                    </span>
                                </div>
                                <div class="notification-actions">
                                    <form action="{{ route('notifications.mark-read') }}" method="POST" class="d-inline">
                                        @csrf
                                        <input type="hidden" name="notification_ids[]" value="{{ $notification['id'] }}">
                                        <button type="submit" class="btn-icon" title="Mark as {{ $notification['read'] ? 'unread' : 'read' }}">
                                            <i class="fas fa-{{ $notification['read'] ? 'envelope' : 'envelope-open' }}"></i>
                                        </button>
                                    </form>
                                    <button class="btn-icon" title="Delete">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </div>
                            </div>
                        @endforeach
                    </div>
                @else
                    <div class="empty-state">
                        <div class="empty-state-icon">
                            <i class="fas fa-bell-slash"></i>
                        </div>
                        <h4>No Notifications</h4>
                        <p>You don't have any notifications at this time.</p>
                    </div>
                @endif
            </div>
        </div>
    </div>
</div>

<style>
    .notifications-container {
        min-height: 400px;
    }
    
    .notifications-list {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }
    
    .notification-item {
        display: flex;
        align-items: flex-start;
        padding: 15px;
        border-radius: 10px;
        background-color: var(--light-color);
        border: 1px solid rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
    }
    
    .notification-item:hover {
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        transform: translateY(-2px);
    }
    
    .notification-item.unread {
        border-left: 3px solid var(--primary-color);
    }
    
    .notification-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: centre;
        justify-content: centre;
        margin-right: 15px;
        flex-shrink: 0;
        font-size: 18px;
    }
    
    .notification-info {
        background-color: rgba(50, 189, 234, 0.1);
        color: var(--primary-color);
    }
    
    .notification-success {
        background-color: rgba(28, 200, 138, 0.1);
        color: #1cc88a;
    }
    
    .notification-warning {
        background-color: rgba(246, 194, 62, 0.1);
        color: #f6c23e;
    }
    
    .notification-danger {
        background-color: rgba(231, 74, 59, 0.1);
        color: #e74a3b;
    }
    
    .notification-content {
        flex: 1;
    }
    
    .notification-title {
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 5px;
    }
    
    .notification-message {
        font-size: 14px;
        color: rgba(0, 0, 0, 0.7);
        margin-bottom: 5px;
    }
    
    .notification-time {
        font-size: 12px;
        color: rgba(0, 0, 0, 0.5);
    }
    
    .notification-actions {
        display: flex;
        gap: 10px;
        margin-left: 15px;
    }
    
    .btn-icon {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background: transparent;
        border: none;
        display: flex;
        align-items: centre;
        justify-content: centre;
        color: var(--text-color);
        transition: all 0.3s ease;
    }
    
    .btn-icon:hover {
        background: rgba(0, 0, 0, 0.1);
        color: var(--primary-color);
    }
    
    .empty-state {
        text-align: centre;
        padding: 60px 20px;
    }
    
    .empty-state-icon {
        font-size: 50px;
        color: rgba(0, 0, 0, 0.2);
        margin-bottom: 15px;
    }
    
    .empty-state h4 {
        margin-bottom: 10px;
    }
    
    .empty-state p {
        color: rgba(0, 0, 0, 0.5);
    }
</style>
@endsection

activity-widget.blade
views/partials

<div class="card mb-4">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="m-0 font-weight-bold text-primary">
            <i class="fas fa-tasks mr-1"></i> Activity Overview
        </h5>
        <a href="{{ route('activities.index') }}" class="btn btn-sm btn-primary">
            View All
        </a>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6 mb-3">
                <div class="small-stat-card">
                    <div class="stat-icon-small bg-info">
                        <i class="fas fa-calendar-day"></i>
                    </div>
                    <div class="stat-content-small">
                        <h4>{{ $activityStats['todays_sessions'] ?? 0 }}</h4>
                        <p>Today's Sessions</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-3">
                <div class="small-stat-card">
                    <div class="stat-icon-small bg-success">
                        <i class="fas fa-user-check"></i>
                    </div>
                    <div class="stat-content-small">
                        <h4>{{ $activityStats['attendance_today'] ?? 0 }}</h4>
                        <p>Present Today</p>
                    </div>
                </div>
            </div>
        </div>
        
        @if(session('role') === 'teacher' && isset($todaySessions))
            <hr>
            <h6 class="font-weight-bold">Your Schedule Today:</h6>
            @forelse($todaySessions as $session)
                <div class="schedule-item">
                    <i class="fas fa-clock text-muted"></i>
                    <span class="ml-2">
                        {{ date('g:i A', strtotime($session->start_time)) }} - 
                        {{ $session->activity->activity_name }} 
                        ({{ $session->class_name }})
                    </span>
                    <a href="{{ route('activities.attendance', $session->id) }}" 
                       class="btn btn-sm btn-outline-primary float-right">
                        Mark Attendance
                    </a>
                </div>
            @empty
                <p class="text-muted small">No sessions scheduled today</p>
            @endforelse
        @endif
    </div>
</div>

delete-user-form.blade
views/profile/partials

<section class="space-y-6">
    <header>
        <h2 class="text-lg font-medium text-gray-900 dark:text-gray-100">
            {{ __('Delete Account') }}
        </h2>

        <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">
            {{ __('Once your account is deleted, all of its resources and data will be permanently deleted. Before deleting your account, please download any data or information that you wish to retain.') }}
        </p>
    </header>

    <x-danger-button
        x-data=""
        x-on:click.prevent="$dispatch('open-modal', 'confirm-user-deletion')"
    >{{ __('Delete Account') }}</x-danger-button>

    <x-modal name="confirm-user-deletion" :show="$errors->userDeletion->isNotEmpty()" focusable>
        <form method="post" action="{{ route('profile.destroy') }}" class="p-6">
            @csrf
            @method('delete')

            <h2 class="text-lg font-medium text-gray-900 dark:text-gray-100">
                {{ __('Are you sure you want to delete your account?') }}
            </h2>

            <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">
                {{ __('Once your account is deleted, all of its resources and data will be permanently deleted. Please enter your password to confirm you would like to permanently delete your account.') }}
            </p>

            <div class="mt-6">
                <x-input-label for="password" value="{{ __('Password') }}" class="sr-only" />

                <x-text-input
                    id="password"
                    name="password"
                    type="password"
                    class="mt-1 block w-3/4"
                    placeholder="{{ __('Password') }}"
                />

                <x-input-error :messages="$errors->userDeletion->get('password')" class="mt-2" />
            </div>

            <div class="mt-6 flex justify-end">
                <x-secondary-button x-on:click="$dispatch('close')">
                    {{ __('Cancel') }}
                </x-secondary-button>

                <x-danger-button class="ms-3">
                    {{ __('Delete Account') }}
                </x-danger-button>
            </div>
        </form>
    </x-modal>
</section>

update-password-form.blade
views/profile/partials

<section>
    <header>
        <h2 class="text-lg font-medium text-gray-900 dark:text-gray-100">
            {{ __('Update Password') }}
        </h2>

        <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">
            {{ __('Ensure your account is using a long, random password to stay secure.') }}
        </p>
    </header>

    <form method="post" action="{{ route('password.update') }}" class="mt-6 space-y-6">
        @csrf
        @method('put')

        <div>
            <x-input-label for="update_password_current_password" :value="__('Current Password')" />
            <x-text-input id="update_password_current_password" name="current_password" type="password" class="mt-1 block w-full" autocomplete="current-password" />
            <x-input-error :messages="$errors->updatePassword->get('current_password')" class="mt-2" />
        </div>

        <div>
            <x-input-label for="update_password_password" :value="__('New Password')" />
            <x-text-input id="update_password_password" name="password" type="password" class="mt-1 block w-full" autocomplete="new-password" />
            <x-input-error :messages="$errors->updatePassword->get('password')" class="mt-2" />
        </div>

        <div>
            <x-input-label for="update_password_password_confirmation" :value="__('Confirm Password')" />
            <x-text-input id="update_password_password_confirmation" name="password_confirmation" type="password" class="mt-1 block w-full" autocomplete="new-password" />
            <x-input-error :messages="$errors->updatePassword->get('password_confirmation')" class="mt-2" />
        </div>

        <div class="flex items-centre gap-4">
            <x-primary-button>{{ __('Save') }}</x-primary-button>

            @if (session('status') === 'password-updated')
                <p
                    x-data="{ show: true }"
                    x-show="show"
                    x-transition
                    x-init="setTimeout(() => show = false, 2000)"
                    class="text-sm text-gray-600 dark:text-gray-400"
                >{{ __('Saved.') }}</p>
            @endif
        </div>
    </form>
</section>


update-profile-information-form.blade
views/profile/partials

<section>
    <header>
        <h2 class="text-lg font-medium text-gray-900 dark:text-gray-100">
            {{ __('Profile Information') }}
        </h2>

        <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">
            {{ __("Update your account's profile information and email address.") }}
        </p>
    </header>

    <form id="send-verification" method="post" action="{{ route('verification.send') }}">
        @csrf
    </form>

    <form method="post" action="{{ route('profile.update') }}" class="mt-6 space-y-6">
        @csrf
        @method('patch')

        <div>
            <x-input-label for="name" :value="__('Name')" />
            <x-text-input id="name" name="name" type="text" class="mt-1 block w-full" :value="old('name', $user->name)" required autofocus autocomplete="name" />
            <x-input-error class="mt-2" :messages="$errors->get('name')" />
        </div>

        <div>
            <x-input-label for="email" :value="__('Email')" />
            <x-text-input id="email" name="email" type="email" class="mt-1 block w-full" :value="old('email', $user->email)" required autocomplete="username" />
            <x-input-error class="mt-2" :messages="$errors->get('email')" />

            @if ($user instanceof \Illuminate\Contracts\Auth\MustVerifyEmail && ! $user->hasVerifiedEmail())
                <div>
                    <p class="text-sm mt-2 text-gray-800 dark:text-gray-200">
                        {{ __('Your email address is unverified.') }}

                        <button form="send-verification" class="underline text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800">
                            {{ __('Click here to re-send the verification email.') }}
                        </button>
                    </p>

                    @if (session('status') === 'verification-link-sent')
                        <p class="mt-2 font-medium text-sm text-green-600 dark:text-green-400">
                            {{ __('A new verification link has been sent to your email address.') }}
                        </p>
                    @endif
                </div>
            @endif
        </div>

        <div class="flex items-centre gap-4">
            <x-primary-button>{{ __('Save') }}</x-primary-button>

            @if (session('status') === 'profile-updated')
                <p
                    x-data="{ show: true }"
                    x-show="show"
                    x-transition
                    x-init="setTimeout(() => show = false, 2000)"
                    class="text-sm text-gray-600 dark:text-gray-400"
                >{{ __('Saved.') }}</p>
            @endif
        </div>
    </form>
</section>

profileedit.blade
views/profile

<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight">
            {{ __('Profile') }}
        </h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6">
            <div class="p-4 sm:p-8 bg-white dark:bg-gray-800 shadow sm:rounded-lg">
                <div class="max-w-xl">
                    @include('profile.partials.update-profile-information-form')
                </div>
            </div>

            <div class="p-4 sm:p-8 bg-white dark:bg-gray-800 shadow sm:rounded-lg">
                <div class="max-w-xl">
                    @include('profile.partials.update-password-form')
                </div>
            </div>

            <div class="p-4 sm:p-8 bg-white dark:bg-gray-800 shadow sm:rounded-lg">
                <div class="max-w-xl">
                    @include('profile.partials.delete-user-form')
                </div>
            </div>
        </div>
    </div>
</x-app-layout>

settingsindex.blade
views/settings

<!-- resources/views/settings/index.blade.php -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>System Settings - CREAMS</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />
  <link rel="shortcut icon" href="{{ asset('images/favicon.png') }}" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ asset('css/dashboardstyle.css') }}">
  <style>
    .settings-card {
      border-radius: 15px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      margin-bottom: 25px;
      transition: all 0.3s ease;
    }
    
    .settings-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }
    
    .settings-card .card-header {
      background: linear-gradient(135deg, #32bdea, #c850c0);
      color: white;
      border-top-left-radius: 15px;
      border-top-right-radius: 15px;
      padding: 15px 20px;
    }
    
    .settings-card .card-header h5 {
      margin: 0;
      font-weight: 600;
    }
    
    .settings-icon {
      margin-right: 10px;
      background: rgba(255, 255, 255, 0.2);
      width: 32px;
      height: 32px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }
    
    .setting-group {
      padding: 15px 0;
      border-bottom: 1px solid #eee;
    }
    
    .setting-group:last-child {
      border-bottom: none;
    }
    
    .setting-group label {
      font-weight: 500;
      color: #333;
    }
    
    .color-picker {
      height: 38px;
      padding: 0;
      border: 1px solid #ced4da;
      border-radius: .25rem;
    }
    
    .submit-settings {
      background: linear-gradient(135deg, #32bdea, #c850c0);
      color: white;
      border: none;
      padding: 10px 25px;
      border-radius: 50px;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    
    .submit-settings:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 34px;
    }
    
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 34px;
    }
    
    .slider:before {
      position: absolute;
      content: "";
      height: 26px;
      width: 26px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    
    input:checked + .slider {
      background: linear-gradient(135deg, #32bdea, #c850c0);
    }
    
    input:checked + .slider:before {
      transform: translateX(26px);
    }
  </style>
</head>

<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-header">
      <div class="logo">
        <img src="{{ asset('images/favicon.png') }}" alt="CREAMS Logo">
        <span class="logo-text">CREAMS</span>
      </div>
      <div class="toggle-btn">
        <i class="fas fa-chevron-left"></i>
      </div>
    </div>
    
    <div class="admin-profile">
      <div class="admin-avatar">
        @if(session('avatar'))
          <img src="{{ asset('storage/avatars/' . session('avatar')) }}" alt="User Avatar">
        @else
          <img src="{{ asset('images/admin-avatar.jpg') }}" alt="User Avatar">
        @endif
      </div>
      <div class="admin-info">
        <div class="admin-name">{{ Auth::user()->name }}</div>
        <div class="admin-role">{{ ucfirst(session('role')) }}</div>
      </div>
    </div>
    
    <ul class="nav-menu">
      <li>
        <a href="{{ route('dashboard') }}">
          <i class="fas fa-home"></i>
          <span>Dashboard</span>
        </a>
      </li>
      <li>
        <a href="{{ route('profile') }}">
          <i class="fas fa-user-circle"></i>
          <span>My Profile</span>
        </a>
      </li>
      <li>
        <a href="{{ route('admin.users') }}">
          <i class="fas fa-users"></i>
          <span>Staffs</span>
        </a>
      </li>
      <li>
        <a href="{{ route('admin.centres') }}">
          <i class="fas fa-building"></i>
          <span>Centres</span>
        </a>
      </li>
      <li>
        <a href="{{ route('admin.assets') }}">
          <i class="fas fa-boxes"></i>
          <span>Assets</span>
        </a>
      </li>
      <li class="active">
        <a href="{{ route('admin.settings') }}">
          <i class="fas fa-cog"></i>
          <span>Settings</span>
        </a>
      </li>
    </ul>
    
    <form method="POST" action="{{ route('logout') }}" class="logout-container">
      @csrf
      <button type="submit" class="logout-btn">
        <i class="fas fa-sign-out-alt"></i>
        <span>Logout</span>
      </button>
    </form>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Header -->
    <div class="header">
      <div class="header-content">
        <div class="page-info">
          <h1 class="page-title">System Settings</h1>
          <div class="breadcrumb">
            <a href="{{ route('dashboard') }}">Dashboard</a>
            <span class="separator">/</span>
            <span class="current">Settings</span>
          </div>
        </div>
        
        <div class="header-actions">
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" id="search" placeholder="Search...">
          </div>
          
          <div class="notification-bell">
            <i class="fas fa-bell"></i>
            <span class="notification-count">3</span>
          </div>
          
          <div class="admin-dropdown">
            <div class="admin-dropdown-toggle">
              @if(session('avatar'))
                <img src="{{ asset('storage/avatars/' . session('avatar')) }}" alt="User">
              @else
                <img src="{{ asset('images/admin-avatar.jpg') }}" alt="User">
              @endif
              <span>{{ Auth::user()->name }}</span>
              <i class="fas fa-chevron-down"></i>
            </div>
            <div class="admin-dropdown-menu">
              <a href="{{ route('profile') }}">
                <i class="fas fa-user"></i> My Profile
              </a>
              <a href="{{ route('admin.settings') }}">
                <i class="fas fa-cog"></i> Settings
              </a>
              <form method="POST" action="{{ route('logout') }}">
                @csrf
                <button type="submit">
                  <i class="fas fa-sign-out-alt"></i> Logout
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Content -->
    <div class="content-section">
      <!-- Settings Form -->
      <form action="{{ route('admin.settings.update') }}" method="POST">
        @csrf
        <div class="row">
          <!-- General Settings -->
          <div class="col-lg-6">
            <div class="card settings-card">
              <div class="card-header d-flex align-items-center">
                <div class="settings-icon">
                  <i class="fas fa-globe"></i>
                </div>
                <h5 class="card-title">General Settings</h5>
              </div>
              <div class="card-body">
                <div class="setting-group">
                  <label for="site_name">Site Name</label>
                  <input type="text" class="form-control" id="site_name" name="site_name" value="{{ $settings['general']['site_name'] }}">
                </div>
                <div class="setting-group">
                  <label for="site_description">Site Description</label>
                  <textarea class="form-control" id="site_description" name="site_description" rows="3">{{ $settings['general']['site_description'] }}</textarea>
                </div>
                <div class="setting-group">
                  <label for="contact_email">Contact Email</label>
                  <input type="email" class="form-control" id="contact_email" name="contact_email" value="{{ $settings['general']['contact_email'] }}">
                </div>
                <div class="setting-group">
                  <label for="contact_phone">Contact Phone</label>
                  <input type="text" class="form-control" id="contact_phone" name="contact_phone" value="{{ $settings['general']['contact_phone'] }}">
                </div>
              </div>
            </div>
          </div>
          
          <!-- Appearance Settings -->
          <div class="col-lg-6">
            <div class="card settings-card">
              <div class="card-header d-flex align-items-center">
                <div class="settings-icon">
                  <i class="fas fa-paint-brush"></i>
                </div>
                <h5 class="card-title">Appearance Settings</h5>
              </div>
              <div class="card-body">
                <div class="setting-group">
                  <label for="primary_color">Primary Color</label>
                  <div class="input-group">
                    <div class="input-group-prepend">
                      <span class="input-group-text">#</span>
                    </div>
                    <input type="text" class="form-control" id="primary_color" name="primary_color" value="{{ str_replace('#', '', $settings['appearance']['primary_color']) }}">
                    <div class="input-group-append">
                      <input type="color" class="color-picker" id="primary_color_picker" value="{{ $settings['appearance']['primary_color'] }}">
                    </div>
                  </div>
                </div>
                <div class="setting-group">
                  <label for="secondary_color">Secondary Color</label>
                  <div class="input-group">
                    <div class="input-group-prepend">
                      <span class="input-group-text">#</span>
                    </div>
                    <input type="text" class="form-control" id="secondary_color" name="secondary_color" value="{{ str_replace('#', '', $settings['appearance']['secondary_color']) }}">
                    <div class="input-group-append">
                      <input type="color" class="color-picker" id="secondary_color_picker" value="{{ $settings['appearance']['secondary_color'] }}">
                    </div>
                  </div>
                </div>
                <div class="setting-group">
                  <label>Logo</label>
                  <div class="d-flex align-items-center">
                    <img src="{{ asset($settings['appearance']['logo_path']) }}" alt="Logo" class="img-thumbnail mr-3" style="width: 60px; height: 60px;">
                    <button type="button" class="btn btn-outline-primary">Change Logo</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Security Settings -->
          <div class="col-lg-6">
            <div class="card settings-card">
              <div class="card-header d-flex align-items-center">
                <div class="settings-icon">
                  <i class="fas fa-shield-alt"></i>
                </div>
                <h5 class="card-title">Security Settings</h5>
              </div>
              <div class="card-body">
                <div class="setting-group">
                  <label for="password_expiry_days">Password Expiry (Days)</label>
                  <input type="number" class="form-control" id="password_expiry_days" name="password_expiry_days" min="0" max="365" value="{{ $settings['security']['password_expiry_days'] }}">
                </div>
                <div class="setting-group">
                  <label for="session_timeout_minutes">Session Timeout (Minutes)</label>
                  <input type="number" class="form-control" id="session_timeout_minutes" name="session_timeout_minutes" min="5" max="120" value="{{ $settings['security']['session_timeout_minutes'] }}">
                </div>
                <div class="setting-group">
                  <div class="d-flex justify-content-between align-items-center">
                    <label for="allow_registration">Allow Registration</label>
                    <label class="switch">
                      <input type="checkbox" id="allow_registration" name="allow_registration" {{ $settings['security']['allow_registration'] ? 'checked' : '' }}>
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>
                <div class="setting-group">
                  <div class="d-flex justify-content-between align-items-center">
                    <label for="require_email_verification">Require Email Verification</label>
                    <label class="switch">
                      <input type="checkbox" id="require_email_verification" name="require_email_verification" {{ $settings['security']['require_email_verification'] ? 'checked' : '' }}>
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Notification Settings -->
          <div class="col-lg-6">
            <div class="card settings-card">
              <div class="card-header d-flex align-items-center">
                <div class="settings-icon">
                  <i class="fas fa-bell"></i>
                </div>
                <h5 class="card-title">Notification Settings</h5>
              </div>
              <div class="card-body">
                <div class="setting-group">
                  <div class="d-flex justify-content-between align-items-center">
                    <label for="email_notifications">Email Notifications</label>
                    <label class="switch">
                      <input type="checkbox" id="email_notifications" name="email_notifications" {{ $settings['notifications']['email_notifications'] ? 'checked' : '' }}>
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>
                <div class="setting-group">
                  <div class="d-flex justify-content-between align-items-center">
                    <label for="system_notifications">System Notifications</label>
                    <label class="switch">
                      <input type="checkbox" id="system_notifications" name="system_notifications" {{ $settings['notifications']['system_notifications'] ? 'checked' : '' }}>
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>
                <div class="setting-group">
                  <div class="d-flex justify-content-between align-items-center">
                    <label for="sms_notifications">SMS Notifications</label>
                    <label class="switch">
                      <input type="checkbox" id="sms_notifications" name="sms_notifications" {{ $settings['notifications']['sms_notifications'] ? 'checked' : '' }}>
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="text-center mt-4 mb-5">
          <button type="submit" class="submit-settings">
            <i class="fas fa-save mr-2"></i> Save Settings
          </button>
        </div>
      </form>
    </div>
    
    <!-- Footer -->
    <div class="dashboard-footer">
      <div class="footer-content">
        <div class="footer-logo">
          <img src="{{ asset('images/favicon.png') }}" alt="CREAMS Logo">
          <span>CREAMS</span>
        </div>
        <div class="footer-text">
          Community-based REhAbilitation Management System &copy; {{ date('Y') }} IIUM
        </div>
        <div class="footer-links">
          <a href="#" class="footer-link">Privacy Policy</a>
          <a href="#" class="footer-link">Terms of Service</a>
          <a href="#" class="footer-link">Help Centre</a>
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript Dependencies -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script>
  
  <script>
    $(document).ready(function() {
      // Sidebar toggle
      $('.toggle-btn').click(function() {
        $('.sidebar').toggleClass('collapsed');
        $('.main-content').toggleClass('expanded');
      });
      
      // Admin dropdown
      $('.admin-dropdown-toggle').click(function() {
        $('.admin-dropdown-menu').toggleClass('show');
      });
      
      // Close dropdown when clicking outside
      $(document).click(function(event) {
        if (!$(event.target).closest('.admin-dropdown').length) {
          $('.admin-dropdown-menu').removeClass('show');
        }
      });
      
      // Color picker sync
      $('#primary_color_picker').on('input', function() {
        $('#primary_color').val($(this).val().replace('#', ''));
      });
      
      $('#secondary_color_picker').on('input', function() {
        $('#secondary_color').val($(this).val().replace('#', ''));
      });
      
      $('#primary_color').on('input', function() {
        $('#primary_color_picker').val('#' + $(this).val());
      });
      
      $('#secondary_color').on('input', function() {
        $('#secondary_color_picker').val('#' + $(this).val());
      });
    });
  </script>
</body>
</html>

trainee-dashboard.blade
views/trainees

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@yield('title') - CREAMS</title>
    
    <!-- Favicon -->
    <link rel="shortcut icon" href="{{ asset('images/logo/favicon.png') }}" type="image/x-icon">
    
    <!-- CSS Dependencies -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Base Styles -->
    <style>
        :root {
          --primary-color: #32bdea;
          --secondary-color: #c850c0;
          --primary-gradient: linear-gradient(-135deg, var(--primary-color), var(--secondary-color));
          --secondary-gradient: linear-gradient(-135deg, var(--secondary-color), var(--primary-color));
          --dark-color: #1a2a3a;
          --light-color: #ffffff;
          --text-color: #444444;
          --light-bg: #f8f9fa;
          --sidebar-width: 260px;
          --sidebar-collapsed-width: 70px;
          --header-height: 60px;
          --transition-speed: 0.3s;
        }
        
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
          font-family: 'Poppins', sans-serif;
        }
        
        body {
          background-color: var(--light-bg);
          color: var(--text-color);
          overflow-x: hidden;
        }
        
        /* Sidebar styles */
        .sidebar {
          position: fixed;
          top: 0;
          left: 0;
          height: 100vh;
          width: var(--sidebar-width);
          background: var(--dark-color);
          color: var(--light-color);
          transition: all var(--transition-speed) ease;
          z-index: 1000;
          box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        }
        
        .sidebar.collapsed {
          width: var(--sidebar-collapsed-width);
        }
        
        .sidebar-header {
          display: flex;
          align-items: center;
          padding: 20px;
          height: var(--header-height);
          border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .sidebar-header .toggle-btn {
          width: 30px;
          height: 30px;
          display: flex;
          justify-content: center;
          align-items: center;
          background: rgba(255, 255, 255, 0.1);
          border-radius: 50%;
          margin-left: auto;
          cursor: pointer;
          transition: all var(--transition-speed) ease;
        }
        
        .sidebar.collapsed .toggle-btn {
          transform: rotate(180deg);
        }
        
        .logo {
          display: flex;
          align-items: center;
        }
        
        .logo img {
          width: 40px;
          height: 40px;
          border-radius: 10px;
          object-fit: cover;
        }
        
        .logo-text {
          margin-left: 15px;
          font-weight: 600;
          font-size: 20px;
          white-space: nowrap;
          transition: opacity var(--transition-speed) ease;
        }
        
        .sidebar.collapsed .logo-text {
          opacity: 0;
          pointer-events: none;
        }
        
        .admin-profile {
          padding: 20px;
          display: flex;
          align-items: center;
          border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .admin-avatar {
          width: 50px;
          height: 50px;
          border-radius: 15px;
          overflow: hidden;
          background: var(--primary-gradient);
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .admin-avatar img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }
        
        .admin-info {
          margin-left: 15px;
          transition: opacity var(--transition-speed) ease;
        }
        
        .sidebar.collapsed .admin-info {
          opacity: 0;
          pointer-events: none;
        }
        
        .admin-name {
          font-weight: 600;
          font-size: 16px;
          margin-bottom: 3px;
        }
        
        .admin-role {
          font-size: 12px;
          color: rgba(255, 255, 255, 0.7);
          padding: 3px 10px;
          background: rgba(255, 255, 255, 0.1);
          border-radius: 20px;
          display: inline-block;
        }
        
        .nav-menu {
          padding: 20px 0;
          list-style: none;
        }
        
        .nav-menu li {
          position: relative;
        }
        
        .nav-menu li a {
          display: flex;
          align-items: center;
          padding: 12px 20px;
          color: var(--light-color);
          text-decoration: none;
          font-size: 14px;
          transition: all var(--transition-speed) ease;
        }
        
        .nav-menu li a:hover {
          background: rgba(255, 255, 255, 0.1);
        }
        
        .nav-menu li.active a {
          background: var(--primary-gradient);
        }
        
        .nav-menu li.active a::before {
          content: '';
          position: absolute;
          right: 0;
          top: 0;
          height: 100%;
          width: 4px;
          background: var(--secondary-color);
        }
        
        .nav-menu li a i {
          min-width: 30px;
          font-size: 18px;
          display: flex;
          justify-content: center;
        }
        
        .nav-menu li a span {
          margin-left: 15px;
          transition: opacity var(--transition-speed) ease;
        }
        
        .sidebar.collapsed .nav-menu li a span {
          opacity: 0;
          pointer-events: none;
        }
        
        .tooltip-sidebar {
          position: absolute;
          left: 100%;
          top: 50%;
          transform: translateY(-50%);
          background: var(--dark-color);
          color: var(--light-color);
          padding: 5px 10px;
          border-radius: 5px;
          font-size: 12px;
          white-space: nowrap;
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
          opacity: 0;
          pointer-events: none;
          transition: all var(--transition-speed) ease;
        }
        
        .sidebar.collapsed .nav-menu li:hover .tooltip-sidebar {
          opacity: 1;
          left: calc(var(--sidebar-collapsed-width) + 10px);
        }
        
        .logout-container {
          margin-top: auto;
          padding: 20px;
        }
        
        .logout-btn {
          width: 100%;
          padding: 10px 20px;
          display: flex;
          align-items: center;
          background: rgba(255, 255, 255, 0.1);
          border: none;
          color: var(--light-color);
          cursor: pointer;
          transition: all var(--transition-speed) ease;
          text-align: left;
          border-radius: 8px;
        }
        
        .logout-btn:hover {
          background: rgba(255, 60, 60, 0.15);
          color: #ff6b6b;
        }
        
        .logout-btn i {
          min-width: 30px;
          font-size: 18px;
          display: flex;
          justify-content: center;
        }
        
        .logout-btn span {
          margin-left: 15px;
          transition: opacity var(--transition-speed) ease;
        }
        
        .sidebar.collapsed .logout-btn span {
          opacity: 0;
          pointer-events: none;
        }
        
        /* Main content styles */
        .main-content {
          margin-left: var(--sidebar-width);
          padding: 20px;
          transition: margin var(--transition-speed) ease;
          min-height: 100vh;
          display: flex;
          flex-direction: column;
        }
        
        .main-content.expanded {
          margin-left: var(--sidebar-collapsed-width);
        }
        
        .header {
          margin-bottom: 30px;
        }
        
        .header-content {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 20px;
        }
        
        .page-info {
          flex: 1;
        }
        
        .page-title {
          font-size: 28px;
          font-weight: 700;
          background: var(--primary-gradient);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          margin-bottom: 5px;
        }
        
        .breadcrumb {
          display: flex;
          align-items: center;
          font-size: 14px;
          color: rgba(0, 0, 0, 0.5);
          background: none;
          padding: 0;
          margin: 0;
        }
        
        .breadcrumb a {
          color: var(--primary-color);
          text-decoration: none;
          transition: all var(--transition-speed) ease;
        }
        
        .breadcrumb a:hover {
          color: var(--secondary-color);
        }
        
        .breadcrumb .separator {
          margin: 0 10px;
        }
        
        .breadcrumb .current {
          color: rgba(0, 0, 0, 0.5);
        }
        
        .header-actions {
          display: flex;
          align-items: center;
          gap: 20px;
        }
        
        .search-box {
          position: relative;
        }
        
        .search-box input {
          width: 250px;
          height: 40px;
          border-radius: 20px;
          border: 1px solid rgba(0, 0, 0, 0.1);
          padding: 0 15px 0 40px;
          font-size: 14px;
          transition: all var(--transition-speed) ease;
        }
        
        .search-box input:focus {
          width: 300px;
          border-color: var(--primary-color);
          box-shadow: 0 0 15px rgba(50, 189, 234, 0.1);
          outline: none;
        }
        
        .search-box i {
          position: absolute;
          left: 15px;
          top: 50%;
          transform: translateY(-50%);
          color: rgba(0, 0, 0, 0.3);
        }
        
        .notification-bell {
          position: relative;
          width: 40px;
          height: 40px;
          border-radius: 50%;
          background: var(--light-color);
          border: 1px solid rgba(0, 0, 0, 0.1);
          display: flex;
          align-items: center;
          justify-content: center;
          cursor: pointer;
          transition: all var(--transition-speed) ease;
        }
        
        .notification-bell:hover {
          background: var(--primary-gradient);
          color: var(--light-color);
          border-color: transparent;
        }
        
        .notification-count {
          position: absolute;
          top: -5px;
          right: -5px;
          width: 20px;
          height: 20px;
          border-radius: 50%;
          background: #ff4757;
          color: var(--light-color);
          font-size: 12px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: 600;
        }
        
        .admin-dropdown {
          position: relative;
        }
        
        .admin-dropdown-toggle {
          display: flex;
          align-items: center;
          cursor: pointer;
          padding: 5px 10px;
          border-radius: 30px;
          background: var(--light-color);
          border: 1px solid rgba(0, 0, 0, 0.1);
          transition: all var(--transition-speed) ease;
        }
        
        .admin-dropdown-toggle:hover {
          background: var(--light-bg);
        }
        
        .admin-dropdown-toggle img {
          width: 30px;
          height: 30px;
          border-radius: 50%;
          object-fit: cover;
          margin-right: 10px;
        }
        
        .admin-dropdown-toggle span {
          font-size: 14px;
          margin-right: 10px;
        }
        
        .admin-dropdown-menu {
          position: absolute;
          top: calc(100% + 10px);
          right: 0;
          background: var(--light-color);
          border-radius: 10px;
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
          min-width: 200px;
          z-index: 100;
          opacity: 0;
          pointer-events: none;
          transform: translateY(10px);
          transition: all var(--transition-speed) ease;
        }
        
        .admin-dropdown-menu.show {
          opacity: 1;
          pointer-events: all;
          transform: translateY(0);
        }
        
        .admin-dropdown-menu a,
        .admin-dropdown-menu button {
          display: flex;
          align-items: center;
          padding: 12px 20px;
          color: var(--text-color);
          text-decoration: none;
          font-size: 14px;
          transition: all var(--transition-speed) ease;
          border: none;
          background: transparent;
          width: 100%;
          text-align: left;
          cursor: pointer;
        }
        
        .admin-dropdown-menu a:hover,
        .admin-dropdown-menu button:hover {
          background: var(--light-bg);
          color: var(--primary-color);
        }
        
        .admin-dropdown-menu a i,
        .admin-dropdown-menu button i {
          margin-right: 10px;
          font-size: 16px;
        }
        
        .admin-dropdown-menu a:first-child {
          border-top-left-radius: 10px;
          border-top-right-radius: 10px;
        }
        
        .admin-dropdown-menu a:last-child,
        .admin-dropdown-menu form:last-child button {
          border-bottom-left-radius: 10px;
          border-bottom-right-radius: 10px;
        }
        
        .page-actions {
          display: flex;
          align-items: center;
          gap: 15px;
        }
        
        .action-btn {
          padding: 8px 20px;
          border-radius: 8px;
          border: 1px solid rgba(0, 0, 0, 0.1);
          background: var(--light-color);
          display: flex;
          align-items: center;
          cursor: pointer;
          transition: all var(--transition-speed) ease;
          font-size: 14px;
          text-decoration: none;
          color: var(--text-color);
        }
        
        .action-btn:hover {
          background: var(--light-bg);
          border-color: rgba(0, 0, 0, 0.2);
          color: var(--primary-color);
        }
        
        .action-btn.primary {
          background: var(--primary-gradient);
          color: var(--light-color);
          border-color: transparent;
        }
        
        .action-btn.primary:hover {
          box-shadow: 0 5px 15px rgba(50, 189, 234, 0.2);
          transform: translateY(-2px);
        }
        
        .action-btn i {
          margin-right: 8px;
        }
        
        /* Footer styles */
        .dashboard-footer {
          margin-top: auto;
          padding: 20px 0 0;
          border-top: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .footer-content {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 15px 0;
        }
        
        .footer-logo {
          display: flex;
          align-items: center;
        }
        
        .footer-logo img {
          width: 30px;
          height: 30px;
          margin-right: 10px;
        }
        
        .footer-logo span {
          font-weight: 600;
        }
        
        .footer-text {
          font-size: 14px;
          color: rgba(0, 0, 0, 0.5);
        }
        
        .footer-links {
          display: flex;
          gap: 20px;
        }
        
        .footer-link {
          font-size: 14px;
          color: var(--primary-color);
          text-decoration: none;
          transition: all var(--transition-speed) ease;
        }
        
        .footer-link:hover {
          color: var(--secondary-color);
        }
        
        /* Content section */
        .content-section {
          flex: 1;
        }
        
        /* Alert styles */
        .alert {
          border: none;
          border-radius: 10px;
          padding: 15px 20px;
          margin-bottom: 20px;
          display: flex;
          align-items: center;
        }
        
        .alert i {
          margin-right: 10px;
          font-size: 20px;
        }
        
        .alert-success {
          background-color: rgba(40, 167, 69, 0.1);
          color: #28a745;
        }
        
        .alert-danger {
          background-color: rgba(220, 53, 69, 0.1);
          color: #dc3545;
        }
        
        .alert-warning {
          background-color: rgba(255, 193, 7, 0.1);
          color: #ffc107;
        }
        
        .alert-info {
          background-color: rgba(23, 162, 184, 0.1);
          color: #17a2b8;
        }
        
        /* Animations */
        @keyframes fadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }
        
        @keyframes slideInUp {
          from {
            transform: translateY(20px);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }
        
        .fade-in {
          animation: fadeIn 0.5s ease-in-out;
        }
        
        .slide-in-up {
          animation: slideInUp 0.5s ease-in-out;
        }

        /* Responsive adjustments */
        @media (max-width: 992px) {
          .search-box input {
            width: 180px;
          }
          
          .search-box input:focus {
            width: 220px;
          }
        }
        
        @media (max-width: 768px) {
          .sidebar {
            width: var(--sidebar-collapsed-width);
          }
          
          .sidebar .logo-text,
          .sidebar .admin-info,
          .sidebar .nav-menu li a span,
          .sidebar .logout-btn span {
            opacity: 0;
            pointer-events: none;
          }
          
          .main-content {
            margin-left: var(--sidebar-collapsed-width);
          }
          
          .header-content {
            flex-direction: column;
            align-items: flex-start;
          }
          
          .header-actions {
            width: 100%;
            margin-top: 20px;
          }
          
          .search-box {
            flex: 1;
          }
          
          .search-box input {
            width: 100%;
          }
          
          .search-box input:focus {
            width: 100%;
          }
          
          .footer-content {
            flex-direction: column;
            gap: 15px;
            text-align: center;
          }
          
          .footer-logo {
            justify-content: center;
          }
          
          .footer-links {
            justify-content: center;
          }
        }
        
        @media (max-width: 576px) {
          .page-title {
            font-size: 24px;
          }
          
          .header-actions {
            gap: 10px;
          }
          
          .notification-bell,
          .admin-dropdown-toggle {
            width: 36px;
            height: 36px;
          }
          
          .admin-dropdown-toggle span,
          .admin-dropdown-toggle i {
            display: none;
          }
          
          .page-actions {
            flex-wrap: wrap;
          }
          
          .action-btn {
            flex: 1;
            justify-content: center;
          }
        }
    </style>
    
    <!-- Additional CSS -->
    <link rel="stylesheet" href="{{ asset('css/dashboardstyle.css') }}">
    
    <!-- Page-specific CSS -->
    @yield('styles')
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <img src="{{ asset('images/favicon.png') }}" alt="CREAMS Logo">
                <span class="logo-text">CREAMS</span>
            </div>
            <div class="toggle-btn">
                <i class="fas fa-chevron-left"></i>
            </div>
        </div>
        
        <div class="admin-profile">
            <div class="admin-avatar">
                @if(isset($user['avatar']) && $user['avatar'])
                    <img src="{{ asset('storage/avatars/' . $user['avatar']) }}" alt="User Avatar">
                @else
                    <img src="{{ asset('images/admin-avatar.jpg') }}" alt="User Avatar">
                @endif
            </div>
            <div class="admin-info">
                <div class="admin-name">{{ $user['name'] ?? 'User' }}</div>
                <div class="admin-role">{{ ucfirst($user['role'] ?? 'guest') }}</div>
            </div>
        </div>
        
        <ul class="nav-menu">
            <li class="{{ request()->routeIs('dashboard') ? 'active' : '' }}">
                <a href="{{ route('dashboard') }}">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                    <div class="tooltip-sidebar">Dashboard</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('traineeshome') || request()->routeIs('traineeprofile') || request()->routeIs('traineesregistrationpage') ? 'active' : '' }}">
                <a href="{{ route('traineeshome') }}">
                    <i class="fas fa-user-graduate"></i>
                    <span>Trainees</span>
                    <div class="tooltip-sidebar">Trainees</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('traineeactivity') ? 'active' : '' }}">
                <a href="{{ route('traineeactivity') }}">
                    <i class="fas fa-clipboard-list"></i>
                    <span>Activities</span>
                    <div class="tooltip-sidebar">Trainee Activities</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('teachershome') ? 'active' : '' }}">
                <a href="{{ route('teachershome') }}">
                    <i class="fas fa-chalkboard-teacher"></i>
                    <span>Staff</span>
                    <div class="tooltip-sidebar">Staff</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('schedulehomepage') ? 'active' : '' }}">
                <a href="{{ route('schedulehomepage') }}">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Schedule</span>
                    <div class="tooltip-sidebar">Schedule</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('assetmanagementpage') ? 'active' : '' }}">
                <a href="{{ route('assetmanagementpage') }}">
                    <i class="fas fa-box"></i>
                    <span>Assets</span>
                    <div class="tooltip-sidebar">Asset Management</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('aboutus') ? 'active' : '' }}">
                <a href="{{ route('aboutus') }}">
                    <i class="fas fa-info-circle"></i>
                    <span>About</span>
                    <div class="tooltip-sidebar">About Us</div>
                </a>
            </li>
        </ul>
        
        <form method="POST" action="{{ route('logout') }}" class="logout-container">
            @csrf
            <button type="submit" class="logout-btn">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </button>
        </form>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <div class="page-info">
                    <h1 class="page-title">@yield('page-title')</h1>
                    <div class="breadcrumb">
                        <a href="{{ route('dashboard') }}">Dashboard</a>
                        <span class="separator">/</span>
                        <span class="current">@yield('breadcrumb')</span>
                    </div>
                </div>
                
                <div class="header-actions">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="search" placeholder="Search...">
                    </div>
                    
                    <div class="notification-bell">
                        <i class="fas fa-bell"></i>
                        @if(isset($notificationCount) && $notificationCount > 0)
                            <span class="notification-count">{{ $notificationCount }}</span>
                        @endif
                    </div>
                    
                    <div class="admin-dropdown">
                      <div class="admin-dropdown-toggle">
                          @if(isset($user['avatar']) && $user['avatar'])
                              <img src="{{ asset('storage/avatars/' . $user['avatar']) }}" alt="User">
                          @else
                              <img src="{{ asset('images/admin-avatar.jpg') }}" alt="User">
                          @endif
                          <span>{{ $user['name'] ?? 'User' }}</span>
                          <i class="fas fa-chevron-down"></i>
                      </div>
                      <div class="admin-dropdown-menu">
                          <a href="{{ route('profile') }}">
                              <i class="fas fa-user"></i> My Profile
                          </a>
                          @if(isset($user['role']) && $user['role'] == 'admin')
                              <a href="{{ route('admin.settings') }}">
                                  <i class="fas fa-cog"></i> Settings
                              </a>
                          @endif
                          <form method="POST" action="{{ route('logout') }}">
                              @csrf
                              <button type="submit">
                                  <i class="fas fa-sign-out-alt"></i> Logout
                              </button>
                          </form>
                      </div>
                  </div>
                </div>
            </div>
            
            @yield('page-actions')
        </div>
        
        <!-- Content Section -->
        <div class="content-section">
            <!-- Alert Messages -->
            @if(session('success'))
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    <i class="fas fa-check-circle mr-2"></i> {{ session('success') }}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            @endif
            
            @if(session('error'))
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    <i class="fas fa-exclamation-circle mr-2"></i> {{ session('error') }}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            @endif
            
            @if($errors->any())
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    <i class="fas fa-exclamation-circle mr-2"></i> Please check the form for errors
                    <ul class="mb-0 mt-2">
                        @foreach($errors->all() as $error)
                            <li>{{ $error }}</li>
                        @endforeach
                    </ul>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            @endif
            
            <!-- Main Content -->
            @yield('content')
        </div>
        
        <!-- Footer -->
        <div class="dashboard-footer">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="{{ asset('images/favicon.png') }}" alt="CREAMS Logo">
                    <span>CREAMS</span>
                </div>
                <div class="footer-text">
                    Community-based REhAbilitation Management System &copy; {{ date('Y') }} IIUM
                </div>
                <div class="footer-links">
                    <a href="#" class="footer-link">Privacy Policy</a>
                    <a href="#" class="footer-link">Terms of Service</a>
                    <a href="#" class="footer-link">Help Centre</a>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Dependencies -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script>
    
    <script>
        $(document).ready(function() {
            // Sidebar toggle
            $('.toggle-btn').click(function() {
                $('.sidebar').toggleClass('collapsed');
                $('.main-content').toggleClass('expanded');
            });
            
            // Admin dropdown
            $('.admin-dropdown-toggle').click(function(e) {
                e.stopPropagation();
                $('.admin-dropdown-menu').toggleClass('show');
            });
            
            // Close dropdown when clicking outside
            $(document).click(function(event) {
                if (!$(event.target).closest('.admin-dropdown').length) {
                    $('.admin-dropdown-menu').removeClass('show');
                }
            });
            
            // Auto-hide alerts after 5 seconds
            setTimeout(function() {
                $('.alert').alert('close');
            }, 5000);
        });
    </script>
    
    <!-- Page-specific Scripts -->
    @yield('scripts')
</body>
</html>

traineesactivity-dashboard.blade
views/trainees

@extends('layouts.app')

@section('title', 'My Activities')

@section('styles')
<style>
    .activity-dashboard {
        padding: 20px;
    }
    
    .welcome-card {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        color: white;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 30px;
    }
    
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }
    
    .stat-card {
        background: white;
        border-radius: 12px;
        padding: 25px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        transition: transform 0.3s ease;
    }
    
    .stat-card:hover {
        transform: translateY(-5px);
    }
    
    .stat-icon {
        width: 50px;
        height: 50px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        margin-bottom: 15px;
    }
    
    .stat-value {
        font-size: 32px;
        font-weight: 700;
        color: var(--dark-color);
        margin-bottom: 5px;
    }
    
    .stat-label {
        color: #666;
        font-size: 14px;
    }
    
    .schedule-card {
        background: white;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        margin-bottom: 20px;
    }
    
    .schedule-header {
        background: #f8f9fa;
        padding: 20px;
        border-bottom: 1px solid #e9ecef;
    }
    
    .schedule-item {
        padding: 20px;
        border-bottom: 1px solid #f0f0f0;
        display: flex;
        align-items: center;
        transition: background 0.3s ease;
    }
    
    .schedule-item:hover {
        background: #f8f9fa;
    }
    
    .schedule-time {
        background: var(--primary-color);
        color: white;
        padding: 10px 15px;
        border-radius: 8px;
        font-weight: 600;
        margin-right: 20px;
        min-width: 100px;
        text-align: center;
    }
    
    .schedule-details h6 {
        margin: 0 0 5px 0;
        color: var(--dark-color);
    }
    
    .schedule-details p {
        margin: 0;
        color: #666;
        font-size: 14px;
    }
    
    .progress-card {
        background: white;
        border-radius: 12px;
        padding: 25px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
    }
    
    .progress-item {
        margin-bottom: 20px;
    }
    
    .progress-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
    }
    
    .progress-bar-container {
        background: #f0f0f0;
        border-radius: 10px;
        height: 10px;
        overflow: hidden;
    }
    
    .progress-bar-fill {
        background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
        height: 100%;
        transition: width 0.3s ease;
    }
    
    .empty-state {
        text-align: center;
        padding: 40px;
        color: #999;
    }
    
    .empty-state i {
        font-size: 64px;
        margin-bottom: 20px;
        opacity: 0.5;
    }
</style>
@endsection

@section('content')
<div class="activity-dashboard">
    <!-- Welcome Section -->
    <div class="welcome-card">
        <h1>Welcome back, {{ $trainee->trainee_first_name }}!</h1>
        <p>Here's your activity overview for today, {{ date('l, F j, Y') }}</p>
    </div>
    
    <!-- Statistics -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(50, 189, 234, 0.1); color: var(--primary-color);">
                <i class="fas fa-calendar-check"></i>
            </div>
            <div class="stat-value">{{ $enrollments->count() }}</div>
            <div class="stat-label">Enrolled Activities</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(46, 213, 115, 0.1); color: #2ed573;">
                <i class="fas fa-percentage"></i>
            </div>
            <div class="stat-value">{{ $attendanceStats['rate'] }}%</div>
            <div class="stat-label">Attendance Rate (30 days)</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(255, 165, 2, 0.1); color: #ffa502;">
                <i class="fas fa-clock"></i>
            </div>
            <div class="stat-value">{{ $todaySchedule->count() }}</div>
            <div class="stat-label">Classes Today</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon" style="background: rgba(200, 80, 192, 0.1); color: var(--secondary-color);">
                <i class="fas fa-star"></i>
            </div>
            <div class="stat-value">{{ $attendanceStats['present'] }}</div>
            <div class="stat-label">Classes Attended</div>
        </div>
    </div>
    
    <div class="row">
        <!-- Today's Schedule -->
        <div class="col-lg-8">
            <div class="schedule-card">
                <div class="schedule-header">
                    <h4 class="mb-0">Today's Schedule</h4>
                </div>
                <div class="schedule-body">
                    @forelse($todaySchedule as $enrollment)
                    <div class="schedule-item">
                        <div class="schedule-time">
                            {{ Carbon\Carbon::parse($enrollment->session->start_time)->format('g:i A') }}
                        </div>
                        <div class="schedule-details">
                            <h6>{{ $enrollment->session->activity->activity_name }}</h6>
                            <p>
                                <i class="fas fa-user"></i> {{ $enrollment->session->teacher->name }} | 
                                <i class="fas fa-map-marker-alt"></i> {{ $enrollment->session->location ?? 'TBA' }}
                            </p>
                        </div>
                    </div>
                    @empty
                    <div class="empty-state">
                        <i class="fas fa-calendar-times"></i>
                        <h5>No Classes Today</h5>
                        <p>Enjoy your day off!</p>
                    </div>
                    @endforelse
                </div>
            </div>
            
            <!-- My Progress -->
            <div class="progress-card">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h4 class="mb-0">My Progress</h4>
                    <a href="{{ route('trainee.progress') }}" class="btn btn-sm btn-primary">
                        View All <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
                
                @foreach($enrollments->take(3) as $enrollment)
                <div class="progress-item">
                    <div class="progress-header">
                        <h6>{{ $enrollment->session->activity->activity_name }}</h6>
                        <span>{{ $enrollment->attendance->whereIn('status', ['Present', 'Late'])->count() }}/{{ $enrollment->attendance->count() }} classes</span>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar-fill" style="width: {{ $enrollment->attendance->count() > 0 ? ($enrollment->attendance->whereIn('status', ['Present', 'Late'])->count() / $enrollment->attendance->count() * 100) : 0 }}%"></div>
                    </div>
                </div>
                @endforeach
            </div>
        </div>
        
        <!-- Upcoming Activities -->
        <div class="col-lg-4">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Upcoming Activities</h5>
                </div>
                <div class="card-body">
                    @forelse($upcomingActivities as $day)
                    <div class="mb-3">
                        <h6 class="text-primary">{{ $day['date']->format('l, M j') }}</h6>
                        @foreach($day['sessions'] as $enrollment)
                        <div class="pl-3 mb-2">
                            <small class="d-block">
                                <strong>{{ Carbon\Carbon::parse($enrollment->session->start_time)->format('g:i A') }}</strong> - 
                                {{ $enrollment->session->activity->activity_name }}
                            </small>
                        </div>
                        @endforeach
                    </div>
                    @empty
                    <p class="text-muted text-center">No upcoming activities</p>
                    @endforelse
                </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="card mt-3">
                <div class="card-header">
                    <h5 class="mb-0">Quick Actions</h5>
                </div>
                <div class="card-body">
                    <a href="{{ route('trainee.schedule') }}" class="btn btn-primary btn-block mb-2">
                        <i class="fas fa-calendar"></i> View Full Schedule
                    </a>
                    <a href="{{ route('trainee.progress') }}" class="btn btn-info btn-block mb-2">
                        <i class="fas fa-chart-line"></i> View Progress Report
                    </a>
                    <a href="{{ route('activities.index') }}" class="btn btn-secondary btn-block">
                        <i class="fas fa-search"></i> Browse Activities
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection

traineesedit.blade
views/trainees

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Trainee - {{ $trainee->trainee_first_name }} {{ $trainee->trainee_last_name }} - CREAMS</title>
    
    <!-- Favicon -->
    <link rel="shortcut icon" href="{{ asset('images/logo/favicon.png') }}" type="image/x-icon">
    
    <!-- External CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ asset('css/trainee-edit.css') }}">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <img src="{{ asset('images/favicon.png') }}" alt="CREAMS Logo">
                <span class="logo-text">CREAMS</span>
            </div>
            <div class="toggle-btn">
                <i class="fas fa-chevron-left"></i>
            </div>
        </div>
        
        <div class="admin-profile">
            <div class="admin-avatar">
                @if(isset($user['avatar']) && $user['avatar'])
                    <img src="{{ asset('storage/avatars/' . $user['avatar']) }}" alt="User Avatar">
                @else
                    <img src="{{ asset('images/admin-avatar.jpg') }}" alt="User Avatar">
                @endif
            </div>
            <div class="admin-info">
                <div class="admin-name">{{ $user['name'] ?? 'User' }}</div>
                <div class="admin-role">{{ ucfirst($user['role'] ?? 'guest') }}</div>
            </div>
        </div>
        
        <ul class="nav-menu">
            <li class="{{ request()->routeIs('dashboard') ? 'active' : '' }}">
                <a href="{{ route('dashboard') }}">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                    <div class="tooltip-sidebar">Dashboard</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('traineeshome') || request()->routeIs('traineeprofile') || request()->routeIs('traineesregistrationpage') ? 'active' : '' }}">
                <a href="{{ route('traineeshome') }}">
                    <i class="fas fa-user-graduate"></i>
                    <span>Trainees</span>
                    <div class="tooltip-sidebar">Trainees</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('traineeactivity') ? 'active' : '' }}">
                <a href="{{ route('traineeactivity') }}">
                    <i class="fas fa-clipboard-list"></i>
                    <span>Activities</span>
                    <div class="tooltip-sidebar">Trainee Activities</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('teachershome') ? 'active' : '' }}">
                <a href="{{ route('teachershome') }}">
                    <i class="fas fa-chalkboard-teacher"></i>
                    <span>Staff</span>
                    <div class="tooltip-sidebar">Staff</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('schedulehomepage') ? 'active' : '' }}">
                <a href="{{ route('schedulehomepage') }}">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Schedule</span>
                    <div class="tooltip-sidebar">Schedule</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('assetmanagementpage') ? 'active' : '' }}">
                <a href="{{ route('assetmanagementpage') }}">
                    <i class="fas fa-box"></i>
                    <span>Assets</span>
                    <div class="tooltip-sidebar">Asset Management</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('aboutus') ? 'active' : '' }}">
                <a href="{{ route('aboutus') }}">
                    <i class="fas fa-info-circle"></i>
                    <span>About</span>
                    <div class="tooltip-sidebar">About Us</div>
                </a>
            </li>
        </ul>
        
        <form method="POST" action="{{ route('logout') }}" class="logout-container">
            @csrf
            <button type="submit" class="logout-btn">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </button>
        </form>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <div class="page-info">
                    <h1 class="page-title">Edit Trainee Profile</h1>
                    <div class="breadcrumb">
                        <a href="{{ route('dashboard') }}">Dashboard</a>
                        <span class="separator">/</span>
                        <a href="{{ route('traineeshome') }}">Trainees</a>
                        <span class="separator">/</span>
                        <a href="{{ route('traineeprofile', ['id' => $trainee->id]) }}">{{ $trainee->trainee_first_name }} {{ $trainee->trainee_last_name }}</a>
                        <span class="separator">/</span>
                        <span class="current">Edit</span>
                    </div>
                </div>
                
                <div class="header-actions">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="search" placeholder="Search...">
                    </div>
                    
                    <div class="notification-bell">
                        <i class="fas fa-bell"></i>
                        @if(isset($notificationCount) && $notificationCount > 0)
                            <span class="notification-count">{{ $notificationCount }}</span>
                        @endif
                    </div>
                    
                    <div class="admin-dropdown">
                        <div class="admin-dropdown-toggle">
                            @if(isset($user['avatar']) && $user['avatar'])
                                <img src="{{ asset('storage/avatars/' . $user['avatar']) }}" alt="User">
                            @else
                                <img src="{{ asset('images/admin-avatar.jpg') }}" alt="User">
                            @endif
                            <span>{{ $user['name'] ?? 'User' }}</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="admin-dropdown-menu">
                            <a href="{{ route('profile') }}">
                                <i class="fas fa-user"></i> My Profile
                            </a>
                            @if(isset($user['role']) && $user['role'] == 'admin')
                                <a href="{{ route('admin.settings') }}">
                                    <i class="fas fa-cog"></i> Settings
                                </a>
                            @endif
                            <form method="POST" action="{{ route('logout') }}">
                                @csrf
                                <button type="submit">
                                    <i class="fas fa-sign-out-alt"></i> Logout
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="page-actions">
                <a href="{{ route('traineeprofile', ['id' => $trainee->id]) }}" class="action-btn">
                    <i class="fas fa-arrow-left"></i> Back to Profile
                </a>
            </div>
        </div>
        
        <!-- Content Section -->
        <div class="content-section">
            <!-- Alert Messages -->
            @if(session('success'))
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    <i class="fas fa-check-circle mr-2"></i> {{ session('success') }}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            @endif
            
            @if(session('error'))
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    <i class="fas fa-exclamation-circle mr-2"></i> {{ session('error') }}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            @endif

            @if($errors->any())
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    <i class="fas fa-exclamation-circle mr-2"></i> Please check the form for errors:
                    <ul class="mb-0 mt-2">
                        @foreach($errors->all() as $error)
                            <li>{{ $error }}</li>
                        @endforeach
                    </ul>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            @endif

            <!-- Edit Form Card -->
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">{{ $trainee->trainee_first_name }} {{ $trainee->trainee_last_name }}</h6>
                </div>
                <div class="card-body">
                    <form action="{{ route('updatetraineeprofile', ['id' => $trainee->id]) }}" method="POST" enctype="multipart/form-data">
                        @csrf
                        
                        <div class="row">
                            <div class="col-lg-8">
                                <!-- Basic Information -->
                                <h5 class="mb-3">Basic Information</h5>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="trainee_first_name">First Name <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control @error('trainee_first_name') is-invalid @enderror" 
                                                   id="trainee_first_name" name="trainee_first_name" 
                                                   value="{{ old('trainee_first_name', $trainee->trainee_first_name) }}" required>
                                            @error('trainee_first_name')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="trainee_last_name">Last Name <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control @error('trainee_last_name') is-invalid @enderror" 
                                                   id="trainee_last_name" name="trainee_last_name" 
                                                   value="{{ old('trainee_last_name', $trainee->trainee_last_name) }}" required>
                                            @error('trainee_last_name')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="trainee_email">Email Address <span class="text-danger">*</span></label>
                                            <input type="email" class="form-control @error('trainee_email') is-invalid @enderror" 
                                                   id="trainee_email" name="trainee_email" 
                                                   value="{{ old('trainee_email', $trainee->trainee_email) }}" required>
                                            @error('trainee_email')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="trainee_phone_number">Phone Number</label>
                                            <input type="text" class="form-control @error('trainee_phone_number') is-invalid @enderror" 
                                                   id="trainee_phone_number" name="trainee_phone_number" 
                                                   value="{{ old('trainee_phone_number', $trainee->trainee_phone_number) }}">
                                            @error('trainee_phone_number')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="trainee_date_of_birth">Date of Birth <span class="text-danger">*</span></label>
                                            <input type="date" class="form-control @error('trainee_date_of_birth') is-invalid @enderror" 
                                                   id="trainee_date_of_birth" name="trainee_date_of_birth" 
                                                   value="{{ old('trainee_date_of_birth', $trainee->trainee_date_of_birth->format('Y-m-d')) }}" required>
                                            @error('trainee_date_of_birth')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="trainee_condition">Condition <span class="text-danger">*</span></label>
                                            <select class="form-control @error('trainee_condition') is-invalid @enderror" 
                                                    id="trainee_condition" name="trainee_condition" required>
                                                <option value="">Select Condition</option>
                                                @foreach($conditions as $condition)
                                                    <option value="{{ $condition }}" 
                                                        {{ old('trainee_condition', $trainee->trainee_condition) == $condition ? 'selected' : '' }}>
                                                        {{ $condition }}
                                                    </option>
                                                @endforeach
                                            </select>
                                            @error('trainee_condition')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="centre_name">Centre <span class="text-danger">*</span></label>
                                    <select class="form-control @error('centre_name') is-invalid @enderror" id="centre_name" name="centre_name" required>
                                        <option value="">Select Centre</option>
                                        @foreach($centres as $centre)
                                            <option value="{{ $centre->centre_name }}" 
                                                {{ old('centre_name', $trainee->centre_name) == $centre->centre_name ? 'selected' : '' }}>
                                                {{ $centre->centre_name }}
                                            </option>
                                        @endforeach
                                    </select>
                                    @error('centre_name')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                                
                                <!-- Guardian Information -->
                                <hr class="my-4">
                                <h5 class="mb-3">Guardian Information</h5>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="guardian_name">Guardian's Name</label>
                                            <input type="text" class="form-control @error('guardian_name') is-invalid @enderror" 
                                                   id="guardian_name" name="guardian_name" 
                                                   value="{{ old('guardian_name', $traineeProfile->guardian_name ?? '') }}">
                                            @error('guardian_name')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="guardian_relationship">Relationship</label>
                                            <select class="form-control @error('guardian_relationship') is-invalid @enderror" 
                                                    id="guardian_relationship" name="guardian_relationship">
                                                <option value="">Select Relationship</option>
                                                <option value="Parent" {{ old('guardian_relationship', $traineeProfile->guardian_relationship ?? '') == 'Parent' ? 'selected' : '' }}>Parent</option>
                                                <option value="Sibling" {{ old('guardian_relationship', $traineeProfile->guardian_relationship ?? '') == 'Sibling' ? 'selected' : '' }}>Sibling</option>
                                                <option value="Grandparent" {{ old('guardian_relationship', $traineeProfile->guardian_relationship ?? '') == 'Grandparent' ? 'selected' : '' }}>Grandparent</option>
                                                <option value="Aunt/Uncle" {{ old('guardian_relationship', $traineeProfile->guardian_relationship ?? '') == 'Aunt/Uncle' ? 'selected' : '' }}>Aunt/Uncle</option>
                                                <option value="Legal Guardian" {{ old('guardian_relationship', $traineeProfile->guardian_relationship ?? '') == 'Legal Guardian' ? 'selected' : '' }}>Legal Guardian</option>
                                                <option value="Other" {{ old('guardian_relationship', $traineeProfile->guardian_relationship ?? '') == 'Other' ? 'selected' : '' }}>Other</option>
                                            </select>
                                            @error('guardian_relationship')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="guardian_phone">Guardian's Phone</label>
                                            <input type="text" class="form-control @error('guardian_phone') is-invalid @enderror" 
                                                   id="guardian_phone" name="guardian_phone" 
                                                   value="{{ old('guardian_phone', $traineeProfile->guardian_phone ?? '') }}">
                                            @error('guardian_phone')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="guardian_email">Guardian's Email</label>
                                            <input type="email" class="form-control @error('guardian_email') is-invalid @enderror" 
                                                   id="guardian_email" name="guardian_email" 
                                                   value="{{ old('guardian_email', $traineeProfile->guardian_email ?? '') }}">
                                            @error('guardian_email')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="guardian_address">Guardian's Address</label>
                                    <textarea class="form-control @error('guardian_address') is-invalid @enderror" 
                                          id="guardian_address" name="guardian_address" rows="3">{{ old('guardian_address', $traineeProfile->guardian_address ?? '') }}</textarea>
                                    @error('guardian_address')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                                
                                <!-- Additional Information -->
                                <hr class="my-4">
                                <h5 class="mb-3">Additional Information</h5>
                                <div class="form-group">
                                    <label for="medical_history">Medical History</label>
                                    <textarea class="form-control @error('medical_history') is-invalid @enderror" 
                                          id="medical_history" name="medical_history" rows="4">{{ old('medical_history', $traineeProfile->medical_history ?? '') }}</textarea>
                                    @error('medical_history')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                                
                                <div class="form-group">
                                    <label for="additional_notes">Additional Notes</label>
                                    <textarea class="form-control @error('additional_notes') is-invalid @enderror" 
                                          id="additional_notes" name="additional_notes" rows="4">{{ old('additional_notes', $traineeProfile->additional_notes ?? '') }}</textarea>
                                    <small class="form-text text-muted">Add any additional notes or information about the trainee.</small>
                                    @error('additional_notes')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                            </div>
                            
                            <div class="col-lg-4">
                                <!-- Profile Picture -->
                                <div class="card mb-4">
                                    <div class="card-header py-3">
                                        <h6 class="m-0 font-weight-bold text-primary">Profile Picture</h6>
                                    </div>
                                    <div class="card-body text-center">
                                        <img id="avatar-preview" class="img-fluid rounded-circle mb-3" 
                                             src="{{ $trainee->getAvatarUrlAttribute() }}" alt="Profile Picture" 
                                             style="width: 150px; height: 150px; object-fit: cover;">
                                        
                                        <div class="form-group">
                                            <div class="custom-file">
                                                <input type="file" class="custom-file-input @error('trainee_avatar') is-invalid @enderror" 
                                                       id="trainee_avatar" name="trainee_avatar" accept="image/*">
                                                <label class="custom-file-label" for="trainee_avatar">Choose new image</label>
                                            </div>
                                            <small class="form-text text-muted">Maximum file size: 2MB. Accepted formats: JPEG, PNG, JPG, GIF.</small>
                                            @error('trainee_avatar')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Emergency Contact Information -->
                                <div class="card mb-4">
                                    <div class="card-header py-3">
                                        <h6 class="m-0 font-weight-bold text-primary">Emergency Contact</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="form-group">
                                            <label for="emergency_contact_name">Contact Name</label>
                                            <input type="text" class="form-control @error('emergency_contact_name') is-invalid @enderror" 
                                                   id="emergency_contact_name" name="emergency_contact_name" 
                                                   value="{{ old('emergency_contact_name', $traineeProfile->emergency_contact_name ?? '') }}">
                                            @error('emergency_contact_name')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                        <div class="form-group">
                                            <label for="emergency_contact_phone">Contact Phone</label>
                                            <input type="text" class="form-control @error('emergency_contact_phone') is-invalid @enderror" 
                                                   id="emergency_contact_phone" name="emergency_contact_phone" 
                                                   value="{{ old('emergency_contact_phone', $traineeProfile->emergency_contact_phone ?? '') }}">
                                            @error('emergency_contact_phone')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                        <div class="form-group">
                                            <label for="emergency_contact_relationship">Relationship</label>
                                            <input type="text" class="form-control @error('emergency_contact_relationship') is-invalid @enderror" 
                                                   id="emergency_contact_relationship" name="emergency_contact_relationship" 
                                                   value="{{ old('emergency_contact_relationship', $traineeProfile->emergency_contact_relationship ?? '') }}">
                                            @error('emergency_contact_relationship')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Consent Information -->
                                <div class="card mb-4">
                                    <div class="card-header py-3">
                                        <h6 class="m-0 font-weight-bold text-primary">Consent</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="form-group form-check">
                                            <input type="checkbox" class="form-check-input" 
                                                   id="photo_consent" name="photo_consent" value="1" 
                                                   {{ old('photo_consent', $traineeProfile->photo_consent ?? 0) ? 'checked' : '' }}>
                                            <label class="form-check-label" for="photo_consent">
                                                Permission to use photos/videos for promotional purposes
                                            </label>
                                        </div>
                                        
                                        <div class="form-group form-check">
                                            <input type="checkbox" class="form-check-input" 
                                                   id="services_consent" name="services_consent" value="1" 
                                                   {{ old('services_consent', $traineeProfile->services_consent ?? 0) ? 'checked' : '' }}>
                                            <label class="form-check-label" for="services_consent">
                                                Consent for rehabilitation services
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Action Buttons -->
                                <div class="card">
                                    <div class="card-header py-3">
                                        <h6 class="m-0 font-weight-bold text-primary">Actions</h6>
                                    </div>
                                    <div class="card-body">
                                        <button type="submit" class="btn btn-primary btn-block">
                                            <i class="fas fa-save mr-1"></i> Save Changes
                                        </button>
                                        <a href="{{ route('traineeprofile', ['id' => $trainee->id]) }}" class="btn btn-secondary btn-block">
                                            <i class="fas fa-times mr-1"></i> Cancel
                                        </a>
                                        <hr>
                                        <button type="button" class="btn btn-danger btn-block" data-toggle="modal" data-target="#deleteTraineeModal">
                                            <i class="fas fa-trash-alt mr-1"></i> Delete Trainee
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="dashboard-footer">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="{{ asset('images/favicon.png') }}" alt="CREAMS Logo">
                    <span>CREAMS</span>
                </div>
                <div class="footer-text">
                    Community-based REhAbilitation Management System &copy; {{ date('Y') }} IIUM
                </div>
                <div class="footer-links">
                    <a href="#" class="footer-link">Privacy Policy</a>
                    <a href="#" class="footer-link">Terms of Service</a>
                    <a href="#" class="footer-link">Help Centre</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Trainee Modal -->
    <div class="modal fade" id="deleteTraineeModal" tabindex="-1" role="dialog" aria-labelledby="deleteTraineeModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteTraineeModalLabel">Delete Trainee</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p class="text-danger">
                        <i class="fas fa-exclamation-triangle mr-1"></i> 
                        Warning: This action cannot be undone. Are you sure you want to delete this trainee?
                    </p>
                    <p>
                        This will permanently remove <strong>{{ $trainee->trainee_first_name }} {{ $trainee->trainee_last_name }}</strong> 
                        and all related data from the system.
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <form action="{{ route('traineeprofile.destroy', ['id' => $trainee->id]) }}" method="POST">
                        @csrf
                        @method('DELETE')
                        <button type="submit" class="btn btn-danger">Delete Trainee</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Dependencies -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function() {
            // Sidebar toggle
            $('.toggle-btn').click(function() {
                $('.sidebar').toggleClass('collapsed');
                $('.main-content').toggleClass('expanded');
            });
            
            // Admin dropdown
            $('.admin-dropdown-toggle').click(function(e) {
                e.stopPropagation();
                $('.admin-dropdown-menu').toggleClass('show');
            });
            
            // Close dropdown when clicking outside
            $(document).click(function(event) {
                if (!$(event.target).closest('.admin-dropdown').length) {
                    $('.admin-dropdown-menu').removeClass('show');
                }
            });
            
            // Preview uploaded avatar
            $('#trainee_avatar').change(function() {
                if (this.files && this.files[0]) {
                    var reader = new FileReader();
                    reader.onload = function(e) {
                        $('#avatar-preview').attr('src', e.target.result);
                    }
                    reader.readAsDataURL(this.files[0]);
                    
                    // Update custom file label with file name
                    var fileName = $(this).val().split('\\').pop();
                    $(this).next('.custom-file-label').html(fileName);
                }
            });
            
            // Auto hide alerts after 5 seconds
            setTimeout(function() {
                $('.alert').fadeOut('slow');
            }, 5000);
        });
    </script>
</body>
</html>

traineeshome.blade
views/trainees

```php
@extends('layouts.app')

@section('title', 'Trainees Home - CREAMS')

@section('styles')
<style>
    /* Card Styles */
    .rehab-badge {
        font-size: 0.8rem;
        padding: 0.3rem 0.6rem;
        border-radius: 30px;
    }

    .avatar-container {
        height: 80px;
        width: 80px;
        margin: 0 auto;
        overflow: hidden;
        border-radius: 50%;
    }

    .avatar-container img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .empty-state {
        padding: 3rem;
        text-align: center;
    }

    .empty-state img {
        max-width: 200px;
        margin-bottom: 1.5rem;
    }

    /* Filter badge styles */
    .badge {
        font-size: 0.9rem;
        padding: 0.5rem 0.75rem;
    }

    .badge a {
        color: white;
        text-decoration: none;
    }

    .badge a:hover {
        opacity: 0.8;
    }
    
    /* Stats cards */
    .border-left-primary {
        border-left: 4px solid var(--primary-color) !important;
    }
    
    .border-left-success {
        border-left: 4px solid var(--success-color) !important;
    }
    
    .border-left-info {
        border-left: 4px solid #36b9cc !important;
    }
    
    .border-left-warning {
        border-left: 4px solid var(--warning-color) !important;
    }
    
    .text-xs {
        font-size: .7rem;
    }
    
    .text-primary {
        color: var(--primary-color) !important;
    }
    
    .text-success {
        color: var(--success-color) !important;
    }
    
    .text-info {
        color: #36b9cc !important;
    }
    
    .text-warning {
        color: var(--warning-color) !important;
    }
    
    .text-gray-300 {
        color: #dddfeb !important;
    }
    
    .text-gray-800 {
        color: #5a5c69 !important;
    }
</style>
@endsection

@section('content')
<div class="container-fluid">
    <!-- Page Header -->
    <div class="dashboard-header mb-4">
        <div class="row align-items-center">
            <div class="col">
                <h1 class="dashboard-title">Trainee Management</h1>
                <div class="breadcrumb">
                    <a href="{{ route('dashboard') }}">Dashboard</a>
                    <span class="separator">/</span>
                    <span class="current">Trainee Management</span>
                </div>
            </div>
            <div class="col-auto">
                <a href="{{ route('traineesregistrationpage') }}" class="btn btn-primary">
                    <i class="fas fa-plus fa-sm mr-1"></i> Register New Trainee
                </a>
                <button class="btn btn-info ml-2" data-toggle="modal" data-target="#filterModal">
                    <i class="fas fa-filter fa-sm mr-1"></i> Filter Trainees
                </button>
            </div>
        </div>
    </div>
    
    <!-- Alert Messages -->
    @if(session('success'))
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            {{ session('success') }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    @endif

    @if(session('error'))
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            {{ session('error') }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    @endif

    @if(isset($error))
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            {{ $error }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    @endif

    <!-- Content Row - Statistics -->
    <div class="row">
        <!-- Total Trainees Card -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Total Trainees</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ $totalTrainees ?? 0 }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-users fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Centers Card -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-success shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Centers</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ isset($traineesByCenter) ? $traineesByCenter->count() : 0 }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-building fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Condition Types Card -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-info shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">Condition Types</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ $conditionTypes ?? 0 }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-clipboard-list fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- New Trainees Card -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-warning shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">New Trainees (30 days)</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ $newTraineesCount ?? 0 }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-user-plus fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Search Box -->
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">Search Trainees</h6>
        </div>
        <div class="card-body">
            <form action="{{ route('traineeshome') }}" method="GET" class="form-inline">
                <div class="form-group mb-2 flex-grow-1">
                    <input type="text" name="search" class="form-control w-100" placeholder="Search by name or email..." value="{{ request('search') }}">
                </div>
                <button type="submit" class="btn btn-primary mb-2 ml-2">Search</button>
                @if(request()->has('search') || request()->has('centre') || request()->has('condition'))
                    <a href="{{ route('traineeshome') }}" class="btn btn-secondary mb-2 ml-2">Clear</a>
                @endif
            </form>
        </div>
    </div>

    <!-- Active Filters Display -->
    @if(request()->has('search') || request()->has('centre') || request()->has('condition'))
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">Active Filters</h6>
            </div>
            <div class="card-body">
                <div class="d-flex flex-wrap">
                    @if(request('search'))
                        <div class="badge badge-info m-1 p-2">
                            Search: {{ request('search') }}
                            <a href="{{ route('traineeshome', array_merge(request()->except('search'), [])) }}" class="text-white ml-1">
                                <i class="fas fa-times"></i>
                            </a>
                        </div>
                    @endif
                    
                    @if(request('centre'))
                        <div class="badge badge-primary m-1 p-2">
                            Center: {{ request('centre') }}
                            <a href="{{ route('traineeshome', array_merge(request()->except('centre'), [])) }}" class="text-white ml-1">
                                <i class="fas fa-times"></i>
                            </a>
                        </div>
                    @endif
                    
                    @if(request('condition'))
                        <div class="badge badge-success m-1 p-2">
                            Condition: {{ request('condition') }}
                            <a href="{{ route('traineeshome', array_merge(request()->except('condition'), [])) }}" class="text-white ml-1">
                                <i class="fas fa-times"></i>
                            </a>
                        </div>
                    @endif
                    
                    <a href="{{ route('traineeshome') }}" class="btn btn-sm btn-outline-secondary ml-auto">
                        Clear All Filters
                    </a>
                </div>
            </div>
        </div>
    @endif

    <!-- Trainees by Center -->
    @if(isset($traineesByCenter) && $traineesByCenter->count() > 0)
        @foreach($traineesByCenter as $centreName => $centerTrainees)
            <div class="card shadow mb-4">
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                    <h6 class="m-0 font-weight-bold text-primary">{{ $centreName ?? 'Unassigned' }} ({{ $centerTrainees->count() }})</h6>
                    <div class="dropdown no-arrow">
                        <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink-{{ Str::slug($centreName) }}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in" aria-labelledby="dropdownMenuLink-{{ Str::slug($centreName) }}">
                            <div class="dropdown-header">Center Actions:</div>
                            <a class="dropdown-item" href="{{ route('traineeshome', ['centre' => $centreName]) }}">Filter by Center</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="{{ route('traineesregistrationpage', ['centre' => $centreName]) }}">Add Trainee to Center</a>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        @foreach($centerTrainees as $trainee)
                            <div class="col-xl-3 col-md-4 col-sm-6 mb-4">
                                <div class="card h-100">
                                    <div class="card-header bg-light py-2 text-center">
                                        <div class="avatar-container mb-2">
                                            <img src="{{ asset($trainee->trainee_avatar ?? 'images/default-avatar.jpg') }}" class="rounded-circle avatar-img" alt="Trainee Avatar">
                                        </div>
                                        <h5 class="card-title mb-0">{{ $trainee->trainee_first_name }} {{ $trainee->trainee_last_name }}</h5>
                                    </div>
                                    <div class="card-body pt-2">
                                        <p class="mb-1"><strong>Email:</strong> {{ $trainee->trainee_email }}</p>
                                        <p class="mb-1"><strong>Condition:</strong> <span class="badge badge-{{ $trainee->getConditionBadgeClassAttribute() ?? 'secondary' }}">{{ $trainee->trainee_condition }}</span></p>
                                        <p class="mb-1"><strong>Age:</strong> {{ $trainee->getAgeAttribute() ?? 'N/A' }} years</p>
                                        <p class="mb-1"><small class="text-muted">Registered: {{ $trainee->created_at ? $trainee->created_at->format('M d, Y') : 'Unknown' }}</small></p>
                                    </div>
                                    <div class="card-footer bg-transparent border-top-0 text-center">
                                        <a href="{{ route('traineeprofile', ['id' => $trainee->id]) }}" class="btn btn-primary btn-sm">
                                            <i class="fas fa-user mr-1"></i>View Profile
                                        </a>
                                    </div>
                                </div>
                            </div>
                        @endforeach
                    </div>
                </div>
            </div>
        @endforeach
    @else
        <div class="card shadow mb-4">
            <div class="card-body">
                <div class="text-center py-4 empty-state">
                    <img src="{{ asset('images/empty-state.svg') }}" alt="No trainees found" class="img-fluid mb-3">
                    <h5>No trainees found</h5>
                    <p class="text-muted">There are no trainees registered in the system yet, or none match your search criteria.</p>
                    <a href="{{ route('traineesregistrationpage') }}" class="btn btn-primary mt-2">
                        <i class="fas fa-plus mr-1"></i>Register New Trainee
                    </a>
                </div>
            </div>
        </div>
    @endif
</div>

<!-- Filter Modal -->
<div class="modal fade" id="filterModal" tabindex="-1" role="dialog" aria-labelledby="filterModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <form action="{{ route('traineeshome') }}" method="GET">
                <div class="modal-header">
                    <h5 class="modal-title" id="filterModalLabel">Filter Trainees</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Center Filter -->
                    <div class="form-group">
                        <label for="centre">Center</label>
                        <select name="centre" id="centre" class="form-control">
                            <option value="">All Centers</option>
                            @foreach($centres ?? [] as $centre)
                                <option value="{{ $centre->centre_name }}" {{ request('centre') == $centre->centre_name ? 'selected' : '' }}>
                                    {{ $centre->centre_name }}
                                </option>
                            @endforeach
                        </select>
                    </div>
                    
                    <!-- Condition Filter -->
                    <div class="form-group">
                        <label for="condition">Condition</label>
                        <select name="condition" id="condition" class="form-control">
                            <option value="">All Conditions</option>
                            @foreach($conditions ?? [] as $condition)
                                <option value="{{ $condition }}" {{ request('condition') == $condition ? 'selected' : '' }}>
                                    {{ $condition }}
                                </option>
                            @endforeach
                        </select>
                    </div>
                    
                    <!-- Search by name/email -->
                    <div class="form-group">
                        <label for="search">Search</label>
                        <input type="text" name="search" id="search" class="form-control" 
                               placeholder="Search by name or email..." 
                               value="{{ request('search') }}">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Apply Filters</button>
                    @if(request()->has('search') || request()->has('centre') || request()->has('condition'))
                        <a href="{{ route('traineeshome') }}" class="btn btn-outline-secondary">Clear Filters</a>
                    @endif
                </div>
            </form>
        </div>
    </div>
</div>
@endsection

@section('scripts')
<script>
    $(document).ready(function() {
        // Hide alerts after 5 seconds
        setTimeout(function() {
            $('.alert').fadeOut('slow');
        }, 5000);
        
        // Initialize tooltips
        $('[data-toggle="tooltip"]').tooltip();
        
        // Enable search on enter press
        $('#search').keypress(function(e) {
            if (e.which == 13) {
                $(this).closest('form').submit();
                return false;
            }
        });
    });
</script>
@endsection
```

traineesmanagement.blade
views/trainees

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trainee Management - CREAMS</title>
    
    <!-- Favicon -->
    <link rel="shortcut icon" href="{{ asset('images/logo/favicon.png') }}" type="image/x-icon">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap4.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ asset('css/dashboardstyle.css') }}">
    <style>
        /* Custom styles for trainee management */
        .badge-condition {
            font-size: 85%;
            font-weight: 500;
            padding: 5px 10px;
            border-radius: 15px;
        }
        
        .badge-cerebral-palsy {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .badge-autism {
            background-color: #d1ecf1;
            color: #0c5460;
        }
        
        .badge-down-syndrome {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .badge-hearing {
            background-color: #d4edda;
            color: #155724;
        }
        
        .badge-visual {
            background-color: #e2e3e5;
            color: #383d41;
        }
        
        .badge-intellectual {
            background-color: #cce5ff;
            color: #004085;
        }
        
        .trainee-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .trainee-filter-box {
            background: #fff;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 25px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
        }
        
        .trainee-card {
            background: #fff;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }
        
        .trainee-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .trainee-card-header {
            padding: 15px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
        }
        
        .trainee-card-avatar {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            overflow: hidden;
            margin-right: 15px;
        }
        
        .trainee-card-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .trainee-card-info h4 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .trainee-card-body {
            padding: 15px;
        }
        
        .trainee-card-detail {
            margin-bottom: 10px;
            display: flex;
        }
        
        .trainee-card-detail-label {
            width: 140px;
            color: #6c757d;
            font-weight: 500;
        }
        
        .trainee-card-detail-value {
            flex: 1;
        }
        
        .trainee-card-footer {
            padding: 15px;
            border-top: 1px solid rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <img src="{{ asset('images/favicon.png') }}" alt="CREAMS Logo">
                <span class="logo-text">CREAMS</span>
            </div>
            <div class="toggle-btn">
                <i class="fas fa-chevron-left"></i>
            </div>
        </div>
        
        <div class="admin-profile">
            <div class="admin-avatar">
                @if(isset($user['avatar']) && $user['avatar'])
                    <img src="{{ asset('storage/avatars/' . $user['avatar']) }}" alt="User Avatar">
                @else
                    <img src="{{ asset('images/admin-avatar.jpg') }}" alt="User Avatar">
                @endif
            </div>
            <div class="admin-info">
                <div class="admin-name">{{ $user['name'] ?? 'User' }}</div>
                <div class="admin-role">{{ ucfirst($user['role'] ?? 'guest') }}</div>
            </div>
        </div>
        
        <ul class="nav-menu">
            <li class="{{ request()->routeIs('dashboard') ? 'active' : '' }}">
                <a href="{{ route('dashboard') }}">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                    <div class="tooltip-sidebar">Dashboard</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('traineesmanagement') ? 'active' : '' }}">
                <a href="{{ route('traineesmanagement') }}">
                    <i class="fas fa-user-graduate"></i>
                    <span>Trainees</span>
                    <div class="tooltip-sidebar">Trainees</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('traineesregistrationpage') ? '' : '' }}">
                <a href="{{ route('traineesregistrationpage') }}">
                    <i class="fas fa-user-plus"></i>
                    <span>Register Trainee</span>
                    <div class="tooltip-sidebar">Register Trainee</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('teachershome') ? '' : '' }}">
                <a href="{{ route('teachershome') }}">
                    <i class="fas fa-chalkboard-teacher"></i>
                    <span>Staff</span>
                    <div class="tooltip-sidebar">Staff</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('schedulehomepage') ? '' : '' }}">
                <a href="{{ route('schedulehomepage') }}">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Schedule</span>
                    <div class="tooltip-sidebar">Schedule</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('assetmanagementpage') ? '' : '' }}">
                <a href="{{ route('assetmanagementpage') }}">
                    <i class="fas fa-box"></i>
                    <span>Asset Management</span>
                    <div class="tooltip-sidebar">Asset Management</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('aboutus') ? '' : '' }}">
                <a href="{{ route('aboutus') }}">
                    <i class="fas fa-info-circle"></i>
                    <span>About Us</span>
                    <div class="tooltip-sidebar">About Us</div>
                </a>
            </li>
        </ul>
        
        <form method="POST" action="{{ route('logout') }}" class="logout-container">
            @csrf
            <button type="submit" class="logout-btn">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </button>
        </form>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <div class="page-info">
                    <h1 class="page-title">Trainees</h1>
                    <div class="breadcrumb">
                        <a href="{{ route('dashboard') }}">Dashboard</a>
                        <span class="separator">/</span>
                        <span class="current">Trainees</span>
                    </div>
                </div>
                
                <div class="header-actions">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="globalSearch" placeholder="Search trainees...">
                    </div>
                    
                    <div class="notification-bell">
                        <i class="fas fa-bell"></i>
                        @if(isset($user['notifications']) && count($user['notifications']) > 0)
                            <span class="notification-count">{{ count($user['notifications']) }}</span>
                        @elseif(isset($notificationCount) && $notificationCount > 0)
                            <span class="notification-count">{{ $notificationCount }}</span>
                        @endif
                    </div>
                    
                    <div class="admin-dropdown">
                        <div class="admin-dropdown-toggle">
                            @if(isset($user['avatar']) && $user['avatar'])
                                <img src="{{ asset('storage/avatars/' . $user['avatar']) }}" alt="User">
                            @else
                                <img src="{{ asset('images/admin-avatar.jpg') }}" alt="User">
                            @endif
                            <span>{{ $user['name'] ?? 'User' }}</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="admin-dropdown-menu">
                            <a href="{{ route('profile') }}">
                                <i class="fas fa-user"></i> My Profile
                            </a>
                            @if(isset($user['role']) && $user['role'] == 'admin')
                                <a href="{{ route('admin.settings') }}">
                                    <i class="fas fa-cog"></i> Settings
                                </a>
                            @endif
                            <form method="POST" action="{{ route('logout') }}">
                                @csrf
                                <button type="submit">
                                    <i class="fas fa-sign-out-alt"></i> Logout
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="page-actions">
                <a href="{{ route('traineesregistrationpage') }}" class="action-btn primary">
                    <i class="fas fa-plus"></i> Add New Trainee
                </a>
                <button class="action-btn" data-toggle="modal" data-target="#filterModal">
                    <i class="fas fa-filter"></i> Filter
                </button>
                <button class="action-btn" id="viewSwitchBtn">
                    <i class="fas fa-th-large"></i> <span id="viewSwitchText">Card View</span>
                </button>
                <button class="action-btn" id="exportBtn">
                    <i class="fas fa-file-export"></i> Export
                </button>
            </div>
        </div>
        
        <!-- Content Section -->
        <div class="content-section">
            <!-- Alert Messages -->
            @if(session('success'))
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    <i class="fas fa-check-circle mr-2"></i> {{ session('success') }}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            @endif
            
            @if(session('error'))
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    <i class="fas fa-exclamation-circle mr-2"></i> {{ session('error') }}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            @endif
            
            <!-- Stats Cards -->
            <div class="dashboard-cards">
                <div class="card">
                    <div class="card-body">
                        <div class="stats-card">
                            <div class="stats-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stats-details">
                                <div class="stats-value">{{ count($trainees) }}</div>
                                <div class="stats-label">Total Trainees</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <div class="stats-card">
                            <div class="stats-icon">
                                <i class="fas fa-building"></i>
                            </div>
                            <div class="stats-details">
                                <div class="stats-value">{{ count($trainees->unique('centre_name')) }}</div>
                                <div class="stats-label">Centres</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <div class="stats-card">
                            <div class="stats-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <div class="stats-details">
                                <div class="stats-value">{{ count($trainees->unique('trainee_condition')) }}</div>
                                <div class="stats-label">Condition Types</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <div class="stats-card">
                            <div class="stats-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <div class="stats-details">
                                <div class="stats-value">
                                    {{ $trainees->where('created_at', '>=', \Carbon\Carbon::now()->subDays(30))->count() }}
                                </div>
                                <div class="stats-label">New in 30 Days</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Table View (Default) -->
            <div class="card" id="tableView">
                <div class="card-header">
                    <h5 class="card-title">Trainee List</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover" id="traineesTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Photo</th>
                                    <th>Name</th>
                                    <th>Age</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Centre</th>
                                    <th>Condition</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach($trainees as $trainee)
                                    <tr>
                                        <td>{{ $trainee->id }}</td>
                                        <td>
                                            <img src="{{ asset($trainee->trainee_avatar ?? 'images/default-avatar.jpg') }}" 
                                                 alt="{{ $trainee->trainee_first_name }}" 
                                                 class="trainee-avatar">
                                        </td>
                                        <td>{{ $trainee->trainee_first_name }} {{ $trainee->trainee_last_name }}</td>
                                        <td>
                                            @if($trainee->trainee_date_of_birth)
                                                {{ \Carbon\Carbon::parse($trainee->trainee_date_of_birth)->age }}
                                            @else
                                                N/A
                                            @endif
                                        </td>
                                        <td>{{ $trainee->trainee_email }}</td>
                                        <td>{{ $trainee->trainee_phone_number }}</td>
                                        <td>{{ $trainee->centre_name }}</td>
                                        <td>
                                            @php
                                                $conditionClass = '';
                                                if (strpos(strtolower($trainee->trainee_condition), 'cerebral') !== false) {
                                                    $conditionClass = 'badge-cerebral-palsy';
                                                } elseif (strpos(strtolower($trainee->trainee_condition), 'autism') !== false) {
                                                    $conditionClass = 'badge-autism';
                                                } elseif (strpos(strtolower($trainee->trainee_condition), 'down') !== false) {
                                                    $conditionClass = 'badge-down-syndrome';
                                                } elseif (strpos(strtolower($trainee->trainee_condition), 'hear') !== false) {
                                                    $conditionClass = 'badge-hearing';
                                                } elseif (strpos(strtolower($trainee->trainee_condition), 'visual') !== false) {
                                                    $conditionClass = 'badge-visual';
                                                } elseif (strpos(strtolower($trainee->trainee_condition), 'intellectual') !== false) {
                                                    $conditionClass = 'badge-intellectual';
                                                }
                                            @endphp
                                            <span class="badge badge-condition {{ $conditionClass }}">
                                                {{ $trainee->trainee_condition }}
                                            </span>
                                        </td>
                                        <td>
                                            <div class="dropdown">
                                                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown">
                                                    Actions
                                                </button>
                                                <div class="dropdown-menu">
                                                    <a class="dropdown-item" href="{{ route('traineeprofile', ['id' => $trainee->id]) }}">
                                                        <i class="fas fa-eye text-primary"></i> View
                                                    </a>
                                                    <a class="dropdown-item" href="{{ route('updatetraineeprofile', ['id' => $trainee->id]) }}">
                                                        <i class="fas fa-edit text-info"></i> Edit
                                                    </a>
                                                    <a class="dropdown-item delete-trainee" href="#" data-id="{{ $trainee->id }}">
                                                        <i class="fas fa-trash-alt text-danger"></i> Delete
                                                    </a>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                @endforeach
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Card View (Hidden by default) -->
            <div class="row mt-4" id="cardView" style="display: none;">
                @foreach($trainees as $trainee)
                    <div class="col-md-6 col-lg-4 trainee-card-container">
                        <div class="trainee-card">
                            <div class="trainee-card-header">
                                <div class="trainee-card-avatar">
                                    <img src="{{ asset($trainee->trainee_avatar ?? 'images/default-avatar.jpg') }}" 
                                         alt="{{ $trainee->trainee_first_name }}">
                                </div>
                                <div class="trainee-card-info">
                                    <h4>{{ $trainee->trainee_first_name }} {{ $trainee->trainee_last_name }}</h4>
                                    <span class="badge badge-condition 
                                        @php
                                            $conditionClass = '';
                                            if (strpos(strtolower($trainee->trainee_condition), 'cerebral') !== false) {
                                                echo 'badge-cerebral-palsy';
                                            } elseif (strpos(strtolower($trainee->trainee_condition), 'autism') !== false) {
                                                echo 'badge-autism';
                                            } elseif (strpos(strtolower($trainee->trainee_condition), 'down') !== false) {
                                                echo 'badge-down-syndrome';
                                            } elseif (strpos(strtolower($trainee->trainee_condition), 'hear') !== false) {
                                                echo 'badge-hearing';
                                            } elseif (strpos(strtolower($trainee->trainee_condition), 'visual') !== false) {
                                                echo 'badge-visual';
                                            } elseif (strpos(strtolower($trainee->trainee_condition), 'intellectual') !== false) {
                                                echo 'badge-intellectual';
                                            }
                                        @endphp
                                    ">
                                        {{ $trainee->trainee_condition }}
                                    </span>
                                </div>
                            </div>
                            <div class="trainee-card-body">
                                <div class="trainee-card-detail">
                                    <div class="trainee-card-detail-label">ID:</div>
                                    <div class="trainee-card-detail-value">{{ $trainee->id }}</div>
                                </div>
                                <div class="trainee-card-detail">
                                    <div class="trainee-card-detail-label">Email:</div>
                                    <div class="trainee-card-detail-value">{{ $trainee->trainee_email }}</div>
                                </div>
                                <div class="trainee-card-detail">
                                    <div class="trainee-card-detail-label">Phone:</div>
                                    <div class="trainee-card-detail-value">{{ $trainee->trainee_phone_number }}</div>
                                </div>
                                <div class="trainee-card-detail">
                                    <div class="trainee-card-detail-label">Age:</div>
                                    <div class="trainee-card-detail-value">
                                        @if($trainee->trainee_date_of_birth)
                                            {{ \Carbon\Carbon::parse($trainee->trainee_date_of_birth)->age }} years
                                        @else
                                            N/A
                                        @endif
                                    </div>
                                </div>
                                <div class="trainee-card-detail">
                                    <div class="trainee-card-detail-label">Centre:</div>
                                    <div class="trainee-card-detail-value">{{ $trainee->centre_name }}</div>
                                </div>
                            </div>
                            <div class="trainee-card-footer">
                                <a href="{{ route('traineeprofile', ['id' => $trainee->id]) }}" class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-eye"></i> View
                                </a>
                                <a href="{{ route('updatetraineeprofile', ['id' => $trainee->id]) }}" class="btn btn-sm btn-outline-info">
                                    <i class="fas fa-edit"></i> Edit
                                </a>
                                <button class="btn btn-sm btn-outline-danger delete-trainee" data-id="{{ $trainee->id }}">
                                    <i class="fas fa-trash-alt"></i> Delete
                                </button>
                            </div>
                        </div>
                    </div>
                @endforeach
            </div>
        </div>
        
        <!-- Footer -->
        <div class="dashboard-footer">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="{{ asset('images/favicon.png') }}" alt="CREAMS Logo">
                    <span>CREAMS</span>
                </div>
                <div class="footer-text">
                    Community-based REhAbilitation Management System &copy; {{ date('Y') }} IIUM
                </div>
                <div class="footer-links">
                    <a href="#" class="footer-link">Privacy Policy</a>
                    <a href="#" class="footer-link">Terms of Service</a>
                    <a href="#" class="footer-link">Help Centre</a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Filter Modal -->
    <div class="modal fade" id="filterModal" tabindex="-1" role="dialog" aria-labelledby="filterModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="filterModalLabel">Filter Trainees</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="filterForm">
                        <div class="form-group">
                            <label for="filterCentre">Centre</label>
                            <select class="form-control" id="filterCentre">
                                <option value="">All Centres</option>
                                @php
                                    $centres = $trainees->pluck('centre_name')->unique()->sort();
                                @endphp
                                @foreach($centres as $centre)
                                    <option value="{{ $centre }}">{{ $centre }}</option>
                                @endforeach
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="filterCondition">Condition</label>
                            <select class="form-control" id="filterCondition">
                                <option value="">All Conditions</option>
                                @php
                                    $conditions = $trainees->pluck('trainee_condition')->unique()->sort();
                                @endphp
                                @foreach($conditions as $condition)
                                    <option value="{{ $condition }}">{{ $condition }}</option>
                                @endforeach
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="filterAgeRange">Age Range</label>
                            <div class="row">
                                <div class="col">
                                    <input type="number" class="form-control" id="filterAgeMin" placeholder="Min Age">
                                </div>
                                <div class="col">
                                    <input type="number" class="form-control" id="filterAgeMax" placeholder="Max Age">
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="applyFilters">Apply Filters</button>
                    <button type="button" class="btn btn-outline-secondary" id="resetFilters">Reset</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Delete Confirmation Modal -->
    <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteModalLabel">Confirm Delete</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete this trainee? This action cannot be undone.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <form id="deleteForm" method="POST">
                        @csrf
                        @method('DELETE')
                        <button type="submit" class="btn btn-danger">Delete</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Dependencies -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.16.9/xlsx.full.min.js"></script>
    
    <script>
        $(document).ready(function() {
            // Initialize DataTable
            var table = $('#traineesTable').DataTable({
                responsive: true,
                lengthMenu: [[10, 25, 50, -1], [10, 25, 50, "All"]],
                order: [[0, 'desc']], // Sort by ID descending by default
                language: {
                    search: "_INPUT_",
                    searchPlaceholder: "Search trainees...",
                    lengthMenu: "Show _MENU_ trainees per page",
                    info: "Showing _START_ to _END_ of _TOTAL_ trainees",
                    infoEmpty: "Showing 0 to 0 of 0 trainees",
                    infoFiltered: "(filtered from _MAX_ total trainees)"
                }
            });
            
            // Sidebar toggle
            $('.toggle-btn').click(function() {
                $('.sidebar').toggleClass('collapsed');
                $('.main-content').toggleClass('expanded');
            });
            
            // Admin dropdown
            $('.admin-dropdown-toggle').click(function(e) {
                e.stopPropagation();
                $('.admin-dropdown-menu').toggleClass('show');
            });
            
            // Close dropdown when clicking outside
            $(document).click(function(event) {
                if (!$(event.target).closest('.admin-dropdown').length) {
                    $('.admin-dropdown-menu').removeClass('show');
                }
            });
            
            // Global search functionality
            $('#globalSearch').on('keyup', function() {
                table.search(this.value).draw();
            });
            
            // Toggle view (Table/Card)
            $('#viewSwitchBtn').click(function() {
                if ($('#tableView').is(':visible')) {
                    $('#tableView').hide();
                    $('#cardView').show();
                    $('#viewSwitchText').text('Table View');
                    $(this).find('i').removeClass('fa-th-large').addClass('fa-list');
                } else {
                    $('#tableView').show();
                    $('#cardView').hide();
                    $('#viewSwitchText').text('Card View');
                    $(this).find('i').removeClass('fa-list').addClass('fa-th-large');
                }
            });
            
            // Filter functionality
            $('#applyFilters').click(function() {
                var centre = $('#filterCentre').val();
                var condition = $('#filterCondition').val();
                var ageMin = $('#filterAgeMin').val();
                var ageMax = $('#filterAgeMax').val();
                
                // Reset all filters first
                table.columns().search('').draw();
                
                // Apply Centre filter
                if (centre) {
                    table.column(6).search(centre).draw();
                }
                
                // Apply Condition filter
                if (condition) {
                    table.column(7).search(condition).draw();
                }
                
                // Apply Age filter (custom filtering function)
                if (ageMin || ageMax) {
                    $.fn.dataTable.ext.search.push(
                        function(settings, data, dataIndex) {
                            var age = parseInt(data[3]) || 0;
                            var min = parseInt(ageMin) || 0;
                            var max = parseInt(ageMax) || 100;
                            
                            if ((isNaN(min) && isNaN(max)) ||
                                (isNaN(min) && age <= max) ||
                                (min <= age && isNaN(max)) ||
                                (min <= age && age <= max)) {
                                return true;
                            }
                            return false;
                        }
                    );
                    table.draw();
                    
                    // Clean up custom filter after use
                    $.fn.dataTable.ext.search.pop();
                }
                
                // Also filter the card view
                filterCardView(centre, condition, ageMin, ageMax);
                
                $('#filterModal').modal('hide');
            });
            
            // Reset filters
            $('#resetFilters').click(function() {
                $('#filterForm')[0].reset();
                table.search('').columns().search('').draw();
                $('.trainee-card-container').show();
                $('#filterModal').modal('hide');
            });
            
            // Filter Card View
            function filterCardView(centre, condition, ageMin, ageMax) {
                $('.trainee-card-container').each(function() {
                    var $this = $(this);
                    var cardCentre = $this.find('.trainee-card-detail:contains("Centre:")').find('.trainee-card-detail-value').text();
                    var cardCondition = $this.find('.badge-condition').text().trim();
                    var ageText = $this.find('.trainee-card-detail:contains("Age:")').find('.trainee-card-detail-value').text();
                    var cardAge = parseInt(ageText) || 0;
                    
                    var centreMatch = !centre || cardCentre.includes(centre);
                    var conditionMatch = !condition || cardCondition.includes(condition);
                    var ageMatch = (!ageMin && !ageMax) || 
                                  ((!ageMin || cardAge >= parseInt(ageMin)) && 
                                   (!ageMax || cardAge <= parseInt(ageMax)));
                    
                    if (centreMatch && conditionMatch && ageMatch) {
                        $this.show();
                    } else {
                        $this.hide();
                    }
                });
            }
            
            // Delete trainee functionality
            $('.delete-trainee').click(function(e) {
                e.preventDefault();
                var traineeId = $(this).data('id');
                $('#deleteForm').attr('action', '/trainees/delete/' + traineeId);
                $('#deleteModal').modal('show');
            });
            
            // Export functionality
            $('#exportBtn').click(function() {
                Swal.fire({
                    title: 'Export Trainees',
                    text: 'Choose export format:',
                    icon: 'question',
                    showCancelButton: true,
                    confirmButtonText: 'Excel',
                    cancelButtonText: 'CSV',
                    showCloseButton: true,
                    showDenyButton: true,
                    denyButtonText: 'PDF'
                }).then((result) => {
                    if (result.isConfirmed) {
                        exportToExcel();
                    } else if (result.dismiss === Swal.DismissReason.cancel) {
                        exportToCSV();
                    } else if (result.isDenied) {
                        Swal.fire('PDF Export', 'This feature is coming soon!', 'info');
                    }
                });
            });
            
            // Export to Excel
            function exportToExcel() {
                var wb = XLSX.utils.table_to_book(document.getElementById('traineesTable'), {
                    sheet: "Trainees"
                });
                var wbout = XLSX.write(wb, {
                    bookType: 'xlsx',
                    type: 'binary'
                });
                
                function s2ab(s) {
                    var buf = new ArrayBuffer(s.length);
                    var view = new Uint8Array(buf);
                    for (var i=0; i<s.length; i++) view[i] = s.charCodeAt(i) & 0xFF;
                    return buf;
                }
                
                saveAs(new Blob([s2ab(wbout)], {type:"application/octet-stream"}), "trainees_" + new Date().toISOString().slice(0,10) + ".xlsx");
                
                Swal.fire({
                    title: 'Success!',
                    text: 'Trainees exported to Excel successfully',
                    icon: 'success',
                    confirmButtonText: 'OK'
                });
            }
            
            // Export to CSV
            function exportToCSV() {
                var wb = XLSX.utils.table_to_book(document.getElementById('traineesTable'), {
                    sheet: "Trainees"
                });
                var wbout = XLSX.utils.sheet_to_csv(wb.Sheets["Trainees"]);
                
                var blob = new Blob([wbout], {type: 'text/csv;charset=utf-8'});
                saveAs(blob, "trainees_" + new Date().toISOString().slice(0,10) + ".csv");
                
                Swal.fire({
                    title: 'Success!',
                    text: 'Trainees exported to CSV successfully',
                    icon: 'success',
                    confirmButtonText: 'OK'
                });
            }
            
            // Auto-hide alert messages after 5 seconds
            setTimeout(function() {
                $('.alert').alert('close');
            }, 5000);
        });
    </script>

traineesmanagement.blade
views/trainees

@extends('layouts.app')

@section('title', $trainee->trainee_first_name . ' ' . $trainee->trainee_last_name . ' - Profile')

@section('content')
<div class="container-fluid">
    <!-- Page Heading -->
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">
            <i class="fas fa-user-circle mr-2"></i>{{ $trainee->trainee_first_name }} {{ $trainee->trainee_last_name }}
        </h1>
        <div>
            <a href="{{ route('traineeshome') }}" class="btn btn-secondary btn-sm shadow-sm mr-2">
                <i class="fas fa-arrow-left fa-sm text-white-50 mr-1"></i>Back to Trainees
            </a>
            <div class="btn-group">
                <a href="{{ route('traineeprofile.edit', ['id' => $trainee->id]) }}" class="btn btn-primary btn-sm shadow-sm">
                    <i class="fas fa-edit fa-sm text-white-50 mr-1"></i>Edit Profile
                </a>
                <button type="button" class="btn btn-primary btn-sm dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <span class="sr-only">Toggle Dropdown</span>
                </button>
                <div class="dropdown-menu dropdown-menu-right">
                    <a class="dropdown-item" href="#" data-toggle="modal" data-target="#addActivityModal">
                        <i class="fas fa-plus-circle fa-sm mr-1"></i> Add Activity
                    </a>
                    <a class="dropdown-item" href="#" data-toggle="modal" data-target="#recordAttendanceModal">
                        <i class="fas fa-calendar-check fa-sm mr-1"></i> Record Attendance
                    </a>
                    <a class="dropdown-item" href="#" data-toggle="modal" data-target="#updateProgressModal">
                        <i class="fas fa-chart-line fa-sm mr-1"></i> Update Progress
                    </a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="{{ route('traineeprofile.download', ['id' => $trainee->id]) }}">
                        <i class="fas fa-file-pdf fa-sm mr-1"></i> Download Profile
                    </a>
                    <a class="dropdown-item text-danger" href="#" data-toggle="modal" data-target="#deleteTraineeModal">
                        <i class="fas fa-trash-alt fa-sm mr-1"></i> Delete Trainee
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Alert Messages -->
    @if(session('success'))
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            {{ session('success') }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    @endif

    @if(session('error'))
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            {{ session('error') }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    @endif

    @if(session('info'))
        <div class="alert alert-info alert-dismissible fade show" role="alert">
            {{ session('info') }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    @endif

    <!-- Content Row - Statistics -->
    <div class="row">
        <!-- Age Card -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Age</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ $age }} years</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-birthday-cake fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Enrollment Card -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-success shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Enrolled</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ $enrollmentDuration }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-calendar-alt fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Total Activities Card -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-info shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">Total Activities</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ $totalActivities }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-tasks fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Attendance Rate Card -->
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-warning shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">Attendance Rate</div>
                            <div class="row no-gutters align-items-center">
                                <div class="col-auto">
                                    <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800">{{ $attendanceRate }}%</div>
                                </div>
                                <div class="col">
                                    <div class="progress progress-sm mr-2">
                                        <div class="progress-bar 
                                            @if($attendanceRate >= 90) bg-success 
                                            @elseif($attendanceRate >= 75) bg-primary 
                                            @elseif($attendanceRate >= 60) bg-warning 
                                            @else bg-danger 
                                            @endif" 
                                            role="progressbar" style="width: {{ $attendanceRate }}%" 
                                            aria-valuenow="{{ $attendanceRate }}" aria-valuemin="0" aria-valuemax="100">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-clipboard-check fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Content -->
    <div class="row">
        <!-- Left Column - Basic Information -->
        <div class="col-xl-4">
            <!-- Profile Card -->
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Basic Information</h6>
                </div>
                <div class="card-body">
                    <div class="text-center mb-4">
                        <img class="img-profile rounded-circle" src="{{ $trainee->getAvatarUrlAttribute() }}" width="150" height="150">
                        <h4 class="mt-3">{{ $trainee->trainee_first_name }} {{ $trainee->trainee_last_name }}</h4>
                        <span class="badge badge-{{ $trainee->getConditionBadgeClassAttribute() }} font-weight-bold px-3 py-2">
                            {{ $trainee->trainee_condition }}
                        </span>
                    </div>
                    
                    <div class="table-responsive">
                        <table class="table table-borderless">
                            <tbody>
                                <tr>
                                    <th width="35%"><i class="fas fa-envelope mr-1"></i> Email</th>
                                    <td>{{ $trainee->trainee_email }}</td>
                                </tr>
                                <tr>
                                    <th><i class="fas fa-phone mr-1"></i> Phone</th>
                                    <td>{{ $trainee->trainee_phone_number ?? 'Not provided' }}</td>
                                </tr>
                                <tr>
                                    <th><i class="fas fa-calendar mr-1"></i> Date of Birth</th>
                                    <td>{{ $trainee->trainee_date_of_birth->format('M d, Y') }} ({{ $age }} years)</td>
                                </tr>
                                <tr>
                                    <th><i class="fas fa-building mr-1"></i> Centre</th>
                                    <td>{{ $trainee->centre_name }}</td>
                                </tr>
                                <tr>
                                    <th><i class="fas fa-clock mr-1"></i> Enrolled</th>
                                    <td>{{ $trainee->created_at->format('M d, Y') }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Guardian Information Card -->
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Guardian Information</h6>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-borderless">
                            <tbody>
                                <tr>
                                    <th width="35%"><i class="fas fa-user mr-1"></i> Name</th>
                                    <td>{{ $guardian['name'] }}</td>
                                </tr>
                                <tr>
                                    <th><i class="fas fa-users mr-1"></i> Relationship</th>
                                    <td>{{ $guardian['relationship'] }}</td>
                                </tr>
                                <tr>
                                    <th><i class="fas fa-phone mr-1"></i> Phone</th>
                                    <td>{{ $guardian['phone'] }}</td>
                                </tr>
                                <tr>
                                    <th><i class="fas fa-envelope mr-1"></i> Email</th>
                                    <td>{{ $guardian['email'] }}</td>
                                </tr>
                                <tr>
                                    <th><i class="fas fa-home mr-1"></i> Address</th>
                                    <td>{{ $guardian['address'] }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Column - Tabs for detailed data -->
        <div class="col-xl-8">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <ul class="nav nav-tabs card-header-tabs" id="myTab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="attendance-tab" data-toggle="tab" href="#attendance" role="tab" aria-controls="attendance" aria-selected="true">
                                <i class="fas fa-calendar-check mr-1"></i> Attendance
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="activities-tab" data-toggle="tab" href="#activities" role="tab" aria-controls="activities" aria-selected="false">
                                <i class="fas fa-tasks mr-1"></i> Activities
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="progress-tab" data-toggle="tab" href="#progress" role="tab" aria-controls="progress" aria-selected="false">
                                <i class="fas fa-chart-line mr-1"></i> Progress
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="card-body">
                    <div class="tab-content" id="myTabContent">
                        <!-- Attendance Tab -->
                        <div class="tab-pane fade show active" id="attendance" role="tabpanel" aria-labelledby="attendance-tab">
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <h5 class="mb-3">Monthly Attendance Summary</h5>
                                    <div class="progress mb-2" style="height: 25px;">
                                        <div class="progress-bar bg-success" role="progressbar" style="width: {{ ($attendanceDays['present'] / 20) * 100 }}%;" aria-valuenow="{{ $attendanceDays['present'] }}" aria-valuemin="0" aria-valuemax="20">
                                            {{ $attendanceDays['present'] }} Present
                                        </div>
                                    </div>
                                    <div class="progress mb-2" style="height: 25px;">
                                        <div class="progress-bar bg-warning" role="progressbar" style="width: {{ ($attendanceDays['late'] / 20) * 100 }}%;" aria-valuenow="{{ $attendanceDays['late'] }}" aria-valuemin="0" aria-valuemax="20">
                                            {{ $attendanceDays['late'] }} Late
                                        </div>
                                    </div>
                                    <div class="progress mb-2" style="height: 25px;">
                                        <div class="progress-bar bg-danger" role="progressbar" style="width: {{ ($attendanceDays['absent'] / 20) * 100 }}%;" aria-valuenow="{{ $attendanceDays['absent'] }}" aria-valuemin="0" aria-valuemax="20">
                                            {{ $attendanceDays['absent'] }} Absent
                                        </div>
                                    </div>
                                    <div class="progress mb-2" style="height: 25px;">
                                        <div class="progress-bar bg-info" role="progressbar" style="width: {{ ($attendanceDays['excused'] / 20) * 100 }}%;" aria-valuenow="{{ $attendanceDays['excused'] }}" aria-valuemin="0" aria-valuemax="20">
                                            {{ $attendanceDays['excused'] }} Excused
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <h5 class="mb-3">Actions</h5>
                                    <div class="d-flex flex-column">
                                        <button class="btn btn-primary mb-2" data-toggle="modal" data-target="#recordAttendanceModal">
                                            <i class="fas fa-plus-circle mr-1"></i> Record Attendance
                                        </button>
                                        <button class="btn btn-info mb-2" data-toggle="modal" data-target="#viewAttendanceCalendarModal">
                                            <i class="fas fa-calendar-alt mr-1"></i> View Calendar
                                        </button>
                                        <button class="btn btn-secondary" onclick="window.location.href='#'">
                                            <i class="fas fa-file-excel mr-1"></i> Export Attendance
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <h5 class="mb-3">Recent Attendance</h5>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead class="thead-light">
                                        <tr>
                                            <th>Date</th>
                                            <th>Day</th>
                                            <th>Status</th>
                                            <th>Remarks</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach($attendanceHistory as $record)
                                            <tr class="
                                                @if($record['status'] == 'present') table-success 
                                                @elseif($record['status'] == 'late') table-warning 
                                                @elseif($record['status'] == 'absent') table-danger 
                                                @else table-info
                                                @endif">
                                                <td>{{ date('M d, Y', strtotime($record['date'])) }}</td>
                                                <td>{{ $record['day_name'] }}</td>
                                                <td>
                                                    <span class="badge 
                                                        @if($record['status'] == 'present') badge-success 
                                                        @elseif($record['status'] == 'late') badge-warning 
                                                        @elseif($record['status'] == 'absent') badge-danger 
                                                        @else badge-info
                                                        @endif">
                                                        {{ ucfirst($record['status']) }}
                                                    </span>
                                                </td>
                                                <td>{{ $record['remarks'] ?? 'No remarks' }}</td>
                                            </tr>
                                        @endforeach
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Activities Tab -->
                        <div class="tab-pane fade" id="activities" role="tabpanel" aria-labelledby="activities-tab">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h5 class="mb-0">Activities ({{ $totalActivities }})</h5>
                                <button class="btn btn-primary" data-toggle="modal" data-target="#addActivityModal">
                                    <i class="fas fa-plus-circle mr-1"></i> Add Activity
                                </button>
                            </div>
                            
                            @if($trainee->activities->count() > 0)
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead class="thead-light">
                                            <tr>
                                                <th>Date</th>
                                                <th>Name</th>
                                                <th>Type</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach($trainee->activities as $activity)
                                                <tr>
                                                    <td>{{ $activity->activity_date->format('M d, Y') }}</td>
                                                    <td>{{ $activity->activity_name }}</td>
                                                    <td>
                                                        <span class="badge badge-primary">{{ $activity->activity_type }}</span>
                                                    </td>
                                                    <td>
                                                        <button class="btn btn-sm btn-info view-activity" data-activity-id="{{ $activity->id }}">
                                                            <i class="fas fa-eye"></i>
                                                        </button>
                                                    </td>
                                                </tr>
                                            @endforeach
                                        </tbody>
                                    </table>
                                </div>
                            @else
                                <div class="text-center py-5">
                                    <img src="{{ asset('images/no-data.svg') }}" alt="No activities" class="img-fluid mb-3" style="max-width: 200px;">
                                    <h5>No activities recorded yet</h5>
                                    <p class="text-muted">Start by adding the first activity using the button above.</p>
                                </div>
                            @endif
                        </div>
                        
                        <!-- Progress Tab -->
                        <div class="tab-pane fade" id="progress" role="tabpanel" aria-labelledby="progress-tab">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h5 class="mb-0">Progress Updates</h5>
                                <button class="btn btn-primary" data-toggle="modal" data-target="#updateProgressModal">
                                    <i class="fas fa-chart-line mr-1"></i> Update Progress
                                </button>
                            </div>
                            
                            @php
                                $progressActivities = $trainee->activities->where('activity_type', 'Progress');
                            @endphp
                            
                            @if($progressActivities->count() > 0)
                                <div class="accordion" id="progressAccordion">
                                    @foreach($progressActivities as $index => $progress)
                                        <div class="card">
                                            <div class="card-header d-flex justify-content-between align-items-center" id="heading{{ $progress->id }}">
                                                <h2 class="mb-0">
                                                    <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse" data-target="#collapse{{ $progress->id }}" aria-expanded="{{ $index === 0 ? 'true' : 'false' }}" aria-controls="collapse{{ $progress->id }}">
                                                        {{ $progress->activity_date->format('M d, Y') }} - {{ $progress->activity_name }}
                                                    </button>
                                                </h2>
                                                <span class="badge badge-info">{{ $progress->activity_goals }}</span>
                                            </div>
                                            <div id="collapse{{ $progress->id }}" class="collapse {{ $index === 0 ? 'show' : '' }}" aria-labelledby="heading{{ $progress->id }}" data-parent="#progressAccordion">
                                                <div class="card-body">
                                                    <p>{{ $progress->activity_description }}</p>
                                                </div>
                                            </div>
                                        </div>
                                    @endforeach
                                </div>
                            @else
                                <div class="text-center py-5">
                                    <img src="{{ asset('images/no-data.svg') }}" alt="No progress updates" class="img-fluid mb-3" style="max-width: 200px;">
                                    <h5>No progress updates recorded</h5>
                                    <p class="text-muted">Start tracking progress by using the update button above.</p>
                                </div>
                            @endif
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modals -->

<!-- Add Activity Modal -->
<div class="modal fade" id="addActivityModal" tabindex="-1" role="dialog" aria-labelledby="addActivityModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <form action="{{ route('traineeprofile.addActivity', ['id' => $trainee->id]) }}" method="POST">
                @csrf
                <div class="modal-header">
                    <h5 class="modal-title" id="addActivityModalLabel">Add New Activity</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="activity_description">Activity Description <span class="text-danger">*</span></label>
                        <textarea class="form-control" id="activity_description" name="activity_description" rows="3" required></textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="activity_goals">Goals</label>
                                <textarea class="form-control" id="activity_goals" name="activity_goals" rows="2"></textarea>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="activity_outcomes">Outcomes</label>
                                <textarea class="form-control" id="activity_outcomes" name="activity_outcomes" rows="2"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Activity</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Record Attendance Modal -->
<div class="modal fade" id="recordAttendanceModal" tabindex="-1" role="dialog" aria-labelledby="recordAttendanceModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <form action="{{ route('traineeprofile.recordAttendance', ['id' => $trainee->id]) }}" method="POST">
                @csrf
                <div class="modal-header">
                    <h5 class="modal-title" id="recordAttendanceModalLabel">Record Attendance</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="attendance_date">Date <span class="text-danger">*</span></label>
                        <input type="date" class="form-control" id="attendance_date" name="attendance_date" value="{{ date('Y-m-d') }}" required>
                    </div>
                    <div class="form-group">
                        <label for="attendance_status">Status <span class="text-danger">*</span></label>
                        <select class="form-control" id="attendance_status" name="attendance_status" required>
                            <option value="present">Present</option>
                            <option value="late">Late</option>
                            <option value="absent">Absent</option>
                            <option value="excused">Excused</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="attendance_remarks">Remarks</label>
                        <textarea class="form-control" id="attendance_remarks" name="attendance_remarks" rows="2"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Record Attendance</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Update Progress Modal -->
<div class="modal fade" id="updateProgressModal" tabindex="-1" role="dialog" aria-labelledby="updateProgressModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <form action="{{ route('traineeprofile.updateProgress', ['id' => $trainee->id]) }}" method="POST">
                @csrf
                <div class="modal-header">
                    <h5 class="modal-title" id="updateProgressModalLabel">Update Progress</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="progress_date">Date <span class="text-danger">*</span></label>
                                <input type="date" class="form-control" id="progress_date" name="progress_date" value="{{ date('Y-m-d') }}" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="progress_type">Progress Type <span class="text-danger">*</span></label>
                                <select class="form-control" id="progress_type" name="progress_type" required>
                                    <option value="">Select Type</option>
                                    <option value="Physical Development">Physical Development</option>
                                    <option value="Speech Development">Speech Development</option>
                                    <option value="Cognitive Development">Cognitive Development</option>
                                    <option value="Social Skills">Social Skills</option>
                                    <option value="Behavioral">Behavioral</option>
                                    <option value="Educational">Educational</option>
                                    <option value="Overall Assessment">Overall Assessment</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="progress_notes">Progress Notes <span class="text-danger">*</span></label>
                        <textarea class="form-control" id="progress_notes" name="progress_notes" rows="4" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="progress_rating">Rating <span class="text-danger">*</span></label>
                        <div class="rating-input">
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="progress_rating" id="rating1" value="1" required>
                                <label class="form-check-label" for="rating1">1 - Poor</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="progress_rating" id="rating2" value="2">
                                <label class="form-check-label" for="rating2">2 - Fair</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="progress_rating" id="rating3" value="3">
                                <label class="form-check-label" for="rating3">3 - Average</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="progress_rating" id="rating4" value="4">
                                <label class="form-check-label" for="rating4">4 - Good</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="progress_rating" id="rating5" value="5">
                                <label class="form-check-label" for="rating5">5 - Excellent</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Update Progress</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- View Activity Modal -->
<div class="modal fade" id="viewActivityModal" tabindex="-1" role="dialog" aria-labelledby="viewActivityModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="viewActivityModalLabel">Activity Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="activityDetails">
                    <div class="text-center">
                        <div class="spinner-border text-primary" role="status">
                            <span class="sr-only">Loading...</span>
                        </div>
                        <p class="mt-2">Loading activity details...</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Delete Trainee Modal -->
<div class="modal fade" id="deleteTraineeModal" tabindex="-1" role="dialog" aria-labelledby="deleteTraineeModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteTraineeModalLabel">Delete Trainee</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p class="text-danger">
                    <i class="fas fa-exclamation-triangle mr-1"></i> 
                    Warning: This action cannot be undone. Are you sure you want to delete this trainee?
                </p>
                <p>
                    This will permanently remove <strong>{{ $trainee->trainee_first_name }} {{ $trainee->trainee_last_name }}</strong> 
                    and all related data from the system.
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <form action="{{ route('traineeprofile.destroy', ['id' => $trainee->id]) }}" method="POST">
                    @csrf
                    @method('DELETE')
                    <button type="submit" class="btn btn-danger">Delete Trainee</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- View Attendance Calendar Modal -->
<div class="modal fade" id="viewAttendanceCalendarModal" tabindex="-1" role="dialog" aria-labelledby="viewAttendanceCalendarModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="viewAttendanceCalendarModalLabel">Attendance Calendar</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="attendanceCalendar" class="text-center">
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle mr-2"></i> Calendar view will be implemented in a future update.
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
@endsection

@section('scripts')
<script>
    $(document).ready(function() {
        // Hide alerts after 5 seconds
        setTimeout(function() {
            $('.alert').fadeOut('slow');
        }, 5000);
        
        // View activity details
        $('.view-activity').click(function() {
            var activityId = $(this).data('activity-id');
            $('#viewActivityModal').modal('show');
            
            // Reset modal content
            $('#activityDetails').html('<div class="text-center"><div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div><p class="mt-2">Loading activity details...</p></div>');
            
            // Fetch activity details
            $.ajax({
                url: '/traineeactivity/details/' + activityId,
                type: 'GET',
                success: function(response) {
                    if (response.success) {
                        var activity = response.data;
                        var html = '<div class="card">';
                        html += '<div class="card-header"><h5>' + activity.activity_name + '</h5></div>';
                        html += '<div class="card-body">';
                        html += '<div class="row mb-3">';
                        html += '<div class="col-md-6"><strong>Date:</strong> ' + new Date(activity.activity_date).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }) + '</div>';
                        html += '<div class="col-md-6"><strong>Type:</strong> ' + activity.activity_type + '</div>';
                        html += '</div>';
                        
                        html += '<div class="mb-3">';
                        html += '<strong>Description:</strong>';
                        html += '<p>' + activity.activity_description + '</p>';
                        html += '</div>';
                        
                        if (activity.activity_goals) {
                            html += '<div class="mb-3">';
                            html += '<strong>Goals:</strong>';
                            html += '<p>' + activity.activity_goals + '</p>';
                            html += '</div>';
                        }
                        
                        if (activity.activity_outcomes) {
                            html += '<div class="mb-3">';
                            html += '<strong>Outcomes:</strong>';
                            html += '<p>' + activity.activity_outcomes + '</p>';
                            html += '</div>';
                        }
                        
                        html += '</div>'; // card-body
                        html += '</div>'; // card
                        
                        $('#activityDetails').html(html);
                    } else {
                        $('#activityDetails').html('<div class="alert alert-danger">' + response.message + '</div>');
                    }
                },
                error: function() {
                    $('#activityDetails').html('<div class="alert alert-danger">Error loading activity details. Please try again.</div>');
                }
            });
        });
    });
</script>
@endsection

@section('styles')
<style>
    .img-profile {
        object-fit: cover;
        border: 4px solid #f8f9fc;
        box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
    }
    
    .badge {
        font-size: 85%;
    }
    
    .badge-cerebral-palsy {
        background-color: #e74a3b;
        color: white;
    }
    
    .badge-autism {
        background-color: #4e73df;
        color: white;
    }
    
    .badge-down-syndrome {
        background-color: #1cc88a;
        color: white;
    }
    
    .badge-hearing {
        background-color: #36b9cc;
        color: white;
    }
    
    .badge-visual {
        background-color: #f6c23e;
        color: white;
    }
    
    .badge-intellectual {
        background-color: #fd7e14;
        color: white;
    }
    
    .badge-physical {
        background-color: #6f42c1;
        color: white;
    }
    
    .badge-speech {
        background-color: #20c9a6;
        color: white;
    }
    
    .badge-learning {
        background-color: #858796;
        color: white;
    }
    
    .badge-default {
        background-color: #5a5c69;
        color: white;
    }
    
    .table th, .table td {
        vertical-align: middle;
    }
    
    .progress {
        background-color: #eaecf4;
    }
    
    .nav-tabs .nav-link {
        color: #6e707e;
    }
    
    .nav-tabs .nav-link.active {
        color: #4e73df;
        font-weight: 600;
    }
    
    .rating-input {
        margin-top: 0.5rem;
    }
</style>
@endsectionactivity_name">Activity Name <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="activity_name" name="activity_name" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="activity_type">Activity Type <span class="text-danger">*</span></label>
                                <select class="form-control" id="activity_type" name="activity_type" required>
                                    <option value="">Select Type</option>
                                    <option value="Physical Therapy">Physical Therapy</option>
                                    <option value="Speech Therapy">Speech Therapy</option>
                                    <option value="Occupational Therapy">Occupational Therapy</option>
                                    <option value="Educational">Educational</option>
                                    <option value="Social Skills">Social Skills</option>
                                    <option value="Assessment">Assessment</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="activity_date">Activity Date <span class="text-danger">*</span></label>
                                <input type="date" class="form-control" id="activity_date" name="activity_date" required>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="activity_description">Activity Description <span class="text-danger">*</span></label>
                        <textarea class="form-control" id="activity_description" name="activity_description" rows="3" required></textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="activity_goals">Goals</label>
                                <textarea class="form-control" id="activity_goals" name="activity_goals" rows="2"></textarea>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="activity_outcomes">Outcomes</label>
                                <textarea class="form-control" id="activity_outcomes" name="activity_outcomes" rows="2"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Activity</button>
                </div>
            </form>
        </div>
    </div>
</div>


traineesregistration.blade
views/trainees

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register New Trainee - CREAMS</title>
    
    <!-- Favicon -->
    <link rel="shortcut icon" href="{{ asset('images/logo/favicon.png') }}" type="image/x-icon">
    
    <!-- External CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ asset('css/traineeregistrationstyle.css') }}">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <img src="{{ asset('images/favicon.png') }}" alt="CREAMS Logo">
                <span class="logo-text">CREAMS</span>
            </div>
            <div class="toggle-btn">
                <i class="fas fa-chevron-left"></i>
            </div>
        </div>
        
        <div class="admin-profile">
            <div class="admin-avatar">
                @if(isset($user['avatar']) && $user['avatar'])
                    <img src="{{ asset('storage/avatars/' . $user['avatar']) }}" alt="User Avatar">
                @else
                    <img src="{{ asset('images/admin-avatar.jpg') }}" alt="User Avatar">
                @endif
            </div>
            <div class="admin-info">
                <div class="admin-name">{{ $user['name'] ?? 'User' }}</div>
                <div class="admin-role">{{ ucfirst($user['role'] ?? 'guest') }}</div>
            </div>
        </div>
        
        <ul class="nav-menu">
            <li class="{{ request()->routeIs('dashboard') ? 'active' : '' }}">
                <a href="{{ route('dashboard') }}">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                    <div class="tooltip-sidebar">Dashboard</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('traineeshome') || request()->routeIs('traineeprofile') || request()->routeIs('traineesregistrationpage') ? 'active' : '' }}">
                <a href="{{ route('traineeshome') }}">
                    <i class="fas fa-user-graduate"></i>
                    <span>Trainees</span>
                    <div class="tooltip-sidebar">Trainees</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('traineeactivity') ? 'active' : '' }}">
                <a href="{{ route('traineeactivity') }}">
                    <i class="fas fa-clipboard-list"></i>
                    <span>Activities</span>
                    <div class="tooltip-sidebar">Trainee Activities</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('teachershome') ? 'active' : '' }}">
                <a href="{{ route('teachershome') }}">
                    <i class="fas fa-chalkboard-teacher"></i>
                    <span>Staff</span>
                    <div class="tooltip-sidebar">Staff</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('schedulehomepage') ? 'active' : '' }}">
                <a href="{{ route('schedulehomepage') }}">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Schedule</span>
                    <div class="tooltip-sidebar">Schedule</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('assetmanagementpage') ? 'active' : '' }}">
                <a href="{{ route('assetmanagementpage') }}">
                    <i class="fas fa-box"></i>
                    <span>Assets</span>
                    <div class="tooltip-sidebar">Asset Management</div>
                </a>
            </li>
            <li class="{{ request()->routeIs('aboutus') ? 'active' : '' }}">
                <a href="{{ route('aboutus') }}">
                    <i class="fas fa-info-circle"></i>
                    <span>About</span>
                    <div class="tooltip-sidebar">About Us</div>
                </a>
            </li>
        </ul>
        
        <form method="POST" action="{{ route('logout') }}" class="logout-container">
            @csrf
            <button type="submit" class="logout-btn">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </button>
        </form>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <div class="page-info">
                    <h1 class="page-title">Register New Trainee</h1>
                    <div class="breadcrumb">
                        <a href="{{ route('dashboard') }}">Dashboard</a>
                        <span class="separator">/</span>
                        <a href="{{ route('traineeshome') }}">Trainees</a>
                        <span class="separator">/</span>
                        <span class="current">Register New Trainee</span>
                    </div>
                </div>
                
                <div class="header-actions">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="search" placeholder="Search...">
                    </div>
                    
                    <div class="notification-bell">
                        <i class="fas fa-bell"></i>
                        @if(isset($notificationCount) && $notificationCount > 0)
                            <span class="notification-count">{{ $notificationCount }}</span>
                        @endif
                    </div>
                    
                    <div class="admin-dropdown">
                        <div class="admin-dropdown-toggle">
                            @if(isset($user['avatar']) && $user['avatar'])
                                <img src="{{ asset('storage/avatars/' . $user['avatar']) }}" alt="User">
                            @else
                                <img src="{{ asset('images/admin-avatar.jpg') }}" alt="User">
                            @endif
                            <span>{{ $user['name'] ?? 'User' }}</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="admin-dropdown-menu">
                            <a href="{{ route('profile') }}">
                                <i class="fas fa-user"></i> My Profile
                            </a>
                            @if(isset($user['role']) && $user['role'] == 'admin')
                                <a href="{{ route('admin.settings') }}">
                                    <i class="fas fa-cog"></i> Settings
                                </a>
                            @endif
                            <form method="POST" action="{{ route('logout') }}">
                                @csrf
                                <button type="submit">
                                    <i class="fas fa-sign-out-alt"></i> Logout
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="page-actions">
                <a href="{{ route('traineeshome') }}" class="action-btn">
                    <i class="fas fa-arrow-left"></i> Back to Trainees
                </a>
            </div>
        </div>
        
        <!-- Content Section -->
        <div class="content-section">
            <!-- Alert Messages -->
            @if(session('success'))
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    {{ session('success') }}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            @endif

            @if(session('error'))
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    {{ session('error') }}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            @endif

            @if($errors->any())
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    <i class="fas fa-exclamation-circle mr-2"></i> Please check the form for errors
                    <ul class="mb-0 mt-2">
                        @foreach($errors->all() as $error)
                            <li>{{ $error }}</li>
                        @endforeach
                    </ul>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            @endif

            <!-- Registration Form Card -->
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Trainee Information</h6>
                </div>
                <div class="card-body">
                    <form action="{{ route('traineesregistrationstore') }}" method="POST" enctype="multipart/form-data" id="traineeRegistrationForm">
                        @csrf
                        
                        <!-- Form progress indicator -->
                        <div class="progress mb-4">
                            <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
                        </div>
                        
                        <!-- Tabs for form sections -->
                        <ul class="nav nav-tabs mb-4" id="formTabs" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="basic-tab" data-toggle="tab" href="#basic" role="tab" aria-controls="basic" aria-selected="true">
                                    <i class="fas fa-user mr-1"></i>Basic Information
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="guardian-tab" data-toggle="tab" href="#guardian" role="tab" aria-controls="guardian" aria-selected="false">
                                    <i class="fas fa-user-shield mr-1"></i>Guardian Information
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="additional-tab" data-toggle="tab" href="#additional" role="tab" aria-controls="additional" aria-selected="false">
                                    <i class="fas fa-clipboard-list mr-1"></i>Additional Information
                                </a>
                            </li>
                        </ul>
                        
                        <!-- Tab content -->
                        <div class="tab-content" id="formTabContent">
                            <!-- Basic Information Tab -->
                            <div class="tab-pane fade show active" id="basic" role="tabpanel" aria-labelledby="basic-tab">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="trainee_first_name">First Name <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control @error('trainee_first_name') is-invalid @enderror" id="trainee_first_name" name="trainee_first_name" value="{{ old('trainee_first_name') }}" required>
                                            @error('trainee_first_name')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="trainee_last_name">Last Name <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control @error('trainee_last_name') is-invalid @enderror" id="trainee_last_name" name="trainee_last_name" value="{{ old('trainee_last_name') }}" required>
                                            @error('trainee_last_name')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="trainee_email">Email Address <span class="text-danger">*</span></label>
                                            <input type="email" class="form-control @error('trainee_email') is-invalid @enderror" id="trainee_email" name="trainee_email" value="{{ old('trainee_email') }}" required>
                                            <small id="emailHelp" class="form-text text-muted">This will be used for communication purposes.</small>
                                            @error('trainee_email')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                            <div id="emailFeedback" class="mt-2"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="trainee_phone_number">Phone Number <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control @error('trainee_phone_number') is-invalid @enderror" id="trainee_phone_number" name="trainee_phone_number" value="{{ old('trainee_phone_number') }}" required>
                                            @error('trainee_phone_number')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="trainee_date_of_birth">Date of Birth <span class="text-danger">*</span></label>
                                            <input type="date" class="form-control @error('trainee_date_of_birth') is-invalid @enderror" id="trainee_date_of_birth" name="trainee_date_of_birth" value="{{ old('trainee_date_of_birth') }}" max="{{ date('Y-m-d') }}" required>
                                            <small id="ageCalculation" class="form-text text-muted"></small>
                                            @error('trainee_date_of_birth')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="trainee_condition">Condition <span class="text-danger">*</span></label>
                                            <select class="form-control @error('trainee_condition') is-invalid @enderror" id="trainee_condition" name="trainee_condition" required>
                                                <option value="">Select Condition</option>
                                                @foreach($conditions ?? [] as $condition)
                                                    <option value="{{ $condition }}" {{ old('trainee_condition') == $condition ? 'selected' : '' }}>
                                                        {{ $condition }}
                                                    </option>
                                                @endforeach
                                            </select>
                                            @error('trainee_condition')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="centre_name">Centre <span class="text-danger">*</span></label>
                                            <select class="form-control @error('centre_name') is-invalid @enderror" id="centre_name" name="centre_name" required>
                                                <option value="">Select Centre</option>
                                                @foreach($centres as $centre)
                                                    <option value="{{ $centre->centre_name }}" {{ (old('centre_name') == $centre->centre_name || (isset($selectedCentre) && $selectedCentre && $selectedCentre->centre_name == $centre->centre_name)) ? 'selected' : '' }}>
                                                        {{ $centre->centre_name }}
                                                    </option>
                                                @endforeach
                                            </select>
                                            @error('centre_name')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="trainee_avatar">Profile Picture</label>
                                            <div class="custom-file">
                                                <input type="file" class="custom-file-input @error('trainee_avatar') is-invalid @enderror" id="trainee_avatar" name="trainee_avatar" accept="image/*">
                                                <label class="custom-file-label" for="trainee_avatar">Choose file</label>
                                            </div>
                                            <small class="form-text text-muted">Maximum file size: 2MB. Accepted formats: JPEG, PNG, JPG, GIF.</small>
                                            @error('trainee_avatar')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                            <div id="avatar-preview" class="mt-2 text-center d-none">
                                                <img src="" class="img-thumbnail" style="max-height: 150px;" alt="Avatar Preview">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="text-right mt-4">
                                    <button type="button" class="btn btn-primary next-tab" data-next="guardian-tab">
                                        Next: Guardian Information <i class="fas fa-arrow-right ml-1"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Guardian Information Tab -->
                            <div class="tab-pane fade" id="guardian" role="tabpanel" aria-labelledby="guardian-tab">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="guardian_name">Guardian's Name <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control @error('guardian_name') is-invalid @enderror" id="guardian_name" name="guardian_name" value="{{ old('guardian_name') }}" required>
                                            @error('guardian_name')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="guardian_relationship">Relationship <span class="text-danger">*</span></label>
                                            <select class="form-control @error('guardian_relationship') is-invalid @enderror" id="guardian_relationship" name="guardian_relationship" required>
                                                <option value="">Select Relationship</option>
                                                <option value="Parent" {{ old('guardian_relationship') == 'Parent' ? 'selected' : '' }}>Parent</option>
                                                <option value="Sibling" {{ old('guardian_relationship') == 'Sibling' ? 'selected' : '' }}>Sibling</option>
                                                <option value="Grandparent" {{ old('guardian_relationship') == 'Grandparent' ? 'selected' : '' }}>Grandparent</option>
                                                <option value="Aunt/Uncle" {{ old('guardian_relationship') == 'Aunt/Uncle' ? 'selected' : '' }}>Aunt/Uncle</option>
                                                <option value="Legal Guardian" {{ old('guardian_relationship') == 'Legal Guardian' ? 'selected' : '' }}>Legal Guardian</option>
                                                <option value="Other" {{ old('guardian_relationship') == 'Other' ? 'selected' : '' }}>Other</option>
                                            </select>
                                            @error('guardian_relationship')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="guardian_phone">Guardian's Phone <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control @error('guardian_phone') is-invalid @enderror" id="guardian_phone" name="guardian_phone" value="{{ old('guardian_phone') }}" required>
                                            @error('guardian_phone')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="guardian_email">Guardian's Email <span class="text-danger">*</span></label>
                                            <input type="email" class="form-control @error('guardian_email') is-invalid @enderror" id="guardian_email" name="guardian_email" value="{{ old('guardian_email') }}" required>
                                            @error('guardian_email')
                                                <div class="invalid-feedback">{{ $message }}</div>
                                            @enderror
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="text-right mt-4">
                                    <button type="button" class="btn btn-secondary prev-tab" data-prev="basic-tab">
                                        <i class="fas fa-arrow-left mr-1"></i> Previous: Basic Information
                                    </button>
                                    <button type="button" class="btn btn-primary next-tab" data-next="additional-tab">
                                        Next: Additional Information <i class="fas fa-arrow-right ml-1"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Additional Information Tab -->
                            <div class="tab-pane fade" id="additional" role="tabpanel" aria-labelledby="additional-tab">
                                <div class="form-group">
                                    <label for="additional_notes">Additional Notes</label>
                                    <textarea class="form-control @error('additional_notes') is-invalid @enderror" id="additional_notes" name="additional_notes" rows="5">{{ old('additional_notes') }}</textarea>
                                    <small class="form-text text-muted">Please provide any additional information that may be relevant to the trainee's care and development.</small>
                                    @error('additional_notes')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                                
                                <div class="form-group form-check">
                                    <input type="checkbox" class="form-check-input" id="consent" name="consent" required>
                                    <label class="form-check-label" for="consent">
                                        I confirm that all information provided is accurate and I consent to the collection and processing of this data for the purpose of providing services to the trainee.
                                    </label>
                                </div>
                                
                                <div class="text-right mt-4">
                                    <button type="button" class="btn btn-secondary prev-tab" data-prev="guardian-tab">
                                        <i class="fas fa-arrow-left mr-1"></i> Previous: Guardian Information
                                    </button>
                                    <button type="submit" class="btn btn-success" id="submitBtn">
                                        <i class="fas fa-user-plus mr-1"></i> Register Trainee
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="dashboard-footer">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="{{ asset('images/favicon.png') }}" alt="CREAMS Logo">
                    <span>CREAMS</span>
                </div>
                <div class="footer-text">
                    Community-based REhAbilitation Management System &copy; {{ date('Y') }} IIUM
                </div>
                <div class="footer-links">
                    <a href="#" class="footer-link">Privacy Policy</a>
                    <a href="#" class="footer-link">Terms of Service</a>
                    <a href="#" class="footer-link">Help Centre</a>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Dependencies -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function() {
            // Sidebar toggle
            $('.toggle-btn').click(function() {
                $('.sidebar').toggleClass('collapsed');
                $('.main-content').toggleClass('expanded');
            });
            
            // Admin dropdown
            $('.admin-dropdown-toggle').click(function(e) {
                e.stopPropagation();
                $('.admin-dropdown-menu').toggleClass('show');
            });
            
            // Close dropdown when clicking outside
            $(document).click(function(event) {
                if (!$(event.target).closest('.admin-dropdown').length) {
                    $('.admin-dropdown-menu').removeClass('show');
                }
            });
            
            // File input change event for image preview
            $('#trainee_avatar').change(function() {
                if (this.files && this.files[0]) {
                    var reader = new FileReader();
                    reader.onload = function(e) {
                        $('#avatar-preview').removeClass('d-none');
                        $('#avatar-preview img').attr('src', e.target.result);
                    }
                    reader.readAsDataURL(this.files[0]);
                    
                    // Update custom file label with file name
                    var fileName = $(this).val().split('\\').pop();
                    $(this).next('.custom-file-label').html(fileName);
                } else {
                    $('#avatar-preview').addClass('d-none');
                    $(this).next('.custom-file-label').html('Choose file');
                }
            });
            
            // Age calculation on date of birth change
            $('#trainee_date_of_birth').change(function() {
                var dob = new Date($(this).val());
                var today = new Date();
                var age = Math.floor((today - dob) / (365.25 * 24 * 60 * 60 * 1000));
                
                if (!isNaN(age) && age >= 0) {
                    $('#ageCalculation').text('Age: ' + age + ' years');
                } else {
                    $('#ageCalculation').text('');
                }
            });
            
            // Trigger date of birth change if already has value
            if ($('#trainee_date_of_birth').val()) {
                $('#trainee_date_of_birth').trigger('change');
            }
            
            // Email validation via AJAX
            var emailTimer;
            $('#trainee_email').on('input', function() {
                clearTimeout(emailTimer);
                var email = $(this).val();
                
                if (email && validateEmail(email)) {
                    emailTimer = setTimeout(function() {
                        $('#emailFeedback').html('<div class="spinner-border spinner-border-sm text-primary" role="status"><span class="sr-only">Loading...</span></div> Checking email availability...');
                        
                        $.ajax({
                            url: '{{ route("validateEmail") }}',
                            type: 'POST',
                            data: {
                                email: email,
                                _token: '{{ csrf_token() }}'
                            },
                            success: function(response) {
                                if (response.valid) {
                                    $('#emailFeedback').html('<div class="text-success"><i class="fas fa-check-circle"></i> ' + response.message + '</div>');
                                } else {
                                    $('#emailFeedback').html('<div class="text-danger"><i class="fas fa-times-circle"></i> ' + response.message + '</div>');
                                }
                            },
                            error: function() {
                                $('#emailFeedback').html('<div class="text-danger"><i class="fas fa-exclamation-circle"></i> Error checking email. Please try again.</div>');
                            }
                        });
                    }, 500);
                } else {
                    $('#emailFeedback').empty();
                }
            });
            
            // Tab navigation
            $('.next-tab').click(function() {
                var nextTab = $(this).data('next');
                $('#' + nextTab).tab('show');
                updateProgressBar();
            });
            
            $('.prev-tab').click(function() {
                var prevTab = $(this).data('prev');
                $('#' + prevTab).tab('show');
                updateProgressBar();
            });
            
            $('#formTabs a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                updateProgressBar();
            });
            
            // Progress bar update
            function updateProgressBar() {
                var currentTab = $('#formTabs .nav-link.active').attr('id');
                var progress = 0;
                
                switch(currentTab) {
                    case 'basic-tab':
                        progress = 33;
                        break;
                    case 'guardian-tab':
                        progress = 66;
                        break;
                    case 'additional-tab':
                        progress = 100;
                        break;
                }
                
                $('.progress-bar').css('width', progress + '%').attr('aria-valuenow', progress).text(progress + '%');
            }
            
            // Form validation before submission
            $('#traineeRegistrationForm').submit(function(e) {
                var requiredFields = $(this).find('[required]');
                var valid = true;
                
                requiredFields.each(function() {
                    if (!$(this).val()) {
                        valid = false;
                        $(this).addClass('is-invalid');
                        
                        // Show the tab containing the first invalid field
                        var tabId = $(this).closest('.tab-pane').attr('id');
                        $('#formTabs a[href="#' + tabId + '"]').tab('show');
                        
                        // Stop the loop after finding the first error
                        return false;
                    } else {
                        $(this).removeClass('is-invalid');
                    }
                });
                
                if (!valid) {
                    e.preventDefault();
                    alert('Please fill in all required fields.');
                } else if (!$('#consent').is(':checked')) {
                    e.preventDefault();
                    alert('Please confirm your consent by checking the box.');
                    $('#consent').addClass('is-invalid');
                }
            });
            
            // Email validation helper function
            function validateEmail(email) {
                var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                return re.test(String(email).toLowerCase());
            }
            
            // Initialize progress bar
            updateProgressBar();
            
            // Hide alerts after 5 seconds
            setTimeout(function() {
                $('.alert').fadeOut('slow');
            }, 5000);
        });
    </script>
</body>
</html>

accountprofile.blade

@extends('layouts.app')

@section('title', 'User Profile - CREAMS')

@section('content')
<div class="container-fluid">
    <!-- Page Header -->
    <div class="dashboard-header mb-4">
        <div class="row align-items-center">
            <div class="col">
                <h1 class="dashboard-title">User Profile</h1>
                <div class="breadcrumb">
                    <a href="{{ route('dashboard') }}">Dashboard</a>
                    <span class="separator">/</span>
                    <span class="current">User Profile</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row">
        <!-- User Info Card -->
        <div class="col-md-4 mb-4">
            <div class="card shadow">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">
                        <i class="fas fa-user-circle mr-2"></i>Profile Information
                    </h6>
                </div>
                <div class="card-body">
                    <!-- Profile content here -->
                </div>
            </div>
        </div>
        
        <!-- Update Credentials Card -->
        <div class="col-md-8 mb-4">
            <div class="card shadow">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">
                        <i class="fas fa-key mr-2"></i>Update Credentials
                    </h6>
                </div>
                <div class="card-body">
                    <!-- Form content here -->
                </div>
            </div>
        </div>
    </div>
</div>
@endsection

contactadminnotification.blade

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Contact Message - {{ $contact->formatted_reason }}</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; margin: 0; padding: 0; }
        .container { max-width: 700px; margin: 0 auto; padding: 20px; background-color: #f4f4f4; }
        .header { background: linear-gradient(135deg, #32bdea, #c850c0); color: white; text-align: center; padding: 25px; border-radius: 10px 10px 0 0; }
        .content { background: white; padding: 30px; border-radius: 0 0 10px 10px; }
        .details { background: #f8f9fa; padding: 20px; border-radius: 5px; margin: 20px 0; }
        .details h3 { margin-top: 0; color: #32bdea; }
        .urgent { background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 5px; margin: 20px 0; }
        .urgent-high { background: #f8d7da; border: 1px solid #f5c6cb; }
        .button { display: inline-block; background: linear-gradient(135deg, #32bdea, #c850c0); color: white; padding: 12px 25px; text-decoration: none; border-radius: 5px; margin: 10px 5px; }
        .badge { display: inline-block; padding: 4px 8px; border-radius: 12px; font-size: 11px; font-weight: bold; text-transform: uppercase; }
        .badge-urgent { background: #dc3545; color: white; }
        .badge-high { background: #fd7e14; color: white; }
        .badge-medium { background: #20c997; color: white; }
        .badge-low { background: #6c757d; color: white; }
        .message-preview { background: #f1f3f4; padding: 15px; border-left: 4px solid #32bdea; font-style: italic; margin: 15px 0; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>
                @if($contact->urgency === 'urgent')
                 URGENT - 
                @elseif($contact->urgency === 'high')
                 HIGH PRIORITY - 
                @endif
                New {{ $contact->formatted_reason }}
            </h1>
            <p>Contact form submission received</p>
        </div>
    <div class="content">
        @if($contact->urgency === 'urgent')
        <div class="urgent urgent-high">
            <strong> URGENT ATTENTION REQUIRED:</strong> This message has been marked as urgent and requires immediate response within 24 hours.
        </div>
        @elseif($contact->urgency === 'high')
        <div class="urgent">
            <strong> HIGH PRIORITY:</strong> This message requires priority attention and should be responded to within 48 hours.
        </div>
        @endif
        
        <div class="details">
            <h3> Contact Information</h3>
            <p><strong>Name:</strong> {{ $contact->name }}</p>
            <p><strong>Email:</strong> {{ $contact->email }}</p>
            @if($contact->phone)
            <p><strong>Phone:</strong> {{ $contact->phone }}</p>
            @endif
            @if($contact->organization)
            <p><strong>Organization:</strong> {{ $contact->organization }}</p>
            @endif
            <p><strong>Preferred Contact:</strong> {{ ucfirst($contact->preferred_contact_method ?? 'email') }}</p>
            <p><strong>Reference ID:</strong> #CM{{ str_pad($contact->id, 6, '0', STR_PAD_LEFT) }}</p>
            <p><strong>Submitted:</strong> {{ $contact->created_at->format('F j, Y \a\t g:i A') }}</p>
        </div>
        
        <div class="details">
            <h3> Message Details</h3>
            <p><strong>Subject:</strong> {{ $contact->subject }}</p>
            <p><strong>Category:</strong> {{ $contact->formatted_reason }}</p>
            <p>
                <strong>Priority:</strong> 
                <span class="badge badge-{{ $contact->urgency }}">{{ $contact->formatted_urgency }}</span>
                @if($contact->isOverdue())
                <span class="badge badge-urgent">OVERDUE</span>
                @endif
            </p>
        </div>
        
        <div class="details">
            <h3> Message Content</h3>
            <div class="message-preview">
                {{ $contact->message }}
            </div>
        </div>
        
        <div class="details">
            <h3> Technical Information</h3>
            <p><strong>IP Address:</strong> {{ $contact->ip_address }}</p>
            <p><strong>User Agent:</strong> {{ Str::limit($contact->user_agent, 100) }}</p>
            @if($contact->referrer)
            <p><strong>Referrer:</strong> {{ $contact->referrer }}</p>
            @endif
            <p><strong>Database ID:</strong> {{ $contact->id }}</p>
        </div>
        
        <div style="text-align: center; margin: 30px 0;">
            <a href="{{ route('admin.contacts.show', $contact->id) }}" class="button">
                 View Full Message
            </a>
            <a href="{{ route('admin.contacts.index') }}" class="button">
                 Manage All Messages
            </a>
            @if($contact->email)
            <a href="mailto:{{ $contact->email }}?subject=Re: {{ $contact->subject }}&body=Dear {{ $contact->name }},%0D%0A%0D%0AThank you for contacting IIUM PD-CARE regarding your {{ strtolower($contact->formatted_reason) }}.%0D%0A%0D%0A" class="button">
                 Reply Directly
            </a>
            @endif
        </div>
        
        <h3> Suggested Actions:</h3>
        <ol>
            @if($contact->reason === 'services')
            <li>Review client's specific rehabilitation needs</li>
            <li>Check current service availability and capacity</li>
            <li>Prepare service information packet</li>
            <li>Schedule initial consultation if appropriate</li>
            <li>Update contact status to "in_progress" when responded</li>
            @elseif($contact->reason === 'volunteer')
            <li>Review volunteer application requirements</li>
            <li>Check current volunteer program openings</li>
            <li>Send volunteer application form if interested</li>
            <li>Schedule informal interview if suitable</li>
            @elseif($contact->reason === 'complaint')
            <li>Assign to appropriate department head immediately</li>
            <li>Investigate the complaint thoroughly</li>
            <li>Document all findings and proposed resolutions</li>
            <li>Respond within 48 hours with action plan</li>
            <li>Schedule follow-up to ensure satisfaction</li>
            @elseif($contact->reason === 'partnership')
            <li>Review partnership proposal and requirements</li>
            <li>Check alignment with organizational goals</li>
            <li>Prepare initial partnership information</li>
            <li>Schedule meeting with relevant stakeholders</li>
            @else
            <li>Review the inquiry and determine appropriate department</li>
            <li>Gather relevant information and resources</li>
            <li>Prepare comprehensive response</li>
            <li>Follow up within the specified timeframe</li>
            @endif
        </ol>
        
        <p><strong> Response Target:</strong> 
            @if($contact->urgency === 'urgent')
            <span style="color: #dc3545; font-weight: bold;">Within 24 hours</span>
            @elseif($contact->urgency === 'high')
            <span style="color: #fd7e14; font-weight: bold;">Within 48 hours</span>
            @else
            Within 3-5 business days
            @endif
        </p>
        
        @if($contact->reason === 'complaint' || $contact->urgency === 'urgent')
        <div class="urgent urgent-high">
            <strong> Important:</strong> This message requires management attention and should be escalated appropriately.
        </div>
        @endif
    </div>
</div>
</body>
</html>

contactconfirmation.blade

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Message Received - IIUM PD-CARE</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; margin: 0; padding: 0; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f4f4f4; }
        .header { background: linear-gradient(135deg, #32bdea, #c850c0); color: white; text-align: center; padding: 30px; border-radius: 10px 10px 0 0; }
        .content { background: white; padding: 30px; border-radius: 0 0 10px 10px; }
        .footer { text-align: center; margin-top: 20px; font-size: 12px; color: #666; }
        .details { background: #f8f9fa; padding: 20px; border-radius: 5px; margin: 20px 0; }
        .details h3 { margin-top: 0; color: #32bdea; }
        .urgency-badge { display: inline-block; padding: 4px 8px; border-radius: 12px; font-size: 12px; font-weight: bold; text-transform: uppercase; }
        .urgency-urgent { background: #dc3545; color: white; }
        .urgency-high { background: #fd7e14; color: white; }
        .urgency-medium { background: #20c997; color: white; }
        .urgency-low { background: #6c757d; color: white; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Thank You for Contacting Us!</h1>
            <p>Your message has been received and logged</p>
        </div>
    <div class="content">
        <p>Dear {{ $contact->name }},</p>
        
        <p>Thank you for reaching out to IIUM PD-CARE. We have successfully received your message and want to assure you that it will be reviewed and responded to appropriately.</p>
        
        <div class="details">
            <h3>Message Summary</h3>
            <p><strong>Reference ID:</strong> #CM{{ str_pad($contact->id, 6, '0', STR_PAD_LEFT) }}</p>
            <p><strong>Name:</strong> {{ $contact->name }}</p>
            <p><strong>Email:</strong> {{ $contact->email }}</p>
            @if($contact->phone)
            <p><strong>Phone:</strong> {{ $contact->phone }}</p>
            @endif
            @if($contact->organization)
            <p><strong>Organization:</strong> {{ $contact->organization }}</p>
            @endif
            <p><strong>Subject:</strong> {{ $contact->subject }}</p>
            <p><strong>Reason:</strong> {{ $contact->formatted_reason }}</p>
            <p>
                <strong>Priority:</strong> 
                <span class="urgency-badge urgency-{{ $contact->urgency }}">{{ $contact->formatted_urgency }}</span>
            </p>
            <p><strong>Submitted:</strong> {{ $contact->created_at->format('F j, Y \a\t g:i A') }}</p>
        </div>
        
        <div class="details">
            <h3>Your Message</h3>
            <p style="font-style: italic; padding: 15px; background: #f1f3f4; border-left: 4px solid #32bdea;">
                {{ $contact->message }}
            </p>
        </div>
        
        @if($contact->urgency === 'urgent')
        <div style="background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 5px; margin: 20px 0;">
            <strong> Urgent Priority Notice:</strong> Your message has been flagged as urgent and will be reviewed within 24 hours.
        </div>
        @endif
        
        <h3>What happens next?</h3>
        <ol>
            @if($contact->reason === 'services')
            <li><strong>Initial Review:</strong> Our rehabilitation services team will review your inquiry within 2-3 business days.</li>
            <li><strong>Needs Assessment:</strong> We may contact you for additional information about your specific needs.</li>
            <li><strong>Service Recommendation:</strong> We'll provide detailed information about our services that best match your requirements.</li>
            <li><strong>Next Steps:</strong> If appropriate, we'll schedule a consultation or provide enrollment information.</li>
            @elseif($contact->reason === 'volunteer')
            <li><strong>Application Review:</strong> Our volunteer coordinator will review your inquiry within 1 week.</li>
            <li><strong>Initial Contact:</strong> We'll reach out to discuss volunteer opportunities that match your interests.</li>
            <li><strong>Application Process:</strong> If there's a good fit, we'll guide you through our volunteer application process.</li>
            <li><strong>Training:</strong> Successful applicants will participate in our orientation and training program.</li>
            @elseif($contact->reason === 'complaint')
            <li><strong>Immediate Logging:</strong> Your complaint has been logged and assigned to our management team.</li>
            <li><strong>Investigation:</strong> We will investigate the matter thoroughly and impartially.</li>
            <li><strong>Response:</strong> You will receive a detailed response within 48 hours.</li>
            <li><strong>Follow-up:</strong> We may contact you for additional information or to discuss resolution.</li>
            @else
            <li><strong>Review:</strong> Our team will review your message and determine the appropriate response.</li>
            <li><strong>Response:</strong> We will contact you within 3-5 business days with relevant information or next steps.</li>
            <li><strong>Follow-up:</strong> If needed, we may schedule a call or meeting to discuss your inquiry in detail.</li>
            @endif
        </ol>
        
        <h3>Need Immediate Assistance?</h3>
        <p>If your matter is urgent and requires immediate attention, you can contact us directly:</p>
        <ul>
            <li><strong>Phone:</strong> (+60) 3-6421-6421 (Monday - Friday, 9 AM - 5 PM)</li>
            <li><strong>Email:</strong> <a href="mailto:pdcare@iium.edu.my">pdcare@iium.edu.my</a></li>
            <li><strong>Emergency:</strong> For medical emergencies, please call 999 immediately</li>
        </ul>
        
        <p>Please keep your reference number <strong>#CM{{ str_pad($contact->id, 6, '0', STR_PAD_LEFT) }}</strong> for future correspondence regarding this message.</p>
        
        <p>Thank you for your interest in IIUM PD-CARE and for giving us the opportunity to assist you.</p>
        
        <p>Warm regards,<br>
        <strong>IIUM PD-CARE Team</strong><br>
        International Islamic University Malaysia</p>
    </div>
    
    <div class="footer">
        <p>This is an automated confirmation email. Please do not reply to this email address.</p>
        <p>If you need to update your message, please submit a new contact form or call us directly.</p>
        <p> {{ date('Y') }} IIUM PD-CARE. All rights reserved.</p>
    </div>
</div>
</body>
</html>

contactus.blade


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - IIUM PD-CARE</title>
{{-- Favicon --}}
<link rel="shortcut icon" href="{{ asset('images/favicon.png') }}" type="image/x-icon">

{{-- CSS Dependencies --}}
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">

{{-- External Custom Styles --}}
<link rel="stylesheet" href="{{ asset('css/contactstyle.css') }}">
<link rel="stylesheet" href="{{ asset('css/headerstyle.css') }}">
<link rel="stylesheet" href="{{ asset('css/footerstyle.css') }}">
</head>
<body>
    {{-- Preloader --}}
    <div class="preloader">
        <div class="spinner"></div>
    </div>
{{-- Header --}}
@include('layouts.header')

{{-- Contact Hero Section --}}
<section class="contacthero">
    <div class="container">
        <h1>Connect with IIUM PD-CARE</h1>
        <p>We're here to support, listen, and collaborate. Reach out to us for any inquiries about our rehabilitation services.</p>
        <div class="herocta">
            <a href="#contactform" class="btn btn-primary">
                <i class="fas fa-paper-plane"></i> Get in Touch
            </a>
        </div>
    </div>
</section>

{{-- Quick Connect Section --}}
<section class="quickconnect">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <div class="connectmethod">
                    <div class="connecticon">
                        <i class="fas fa-phone-alt"></i>
                    </div>
                    <h3>Call Us</h3>
                    <p>(+60) 3-6421-6421</p>
                    <small>Monday - Friday, 9AM - 5PM</small>
                </div>
            </div>
            <div class="col-md-4">
                <div class="connectmethod">
                    <div class="connecticon">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <h3>Email Us</h3>
                    <p>pdcare@iium.edu.my</p>
                    <small>We'll respond within 24 hours</small>
                </div>
            </div>
            <div class="col-md-4">
                <div class="connectmethod">
                    <div class="connecticon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <h3>Visit Us</h3>
                    <p>IIUM Gombak Campus</p>
                    <small>Selangor, Malaysia</small>
                </div>
            </div>
        </div>
    </div>
</section>

{{-- Contact Form Section --}}
<section id="contactform" class="contactformsection">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="contactformwrapper">
                    <h2 class="formtitle">Send Us a Message</h2>
                    <p class="formsubtitle">Fill out the form below and we'll get back to you as soon as possible.</p>
                    
                    @if(session('success'))
                        <div class="alert alert-success alert-dismissible fade show" role="alert">
                            {{ session('success') }}
                            <button type="button" class="close" data-dismiss="alert">
                                <span>&times;</span>
                            </button>
                        </div>
                    @endif

                    @if($errors->any())
                        <div class="alert alert-danger alert-dismissible fade show" role="alert">
                            @foreach($errors->all() as $error)
                                <p class="mb-0">{{ $error }}</p>
                            @endforeach
                            <button type="button" class="close" data-dismiss="alert">
                                <span>&times;</span>
                            </button>
                        </div>
                    @endif

                    @if(session('error'))
                        <div class="alert alert-danger alert-dismissible fade show" role="alert">
                            {{ session('error') }}
                            <button type="button" class="close" data-dismiss="alert">
                                <span>&times;</span>
                            </button>
                        </div>
                    @endif

                    <form action="{{ route('contact.submit') }}" method="POST" id="contactForm">
                        @csrf
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="name">Full Name <span class="required">*</span></label>
                                    <input type="text" name="name" id="name" 
                                           class="form-control @error('name') is-invalid @enderror" 
                                           value="{{ old('name') }}" required>
                                    @error('name')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="email">Email Address <span class="required">*</span></label>
                                    <input type="email" name="email" id="email" 
                                           class="form-control @error('email') is-invalid @enderror" 
                                           value="{{ old('email') }}" required>
                                    @error('email')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="phone">Phone Number</label>
                                    <input type="tel" name="phone" id="phone" 
                                           class="form-control @error('phone') is-invalid @enderror" 
                                           value="{{ old('phone') }}">
                                    @error('phone')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="reason">Reason for Contact <span class="required">*</span></label>
                                    <select name="reason" id="reason" 
                                            class="form-control @error('reason') is-invalid @enderror" required>
                                        <option value="">Select a reason</option>
                                        <option value="services" {{ old('reason') == 'services' ? 'selected' : '' }}>
                                            Rehabilitation Services
                                        </option>
                                        <option value="volunteer" {{ old('reason') == 'volunteer' ? 'selected' : '' }}>
                                            Volunteer Inquiry
                                        </option>
                                        <option value="partnership" {{ old('reason') == 'partnership' ? 'selected' : '' }}>
                                            Partnership Opportunity
                                        </option>
                                        <option value="support" {{ old('reason') == 'support' ? 'selected' : '' }}>
                                            Support & Donations
                                        </option>
                                        <option value="admission" {{ old('reason') == 'admission' ? 'selected' : '' }}>
                                            Admission Inquiry
                                        </option>
                                        <option value="complaint" {{ old('reason') == 'complaint' ? 'selected' : '' }}>
                                            Complaint
                                        </option>
                                        <option value="feedback" {{ old('reason') == 'feedback' ? 'selected' : '' }}>
                                            Feedback
                                        </option>
                                        <option value="general" {{ old('reason') == 'general' ? 'selected' : '' }}>
                                            General Inquiry
                                        </option>
                                        <option value="other" {{ old('reason') == 'other' ? 'selected' : '' }}>
                                            Other
                                        </option>
                                    </select>
                                    @error('reason')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="subject">Subject</label>
                                    <input type="text" name="subject" id="subject" 
                                           class="form-control @error('subject') is-invalid @enderror" 
                                           value="{{ old('subject') }}">
                                    @error('subject')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="urgency">Priority Level</label>
                                    <select name="urgency" id="urgency" 
                                            class="form-control @error('urgency') is-invalid @enderror">
                                        <option value="medium" {{ old('urgency') == 'medium' ? 'selected' : '' }}>Medium</option>
                                        <option value="low" {{ old('urgency') == 'low' ? 'selected' : '' }}>Low</option>
                                        <option value="high" {{ old('urgency') == 'high' ? 'selected' : '' }}>High</option>
                                        <option value="urgent" {{ old('urgency') == 'urgent' ? 'selected' : '' }}>Urgent</option>
                                    </select>
                                    @error('urgency')
                                        <div class="invalid-feedback">{{ $message }}</div>
                                    @enderror
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="message">Your Message <span class="required">*</span></label>
                            <textarea name="message" id="message" rows="6" maxlength="2000"
                                      class="form-control @error('message') is-invalid @enderror" 
                                      required>{{ old('message') }}</textarea>
                            @error('message')
                                <div class="invalid-feedback">{{ $message }}</div>
                            @enderror
                        </div>

                        <div class="form-group text-center">
                            <button type="submit" class="btn btn-primary btn-lg submitbtn">
                                <i class="fas fa-paper-plane"></i> Send Message
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

{{-- Map Section --}}
<section id="map" class="mapsection">
    <div class="container">
        <div class="sectiontitle text-center">
            <h2>Find Us</h2>
            <div class="sectiondivider"></div>
            <p>Visit us at the IIUM Gombak Campus</p>
        </div>
        <div class="mapcontainer">
            <iframe 
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3983.7557133922336!2d101.72881931535646!3d3.2533985976583634!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31cc38c2f677344b%3A0xf436637f3a77624b!2sInternational%20Islamic%20University%20Malaysia!5e0!3m2!1sen!2smy!4v1647932990357!5m2!1sen!2smy" 
                width="100%" 
                height="450" 
                style="border:0;" 
                allowfullscreen="" 
                loading="lazy">
            </iframe>
        </div>
    </div>
</section>

{{-- Footer --}}
@include('layouts.footer')

{{-- Back to top button --}}
<a href="#" class="backtotop"><i class="fas fa-arrow-up"></i></a>

{{-- External JavaScript --}}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ asset('js/contact.js') }}"></script>
</body>
</html>

courseregistration.blade

<!-- courseregistration.blade.php -->

<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ asset('css/registrationstyle.css') }}">
    <link rel="shortcut icon" href="{{ asset('images/logo/favicon.png') }}" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <title>Activity Registration</title>
</head>

<body>
    <div class="logo">
        <a href="{{ route('home') }}">CREAMS</a>
    </div>
    <div class="box">
        <div class="container">
            <div class="title">
                <span>Activity Registration</span>
            </div>

            <form action="{{ route('courseregistration.submit') }}" method="post" enctype="multipart/form-data">
                @csrf
                <div class="field">
                    <label for="course_id">Activity ID</label>
                    <input type="text" name="course_id" id="course_id">
                </div>
                <div class="field">
                    <label for="course_type">Activity Type</label>
                    <select name="course_type" id="course_type">
                        <option value="">Select Course Type</option>
                        <option value="Occupational Therapy">Occupational Therapy</option>
                        <option value="Reading">Reading</option>
                        <option value="Speech Therapy">Speech Therapy</option>
                        <option value="Quranic Class">Quranic Class</option>
                        <option value="Independent Living">Independent Living</option>
                    </select>
                </div>

                <div class="field">
                    <label for="teacher_id">Teacher</label>
                    <select name="teacher_id" id="teacher_id">
                        <option value="">Select Teacher</option>
                        @foreach ($teachers as $teacherId => $teacherName)
                            <option value="{{ $teacherId }}">{{ $teacherName }}</option>
                        @endforeach
                    </select>
                </div>

                <div class="field">
                    <label for="participant_id">Participant</label>
                    <select name="participant_id" id="participant_id">
                        <option value="">Select Participant</option>
                        @foreach ($trainees as $traineeId => $traineeName)
                            <option value="{{ $traineeId }}">{{ $traineeName }}</option>
                        @endforeach
                    </select>
                </div>

                <div class="field">
                    <label for="course_day">Activity Day</label>
                    <select name="course_day" id="course_day">
                        <option value="">Select Course Day</option>
                        <option value="Monday">Monday</option>
                        <option value="Tuesday">Tuesday</option>
                        <option value="Wednesday">Wednesday</option>
                        <option value="Thursday">Thursday</option>
                        <option value="Friday">Friday</option>
                    </select>
                </div>

                <div class="field">
                    <label for="start_time">Activity Start Time</label>
                    <select name="start_time" id="start_time">
                        <option value="">Select Start Time</option>
                        <option value="10:00">10:00</option>
                        <option value="11:00">11:00</option>
                        <option value="12:00">12:00</option>
                        <option value="14:00">14:00</option>
                        <option value="15:00">15:00</option>
                    </select>
                </div>

                <div class="field">
                    <label for="end_time">Activity End Time</label>
                    <select name="end_time" id="end_time">
                        <option value="">Select End Time</option>
                        <option value="11:00">11:00</option>
                        <option value="12:00">12:00</option>
                        <option value="13:00">13:00</option>
                        <option value="15:00">15:00</option>
                        <option value="16:00">16:00</option>
                    </select>
                </div>

                <div class="field">
                    <label for="location_id">Location</label>
                    <select name="location_id" id="location_id">
                        <option value="">Select Location</option>
                        @foreach ($centres as $centerId => $centerName)
                            <option value="{{ $centerId }}">{{ $centerName }}</option>
                        @endforeach
                    </select>
                </div>

                <button type="submit" class="btn btn-primary">Register</button>
            </form>

        </div>
    </div>
</body>

</html>

dashboard.blade

@extends('layouts.app')

@section('title', ucfirst(session('role')) . ' Dashboard - CREAMS')

@section('styles')
<style>
    /* Dashboard-specific styles */
    .dashboard-header {
        margin-bottom: 20px;
    }
    
    .dashboard-title {
        font-size: 24px;
        font-weight: 600;
        margin-bottom: 5px;
        color: var(--dark-color);
    }
    
    .dashboard-subtitle {
        color: #6c757d;
        font-size: 14px;
    }
    
    .date-display {
        display: inline-flex;
        align-items: center;
        background: var(--light-color);
        border-radius: 20px;
        padding: 8px 15px;
        color: #6c757d;
        font-size: 14px;
    }
    
    .date-display i {
        margin-right: 8px;
    }
    
    /* Stats cards */
    .stats-card {
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 0 10px rgba(0,0,0,0.05);
        transition: all var(--transition-speed) ease;
        border-left: 4px solid transparent;
    }
    
    .stats-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .stats-icon {
        width: 50px;
        height: 50px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
    }
    
    /* Recent access card */
    .recent-access-card {
        border-radius: 10px;
        overflow: hidden;
        transition: all var(--transition-speed) ease;
    }
    
    .recent-access-header {
        background: var(--light-color);
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .recent-access-title {
        margin: 0;
        font-weight: 600;
    }
    
    .section-action {
        color: #6c757d;
        text-decoration: none;
        font-size: 13px;
        transition: all var(--transition-speed) ease;
    }
    
    .section-action:hover {
        color: var(--primary-color);
        text-decoration: none;
    }
    
    .recent-items {
        list-style: none;
        margin: 0;
        padding: 0;
    }
    
    .recent-item {
        border-bottom: 1px solid var(--border-color);
        transition: all var(--transition-speed) ease;
    }
    
    .recent-link {
        display: flex;
        align-items: center;
        padding: 10px 20px;
        color: #555;
        text-decoration: none;
    }
    
    .recent-link:hover {
        background-color: rgba(50, 189, 234, 0.05);
        color: #555;
        text-decoration: none;
    }
    
    .recent-icon {
        width: 40px;
        height: 40px;
        background: var(--light-color);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--primary-color);
        margin-right: 15px;
    }
    
    .recent-content {
        flex-grow: 1;
    }
    
    .recent-name {
        font-weight: 500;
        font-size: 14px;
        margin-bottom: 2px;
    }
    
    .recent-meta {
        color: #6c757d;
        font-size: 12px;
    }
    
    .recent-time {
        color: #6c757d;
        font-size: 12px;
        margin-left: 15px;
    }
    
    /* Rehab categories */
    .rehab-category {
        padding: 15px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: var(--light-color);
        transition: all var(--transition-speed) ease;
        margin-bottom: 10px;
    }
    
    .rehab-category:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    }
    
    .rehab-category-autism {
        background: linear-gradient(to right, rgba(79, 172, 254, 0.15), rgba(0, 242, 254, 0.15));
        border-left: 3px solid #4facfe;
    }
    
    .rehab-category-hearing {
        background: linear-gradient(to right, rgba(255, 154, 158, 0.15), rgba(250, 208, 196, 0.15));
        border-left: 3px solid #ff9a9e;
    }
    
    .rehab-category-visual {
        background: linear-gradient(to right, rgba(51, 204, 255, 0.15), rgba(0, 196, 154, 0.15));
        border-left: 3px solid #33ccff;
    }
    
    .rehab-category-physical {
        background: linear-gradient(to right, rgba(246, 211, 101, 0.15), rgba(253, 160, 133, 0.15));
        border-left: 3px solid #f6d365;
    }
    
    .rehab-category-learning {
        background: linear-gradient(to right, rgba(200, 80, 192, 0.15), rgba(65, 88, 208, 0.15));
        border-left: 3px solid #c850c0;
    }
    
    .rehab-category-speech {
        background: linear-gradient(to right, rgba(161, 140, 209, 0.15), rgba(251, 194, 235, 0.15));
        border-left: 3px solid #a18cd1;
    }
    
    .rehab-category-title {
        font-weight: 500;
        font-size: 14px;
    }
    
    .rehab-category-count {
        font-weight: 600;
        font-size: 18px;
        color: #555;
    }
    
    /* User table */
    .avatar-sm {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        overflow: hidden;
    }
    
    .avatar-sm img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
</style>
@endsection

@section('content')
<div class="container-fluid">
    <!-- Dashboard Header -->
    <div class="dashboard-header mb-4">
        <div class="row align-items-center">
            <div class="col">
                <h1 class="dashboard-title">{{ ucfirst(session('role')) }} Dashboard</h1>
                <p class="dashboard-subtitle">Welcome back! Here's an overview of your system.</p>
            </div>
            <div class="col-auto">
                <div class="date-display">
                    <i class="fas fa-calendar-alt"></i>
                    <span id="current-date">{{ date('l, F d, Y') }}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Last Accessed Section -->
    <div class="card recent-access-card mb-4">
        <div class="card-header recent-access-header">
            <h5 class="recent-access-title"><i class="fas fa-history"></i> Recent Activity</h5>
        </div>
        <div class="card-body recent-access-body p-0">
            @if(isset($lastAccessedData) && (!$lastAccessedData['system_activities']->isEmpty() || !$lastAccessedData['user_activities']->isEmpty()))
                <div class="p-3">
                    <p class="mb-2"><small class="text-muted">You last logged in: {{ $lastAccessedData['last_login'] ?? 'Unknown' }}</small></p>
                    
                    @if(!$lastAccessedData['user_activities']->isEmpty())
                        <h6 class="text-primary">Your Activity</h6>
                        <ul class="activity-list mb-3">
                            @foreach($lastAccessedData['user_activities'] as $activity)
                                <li class="activity-item">
                                    <span class="activity-icon"><i class="fas fa-user-clock"></i></span>
                                    <div class="activity-content">
                                        <div class="activity-title">
                                            <strong>{{ $activity['action'] }}</strong> {{ $activity['entity'] }} {{ $activity['timestamp'] }}
                                        </div>
                                        <div class="activity-details">
                                            {!! $activity['details'] ?? '' !!}
                                        </div>
                                    </div>
                                </li>
                            @endforeach
                        </ul>
                    @endif
                    
                    @if(!$lastAccessedData['system_activities']->isEmpty())
                        <h6 class="text-primary">System Activity</h6>
                        <ul class="activity-list">
                            @foreach($lastAccessedData['system_activities'] as $activity)
                                <li class="activity-item">
                                    <span class="activity-icon"><i class="fas fa-users-cog"></i></span>
                                    <div class="activity-content">
                                        <div class="activity-title">
                                            <strong>{{ $activity['user'] }}</strong> {{ $activity['action'] }} {{ $activity['entity'] }} {{ $activity['timestamp'] }}
                                        </div>
                                        <div class="activity-details">
                                            {!! $activity['details'] ?? '' !!}
                                        </div>
                                    </div>
                                </li>
                            @endforeach
                        </ul>
                    @endif
                </div>
            @else
                <div class="p-4 text-center">
                    <div class="empty-state">
                        <i class="fas fa-history fa-3x text-muted mb-3"></i>
                        <p>No recent activity data available</p>
                    </div>
                </div>
            @endif
        </div>
    </div>

    <!-- Main Content - Three Column Layout -->
    <div class="row">
        <!-- Left Column - Staff Management -->
        <div class="col-lg-4">
            <div class="card mb-4">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="m-0 font-weight-bold text-primary">
                        <i class="fas fa-users mr-1"></i> Staff Management
                    </h5>
                    @php
                        $role = session('role');
                        $staffUrl = '';
                        
                        // Use proper route checking to avoid 404 errors
                        if (Route::has($role . '.users')) {
                            $staffUrl = route($role . '.users');
                        } elseif (Route::has('users')) {
                            $staffUrl = route('users');
                        } else {
                            $staffUrl = route('dashboard');
                        }
                    @endphp
                    <a href="{{ $staffUrl }}" class="btn btn-sm btn-primary">
                        View All
                    </a>
                </div>
                <div class="card-body">
                    <div class="row">
                        @foreach($data['stats'] as $index => $stat)
                            @if(in_array($stat['title'], ['Supervisors', 'Teachers', 'AJKs', 'Total Users']))
                                <div class="col-6 mb-4">
                                    <div class="card h-100 stats-card">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center mb-3">
                                                <div class="stats-icon mr-3 p-3 rounded" style="background: linear-gradient(135deg, var(--primary-color-{{ $index }}, #4e73df), var(--secondary-color-{{ $index }}, #224abe)); color: white;">
                                                    <i class="fas fa-{{ $stat['icon'] }}"></i>
                                                </div>
                                                <div>
                                                    <h6 class="mb-0">{{ $stat['title'] }}</h6>
                                                    <small class="text-muted">{{ $stat['change'] }}</small>
                                                </div>
                                            </div>
                                            <h3 class="mb-0">{{ $stat['value'] }}</h3>
                                        </div>
                                    </div>
                                </div>
                            @endif
                        @endforeach
                    </div>

                    <!-- Recent Users Table -->
                    @if(isset($data['userManagement']))
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Recent Users</h5>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Role</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach($data['userManagement']['recentUsers'] as $user)
                                            <tr>
                                                <td>
                                                    <div class="d-flex align-items-center">
                                                        <div class="avatar-sm mr-2">
                                                            <img src="{{ $user->profile_picture ?? asset('images/default-avatar.png') }}" alt="Profile" class="rounded-circle">
                                                        </div>
                                                        {{ $user->name }}
                                                    </div>
                                                </td>
                                                <td><span class="badge badge-info">{{ ucfirst($user->role) }}</span></td>
                                                <td>
                                                    @if($user->status === 'active')
                                                        <span class="badge badge-success">Active</span>
                                                    @else
                                                        <span class="badge badge-secondary">Inactive</span>
                                                    @endif
                                                </td>
                                                <td>
                                                    @php
                                                        $viewerRole = session('role');
                                                        $userRole = $user->role;
                                                        $userUrl = '#';
                                                        
                                                        // Determine the correct route based on roles
                                                        if (Route::has("{$viewerRole}.user.view")) {
                                                            $userUrl = route("{$viewerRole}.user.view", ['id' => $user->id]);
                                                        } elseif ($userRole == 'teacher' && Route::has("{$viewerRole}.teacher.view")) {
                                                            $userUrl = route("{$viewerRole}.teacher.view", ['id' => $user->id]);
                                                        } elseif (Route::has('users')) {
                                                            $userUrl = route('users');
                                                        } else {
                                                            $userUrl = route('dashboard');
                                                        }
                                                    @endphp
                                                    <a href="{{ $userUrl }}" class="btn btn-sm btn-primary user-action" data-id="{{ $user->id }}" data-role="{{ $user->role }}">View</a>
                                                </td>
                                            </tr>
                                        @endforeach
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    @endif
                </div>
            </div>
        </div>
        
        <!-- Middle Column - Trainee Management -->
        <div class="col-lg-4">
            <div class="card mb-4">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="m-0 font-weight-bold text-primary">
                        <i class="fas fa-user-graduate mr-1"></i> Trainee Management
                    </h5>
                    <a href="{{ route('traineeshome') }}" class="btn btn-sm btn-primary">
                        View All
                    </a>
                </div>
                <div class="card-body">
                    <!-- Trainee Stats -->
                    <div class="row">
                        <div class="col-6 mb-4">
                            <div class="card h-100 stats-card">
                                <div class="card-body">
                                    <div class="d-flex align-items-center mb-3">
                                        <div class="stats-icon mr-3 p-3 rounded" style="background: linear-gradient(135deg, #00c49a, #00e676); color: white;">
                                            <i class="fas fa-user-graduate"></i>
                                        </div>
                                        <div>
                                            <h6 class="mb-0">Total Trainees</h6>
                                            <small class="text-muted">Active enrollment</small>
                                        </div>
                                    </div>
                                    <h3 class="mb-0">{{ $traineeStats['total'] ?? 124 }}</h3>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-6 mb-4">
                            <div class="card h-100 stats-card">
                                <div class="card-body">
                                    <div class="d-flex align-items-center mb-3">
                                        <div class="stats-icon mr-3 p-3 rounded" style="background: linear-gradient(135deg, #4facfe, #00f2fe); color: white;">
                                            <i class="fas fa-clipboard-check"></i>
                                        </div>
                                        <div>
                                            <h6 class="mb-0">Attendance</h6>
                                            <small class="text-muted">Last 30 days avg</small>
                                        </div>
                                    </div>
                                    <h3 class="mb-0">{{ $traineeStats['attendance'] ?? '85%' }}</h3>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Rehabilitation Categories Card -->
                    <div class="card mb-4">
                        <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-primary">Rehabilitation Categories</h6>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <div class="rehab-category rehab-category-autism">
                                        <div class="rehab-category-title">Autism Spectrum Disorder</div>
                                        <div class="rehab-category-count">{{ $rehabStats['autism'] ?? 12 }}</div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <div class="rehab-category rehab-category-hearing">
                                        <div class="rehab-category-title">Hearing Impairment</div>
                                        <div class="rehab-category-count">{{ $rehabStats['hearing'] ?? 8 }}</div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <div class="rehab-category rehab-category-visual">
                                        <div class="rehab-category-title">Visual Impairment</div>
                                        <div class="rehab-category-count">{{ $rehabStats['visual'] ?? 5 }}</div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <div class="rehab-category rehab-category-physical">
                                        <div class="rehab-category-title">Physical Disability</div>
                                        <div class="rehab-category-count">{{ $rehabStats['physical'] ?? 15 }}</div>
                                    </div>
                                </div>
                            </div>
                            <a href="{{ route('rehabilitation.categories') }}" class="btn btn-sm btn-primary">View All Categories</a>
                        </div>
                    </div>
                    
                    <!-- Recent Activities -->
                    <div class="card mt-3">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Recent Activities</h5>
                            <a href="{{ route('activities.index') }}" class="btn btn-sm btn-outline-primary">View All</a>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Activity</th>
                                        <th>Date</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @if(isset($recentActivities) && count($recentActivities) > 0)
                                        @foreach($recentActivities as $activity)
                                            <tr class="activity-row" data-id="{{ $activity->id }}">
                                                <td>{{ $activity->name }}</td>
                                                <td>{{ $activity->date->format('M d, Y') }}</td>
                                                <td>
                                                    <span class="badge badge-{{ $activity->status_color }}">
                                                        {{ ucfirst($activity->status) }}
                                                    </span>
                                                </td>
                                            </tr>
                                        @endforeach
                                    @else
                                        <tr>
                                            <td colspan="3" class="text-center">No recent activities</td>
                                        </tr>
                                    @endif
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Right Column - center Management -->
        <div class="col-lg-4">
            <div class="card mb-4">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="m-0 font-weight-bold text-primary">
                        <i class="fas fa-building mr-1"></i> Centre Management
                    </h5>
                    @php
                        $role = session('role');
                        $centersUrl = '';
                        
                        // Use proper route checking to avoid 404 errors
                        if (Route::has($role . '.centers')) {
                            $centersUrl = route($role . '.centers');
                        } elseif (Route::has('centers')) {
                            $centersUrl = route('centers');
                        } else {
                            $centersUrl = route('dashboard');
                        }
                    @endphp
                    <a href="{{ $centersUrl }}" class="btn btn-sm btn-primary">
                        View All
                    </a>
                </div>
                <div class="card-body">
                    <!-- Add center statistics and charts here -->
                    <div class="row">
                        <div class="col-12 mb-4">
                            <div class="card border-left-info shadow h-100 py-2">
                                <div class="card-body">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                                                Centre Capacity
                                            </div>
                                            <div class="row no-gutters align-items-center">
                                                <div class="col-auto">
                                                    <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800">73%</div>
                                                </div>
                                                <div class="col">
                                                    <div class="progress progress-sm mr-2">
                                                        <div class="progress-bar bg-info" role="progressbar" style="width: 73%" aria-valuenow="73" aria-valuemin="0" aria-valuemax="100"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-clipboard-list fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Assets Overview -->
                    <div class="card asset-management-section">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0"><i class="fas fa-boxes"></i> Assets Overview</h5>
                            @php
                                $role = session('role');
                                $assetsUrl = '';
                                
                                // Use proper route checking to avoid 404 errors
                                if (Route::has($role . '.assets')) {
                                    $assetsUrl = route($role . '.assets');
                                } elseif (Route::has('assets')) {
                                    $assetsUrl = route('assets');
                                } else {
                                    $assetsUrl = route('dashboard');
                                }
                            @endphp
                            <a href="{{ $assetsUrl }}" class="btn btn-sm btn-outline-primary">View All</a>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Asset Name</th>
                                        <th>Centre</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @if(isset($recentAssets) && count($recentAssets) > 0)
                                        @foreach($recentAssets as $asset)
                                            <tr class="asset-row" data-id="{{ $asset->id }}">
                                                <td>{{ $asset->name }}</td>
                                                {{ $item->center_name ?? $item->centre_name ?? 'Center Name' }}
                                                <td>
                                                    @if($asset->quantity > 10)
                                                        <span class="badge badge-success">In Stock</span>
                                                    @elseif($asset->quantity > 0)
                                                        <span class="badge badge-warning">Low Stock</span>
                                                    @else
                                                        <span class="badge badge-danger">Out of Stock</span>
                                                    @endif
                                                </td>
                                            </tr>
                                        @endforeach
                                    @else
                                        <tr>
                                            <td colspan="3" class="text-center">
                                                <span class="text-muted">Asset data unavailable</span>
                                            </td>
                                        </tr>
                                    @endif
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Quick Links -->
                    <div class="card mt-4">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="fas fa-link"></i> Quick Links</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-6 mb-2">
                                    <a href="{{ route('traineesregistrationpage') }}" class="btn btn-outline-primary btn-block">
                                        <i class="fas fa-user-plus"></i> Add Trainee
                                    </a>
                                </div>
                                <div class="col-6 mb-2">
                                    <a href="{{ route('rehabilitation.categories') }}" class="btn btn-outline-success btn-block">
                                        <i class="fas fa-heartbeat"></i> Activities
                                    </a>
                                </div>
                                <div class="col-6 mb-2">
                                    @php
                                        $role = session('role');
                                        $reportsUrl = '';
                                        
                                        // Use proper route checking to avoid 404 errors
                                        if (Route::has($role . '.reports')) {
                                            $reportsUrl = route($role . '.reports');
                                        } else {
                                            $reportsUrl = route('dashboard');
                                        }
                                    @endphp
                                    <a href="{{ $reportsUrl }}" class="btn btn-outline-info btn-block">
                                        <i class="fas fa-chart-bar"></i> Reports
                                    </a>
                                </div>
                                <div class="col-6 mb-2">
                                    @php
                                        $role = session('role');
                                        $settingsUrl = '';
                                        
                                        // Use proper route checking to avoid 404 errors
                                        if (Route::has($role . '.settings')) {
                                            $settingsUrl = route($role . '.settings');
                                        } else {
                                            $settingsUrl = route('dashboard');
                                        }
                                    @endphp
                                    <a href="{{ $settingsUrl }}" class="btn btn-outline-secondary btn-block">
                                        <i class="fas fa-cog"></i> Settings
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection

@section('scripts')
<script>
$(document).ready(function() {
    // Set CSS variables for consistent styling
    document.documentElement.style.setProperty('--primary-color-0', '#32bdea');
    document.documentElement.style.setProperty('--secondary-color-0', '#25a6cf');
    document.documentElement.style.setProperty('--primary-color-1', '#1cc88a');
    document.documentElement.style.setProperty('--secondary-color-1', '#169a6b');
    document.documentElement.style.setProperty('--primary-color-2', '#36b9cc');
    document.documentElement.style.setProperty('--secondary-color-2', '#258391');
    document.documentElement.style.setProperty('--primary-color-3', '#f6c23e');
    document.documentElement.style.setProperty('--secondary-color-3', '#dda20a');

    // Display current date
    const now = new Date();
    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    $('#current-date').text(now.toLocaleDateString('en-US', options));

    // Add click handlers for staff users
    $('.user-action').click(function(e) {
        e.preventDefault();
        const userId = $(this).data('id');
        const userRole = $(this).data('role') || 'user';
        const userName = $(this).closest('tr').find('td:first-child').text().trim();
        
        // Get the href attribute from the anchor
        const userUrl = $(this).attr('href');
        
        // Track this user access
        window.trackDetailedItem(userName, userUrl, 'User');
        
        // Navigate to the URL
        window.location.href = userUrl;
    });
    
    // Track trainee clicks
    $('.activity-row').click(function(e) {
        const activityId = $(this).data('id');
        const activityName = $(this).find('td:first-child').text().trim();
        
        // Create URL based on the current role
        const role = "{{ session('role') }}";
        let activityUrl = '';
        
        // Try role-specific URL first
        if (typeof routeExists === 'function' && routeExists(role + '.activity.view')) {
            activityUrl = '/' + role + '/activity/view/' + activityId;
        } else {
            // Fall back to common route
            activityUrl = '/activities/' + activityId;
        }
        
        // Track this activity access
        window.trackDetailedItem(activityName, activityUrl, 'Activity');
        
        // Redirect to activity page
        window.location.href = activityUrl;
    });
    
    // Track asset clicks
    $('.asset-row').click(function(e) {
        const assetId = $(this).data('id');
        const assetName = $(this).find('td:first-child').text().trim();
        
        // Create URL based on the current role
        const role = "{{ session('role') }}";
        let assetUrl = '';
        
        // Try role-specific URL first
        if (typeof routeExists === 'function' && routeExists(role + '.asset.view')) {
            assetUrl = '/' + role + '/asset/view/' + assetId;
        } else {
            // Fall back to common route
            assetUrl = '/assets/' + assetId;
        }
        
        // Track this asset access
        window.trackDetailedItem(assetName, assetUrl, 'Asset');
        
        // Redirect to asset page
        window.location.href = assetUrl;
    });
    
    // Animate rehab categories
    $('.rehab-category').each(function(index) {
        const category = $(this);
        setTimeout(function() {
            category.addClass('animated fadeInUp');
        }, index * 100);
    });
    
    // Track category clicks
    $('.rehab-category').click(function() {
        const categoryName = $(this).find('.rehab-category-title').text();
        const categoryType = categoryName.toLowerCase().replace(/\s+/g, '-');
        const categoryUrl = '/rehabilitation/categories/' + categoryType;
        
        // Track this category access
        window.trackDetailedItem(categoryName, categoryUrl, 'Rehabilitation Category');
        
        // Redirect to category page
        window.location.href = categoryUrl;
    });

    // Helper function to check if a route exists
    window.routeExists = function(routeName) {
        return false; // This would normally be determined server-side
    };
});
</script>
@endsection

messagecreate.blade

@extends('layouts.app')

@section('title', 'Compose Message - CREAMS')

@section('styles')
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" />
<style>
    .compose-container {
        background: var(--light-color);
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        overflow: hidden;
        margin-bottom: 20px;
    }
    
    .compose-header {
        padding: 20px;
        border-bottom: 1px solid var(--border-color);
        background-color: var(--light-bg);
        display: flex;
        align-items: center;
        gap: 15px;
    }
    
    .compose-icon {
        width: 40px;
        height: 40px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        color: var(--light-color);
        background: linear-gradient(135deg, var(--primary-color), #00d2ff);
    }
    
    .compose-title {
        font-size: 20px;
        font-weight: 600;
        color: var(--dark-color);
        margin-bottom: 0;
    }
    
    .compose-content {
        padding: 20px;
    }
    
    .recipient-type-tabs {
        display: flex;
        margin-bottom: 15px;
        border-bottom: 1px solid var(--border-color);
    }
    
    .recipient-type-tab {
        padding: 10px 15px;
        font-size: 14px;
        font-weight: 500;
        color: #666;
        cursor: pointer;
        position: relative;
        transition: all var(--transition-speed) ease;
    }
    
    .recipient-type-tab:hover {
        color: var(--primary-color);
    }
    
    .recipient-type-tab.active {
        color: var(--primary-color);
    }
    
    .recipient-type-tab.active::after {
        content: '';
        position: absolute;
        bottom: -1px;
        left: 0;
        width: 100%;
        height: 2px;
        background: var(--primary-color);
    }
    
    .recipient-type-content {
        display: none;
    }
    
    .recipient-type-content.active {
        display: block;
    }
    
    .form-actions {
        display: flex;
        justify-content: space-between;
        margin-top: 20px;
    }
    
    .select2-container--default .select2-selection--single {
        height: 44px;
        padding: 8px;
        border-radius: 8px;
        border: 1px solid var(--border-color);
    }
    
    .select2-container--default .select2-selection--single .select2-selection__arrow {
        height: 42px;
    }
    
    .tips-container {
        background: var(--light-color);
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        padding: 20px;
        margin-top: 20px;
    }
    
    .tips-title {
        font-size: 16px;
        font-weight: 600;
        color: var(--dark-color);
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--border-color);
    }
    
    .tips-list {
        list-style-type: none;
        padding: 0;
        margin: 0;
    }
    
    .tips-list li {
        display: flex;
        align-items: flex-start;
        gap: 10px;
        margin-bottom: 10px;
        font-size: 14px;
        color: var(--text-color);
    }
    
    .tips-list li i {
        color: var(--primary-color);
        margin-top: 3px;
    }
    
    @media (max-width: 768px) {
        .form-actions {
            flex-direction: column;
            gap: 10px;
        }
        
        .form-actions .btn {
            width: 100%;
        }
    }
</style>
@endsection

@section('content')
<div class="container-fluid">
    <!-- Page Header -->
    <div class="dashboard-header mb-4">
        <div class="row align-items-center">
            <div class="col">
                <h1 class="dashboard-title">Compose New Message</h1>
                <div class="breadcrumb">
                    <a href="{{ route('dashboard') }}">Dashboard</a>
                    <span class="separator">/</span>
                    <a href="{{ route('messages.index') }}">Messages</a>
                    <span class="separator">/</span>
                    <span class="current">Compose</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="compose-container">
        <div class="compose-header">
            <div class="compose-icon">
                <i class="fas fa-pen-to-square"></i>
            </div>
            <h2 class="compose-title">Compose New Message</h2>
        </div>
        
        <div class="compose-content">
            <form action="{{ route('messages.store') }}" method="POST">
                @csrf
                
                <div class="recipient-type-tabs">
                    <div class="recipient-type-tab active" data-tab="admin">Administrators</div>
                    <div class="recipient-type-tab" data-tab="supervisor">Supervisors</div>
                    <div class="recipient-type-tab" data-tab="teacher">Teachers</div>
                    <div class="recipient-type-tab" data-tab="ajk">AJKs</div>
                </div>
                
                <div class="form-group">
                    <label for="recipient">Select Recipient</label>
                    <input type="hidden" name="recipient_type" id="recipient_type" value="admin">
                    
                    <div class="recipient-type-content active" id="admin-tab">
                        <select class="form-control recipient-select" id="admin-select" name="recipient_id">
                            <option value="">Select Administrator</option>
                            @foreach($admins as $admin)
                                <option value="{{ $admin->id }}">{{ $admin->name }} ({{ $admin->email }})</option>
                            @endforeach
                        </select>
                    </div>
                    
                    <div class="recipient-type-content" id="supervisor-tab">
                        <select class="form-control recipient-select" id="supervisor-select">
                            <option value="">Select Supervisor</option>
                            @foreach($supervisors as $supervisor)
                                <option value="{{ $supervisor->id }}">{{ $supervisor->name }} ({{ $supervisor->email }})</option>
                            @endforeach
                        </select>
                    </div>
                    
                    <div class="recipient-type-content" id="teacher-tab">
                        <select class="form-control recipient-select" id="teacher-select">
                            <option value="">Select Teacher</option>
                            @foreach($teachers as $teacher)
                                <option value="{{ $teacher->id }}">{{ $teacher->name }} ({{ $teacher->email }})</option>
                            @endforeach
                        </select>
                    </div>
                    
                    <div class="recipient-type-content" id="ajk-tab">
                        <select class="form-control recipient-select" id="ajk-select">
                            <option value="">Select AJK</option>
                            @foreach($ajks as $ajk)
                                <option value="{{ $ajk->id }}">{{ $ajk->name }} ({{ $ajk->email }})</option>
                            @endforeach
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="subject">Subject</label>
                    <input type="text" class="form-control" id="subject" name="subject" required>
                </div>
                
                <div class="form-group">
                    <label for="content">Message</label>
                    <textarea class="form-control" id="content" name="content" rows="6" required></textarea>
                </div>
                
                <div class="form-actions">
                    <a href="{{ route('messages.index') }}" class="btn btn-outline-secondary">
                        <i class="fas fa-times"></i> Cancel
                    </a>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-paper-plane"></i> Send Message
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <div class="tips-container">
        <h3 class="tips-title">Messaging Tips</h3>
        <ul class="tips-list">
            <li>
                <i class="fas fa-info-circle"></i>
                <span>Be clear and concise in your message to ensure effective communication.</span>
            </li>
            <li>
                <i class="fas fa-info-circle"></i>
                <span>Use a descriptive subject line that briefly summarizes the purpose of your message.</span>
            </li>
            <li>
                <i class="fas fa-info-circle"></i>
                <span>Administrators handle system-wide issues, Supervisors manage centres, and Teachers work directly with trainees.</span>
            </li>
            <li>
                <i class="fas fa-info-circle"></i>
                <span>For urgent matters, consider following up with direct communication after sending your message.</span>
            </li>
        </ul>
    </div>
</div>
@endsection

@section('scripts')
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script>
    $(document).ready(function() {
        // Initialize Select2
        $('.recipient-select').select2({
            placeholder: "Select a recipient",
            width: '100%'
        });
        
        // Handle recipient type tab switching
        $('.recipient-type-tab').click(function() {
            // Update tabs
            $('.recipient-type-tab').removeClass('active');
            $(this).addClass('active');
            
            // Update content
            const tabId = $(this).data('tab');
            $('.recipient-type-content').removeClass('active');
            $(`#${tabId}-tab`).addClass('active');
            
            // Update hidden input for recipient type
            $('#recipient_type').val(tabId);
            
            // Update form to use the correct select
            $('.recipient-select').removeAttr('name');
            $(`#${tabId}-select`).attr('name', 'recipient_id');
        });
        
        // Form validation
        $('form').submit(function(e) {
            const recipientType = $('#recipient_type').val();
            const recipientId = $(`#${recipientType}-select`).val();
            
            if (!recipientId) {
                e.preventDefault();
                alert('Please select a recipient');
                return false;
            }
            
            const subject = $('#subject').val().trim();
            if (!subject) {
                e.preventDefault();
                alert('Please enter a subject');
                $('#subject').focus();
                return false;
            }
            
            const content = $('#content').val().trim();
            if (!content) {
                e.preventDefault();
                alert('Please enter a message');
                $('#content').focus();
                return false;
            }
            
            return true;
        });
    });
</script>
@endsection

messageindex.blade

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Messages - CREAMS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="{{ asset('images/favicon.png') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ asset('css/dashboardstyle.css') }}">
    <style>
        :root {
            --primary-color: #32bdea;
            --secondary-color: #c850c0;
            --supervisor-color: #4facfe;
            --teacher-color: #00c49a;
            --ajk-color: #f9a825;
            --success-color: #2ed573;
            --danger-color: #ff4757;
            --warning-color: #ffa502;
            --dark-color: #1a2a3a;
            --light-color: #ffffff;
            --text-color: #444444;
            --light-bg: #f8f9fa;
            --border-color: #e9ecef;
            --header-height: 70px;
            --footer-height: 60px;
            --transition-speed: 0.3s;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        
        body {
            background-color: var(--light-bg);
            color: var(--text-color);
        }
        
        .content-section {
            padding: 20px;
        }
        
        .header {
            background-color: var(--light-color);
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            min-height: var(--header-height);
            border-bottom: 1px solid var(--border-color);
        }
        
        .page-info {
            display: flex;
            flex-direction: column;
        }
        
        .page-title {
            font-size: 24px;
            font-weight: 700;
            margin: 0;
            background-image: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
        }
        
        .breadcrumb {
            display: flex;
            align-items: center;
            font-size: 14px;
            margin: 0;
            padding: 0;
            background: none;
        }
        
        .breadcrumb a {
            color: var(--primary-color);
            text-decoration: none;
            transition: color var(--transition-speed) ease;
        }
        
        .breadcrumb a:hover {
            color: var(--secondary-color);
        }
        
        .separator {
            margin: 0 8px;
            color: #ccc;
        }
        
        .current {
            color: #888;
        }
        
        .header-actions {
            display: flex;
            align-items: center;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
        }
        
        .action-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            border-radius: 8px;
            background: var(--light-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            text-decoration: none;
        }
        
        .action-btn:hover {
            background: rgba(50, 189, 234, 0.1);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
        
        .action-btn.primary {
            background: var(--primary-color);
            color: var(--light-color);
            border-color: var(--primary-color);
        }
        
        .action-btn.primary:hover {
            background: var(--primary-color);
            opacity: 0.9;
        }
        
        .messages-container {
            background: var(--light-color);
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }
        
        .messages-tabs {
            display: flex;
            background: var(--light-bg);
            border-bottom: 1px solid var(--border-color);
            padding: 0 20px;
        }
        
        .tab-btn {
            padding: 15px 20px;
            font-size: 15px;
            font-weight: 600;
            color: #888;
            border: none;
            background: none;
            cursor: pointer;
            position: relative;
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tab-btn:hover {
            color: var(--primary-color);
        }
        
        .tab-btn.active {
            color: var(--primary-color);
        }
        
        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary-color);
            border-top-left-radius: 3px;
            border-top-right-radius: 3px;
        }
        
        .badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            font-size: 12px;
            font-weight: 700;
            color: var(--light-color);
            background: var(--primary-color);
        }
        
        .tab-content {
            position: relative;
        }
        
        .tab-pane {
            display: none;
        }
        
        .tab-pane.active {
            display: block;
        }
        
        .message-list {
            display: flex;
            flex-direction: column;
        }
        
        .message-item {
            display: flex;
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .message-item:hover {
            background: var(--light-bg);
        }
        
        .message-item.unread {
            background: rgba(50, 189, 234, 0.05);
        }
        
        .message-item.unread .message-subject {
            font-weight: 700;
        }
        
        .message-sender, .message-recipient {
            width: 200px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .user-avatar.small {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            overflow: hidden;
        }
        
        .user-avatar.small img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .sender-info, .recipient-info {
            display: flex;
            flex-direction: column;
        }
        
        .sender-name, .recipient-name {
            font-weight: 600;
            color: var(--dark-color);
            font-size: 14px;
        }
        
        .sender-role, .recipient-role {
            font-size: 12px;
            color: #888;
        }
        
        .message-preview {
            flex: 1;
            padding: 0 20px;
        }
        
        .message-subject {
            font-size: 15px;
            color: var(--dark-color);
            margin-bottom: 5px;
        }
        
        .message-excerpt {
            font-size: 13px;
            color: #777;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .message-meta {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 5px;
            min-width: 120px;
        }
        
        .message-time {
            font-size: 12px;
            color: #888;
        }
        
        .message-status {
            margin-bottom: 5px;
        }
        
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-badge.read {
            background: rgba(46, 213, 115, 0.15);
            color: var(--success-color);
        }
        
        .status-badge.unread {
            background: rgba(255, 165, 2, 0.15);
            color: var(--warning-color);
        }
        
        .message-actions {
            display: flex;
            gap: 5px;
        }
        
        .btn-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            border: none;
            background: var(--light-bg);
            color: #777;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }
        
        .btn-icon:hover {
            background: rgba(50, 189, 234, 0.15);
            color: var(--primary-color);
        }
        
        .btn-icon.text-danger:hover {
            background: rgba(255, 71, 87, 0.15);
            color: var(--danger-color);
        }
        
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 50px 20px;
            text-align: center;
        }
        
        .empty-icon {
            font-size: 60px;
            color: #e0e0e0;
            margin-bottom: 20px;
        }
        
        .empty-state h3 {
            font-size: 20px;
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 10px;
        }
        
        .empty-state p {
            font-size: 14px;
            color: #888;
            max-width: 400px;
        }
        
        .pagination-container {
            padding: 20px;
            display: flex;
            justify-content: center;
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .message-sender, .message-recipient {
                width: 150px;
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .action-buttons {
                width: 100%;
                justify-content: space-between;
            }
            
            .message-item {
                flex-direction: column;
                gap: 10px;
            }
            
            .message-sender, .message-recipient {
                width: 100%;
            }
            
            .message-preview {
                padding: 0;
            }
            
            .message-meta {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
                width: 100%;
            }
        }
        
        @media (max-width: 576px) {
            .action-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .action-btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar (Include your sidebar here) -->
    
    <!-- Main Content -->
    <div class="main-content">
        <div class="content-section">
            <div class="header">
                <div class="header-content">
                    <div class="page-info">
                        <h1 class="page-title">Messages</h1>
                        <div class="breadcrumb">
                            <a href="{{ route(session('role') . '.dashboard') }}">Dashboard</a>
                            <span class="separator">/</span>
                            <span class="current">Messages</span>
                        </div>
                    </div>
                    
                    <div class="header-actions">
                        <div class="action-buttons">
                            <a href="{{ route('messages.create') }}" class="action-btn primary">
                                <i class="fas fa-plus"></i> Compose New Message
                            </a>
                            <button class="action-btn" id="refreshMessages">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                            <button class="action-btn" id="markAllRead">
                                <i class="fas fa-check-double"></i> Mark All Read
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="messages-container">
                <div class="messages-tabs">
                    <button class="tab-btn active" data-tab="inbox">
                        <i class="fas fa-inbox"></i> Inbox
                        @if($unreadCount > 0)
                            <span class="badge badge-primary">{{ $unreadCount }}</span>
                        @endif
                    </button>
                    <button class="tab-btn" data-tab="sent">
                        <i class="fas fa-paper-plane"></i> Sent
                    </button>
                </div>
                
                <div class="tab-content">
                    <div class="tab-pane active" id="inbox-tab">
                        @if($inbox->isEmpty())
                            <div class="empty-state">
                                <div class="empty-icon">
                                    <i class="fas fa-inbox"></i>
                                </div>
                                <h3>Your inbox is empty</h3>
                                <p>You don't have any messages yet. When you receive messages, they will appear here.</p>
                            </div>
                        @else
                            <div class="message-list">
                                @foreach($inbox as $message)
                                    <div class="message-item {{ $message->read ? '' : 'unread' }}" data-id="{{ $message->id }}">
                                        <div class="message-sender">
                                            <div class="user-avatar small">
                                                @php
                                                    $avatar = 'images/default-avatar.png';
                                                    if ($message->sender_type === 'admin') {
                                                        $user = \App\Models\Admins::find($message->sender_id);
                                                    } elseif ($message->sender_type === 'supervisor') {
                                                        $user = \App\Models\Supervisors::find($message->sender_id);
                                                    } elseif ($message->sender_type === 'teacher') {
                                                        $user = \App\Models\Teachers::find($message->sender_id);
                                                    } elseif ($message->sender_type === 'ajk') {
                                                        $user = \App\Models\AJKs::find($message->sender_id);
                                                    }
                                                    
                                                    if ($user && $user->avatar) {
                                                        $avatar = 'storage/avatars/' . $user->avatar;
                                                    }
                                                @endphp
                                                <img src="{{ asset($avatar) }}" alt="Sender">
                                            </div>
                                            <div class="sender-info">
                                                <div class="sender-name">{{ $message->sender_name }}</div>
                                                <div class="sender-role">{{ ucfirst($message->sender_type) }}</div>
                                            </div>
                                        </div>
                                        <div class="message-preview">
                                            <div class="message-subject">{{ $message->subject }}</div>
                                            <div class="message-excerpt">{{ \Illuminate\Support\Str::limit(strip_tags($message->content), 100) }}</div>
                                        </div>
                                        <div class="message-meta">
                                            <div class="message-time">{{ $message->created_at->diffForHumans() }}</div>
                                            <div class="message-actions">
                                                <a href="{{ route('messages.show', $message->id) }}" class="btn-icon" title="View">
                                                    <i class="fas fa-eye"></i>
                                                </a>
                                                <a href="{{ route('messages.reply', $message->id) }}" class="btn-icon" title="Reply">
                                                    <i class="fas fa-reply"></i>
                                                </a>
                                                @if(!$message->read)
                                                    <form action="{{ route('messages.mark-read', $message->id) }}" method="POST" class="d-inline">
                                                        @csrf
                                                        <button type="submit" class="btn-icon" title="Mark as Read">
                                                            <i class="fas fa-check"></i>
                                                        </button>
                                                    </form>
                                                @endif
                                                <form action="{{ route('messages.destroy', $message->id) }}" method="POST" class="d-inline delete-form">
                                                    @csrf
                                                    @method('DELETE')
                                                    <button type="submit" class="btn-icon text-danger" title="Delete">
                                                        <i class="fas fa-trash-alt"></i>
                                                    </button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                @endforeach
                            </div>
                            
                            <div class="pagination-container">
                                {{ $inbox->appends(['sent_page' => $sent->currentPage()])->links() }}
                            </div>
                        @endif
                    </div>
                    
                    <div class="tab-pane" id="sent-tab">
                        @if($sent->isEmpty())
                            <div class="empty-state">
                                <div class="empty-icon">
                                    <i class="fas fa-paper-plane"></i>
                                </div>
                                <h3>No sent messages</h3>
                                <p>You haven't sent any messages yet. When you send messages, they will appear here.</p>
                            </div>
                        @else
                            <div class="message-list">
                                @foreach($sent as $message)
                                    <div class="message-item" data-id="{{ $message->id }}">
                                        <div class="message-recipient">
                                            <div class="user-avatar small">
                                                @php
                                                    $avatar = 'images/default-avatar.png';
                                                    if ($message->recipient_type === 'admin') {
                                                        $user = \App\Models\Admins::find($message->recipient_id);
                                                    } elseif ($message->recipient_type === 'supervisor') {
                                                        $user = \App\Models\Supervisors::find($message->recipient_id);
                                                    } elseif ($message->recipient_type === 'teacher') {
                                                        $user = \App\Models\Teachers::find($message->recipient_id);
                                                    } elseif ($message->recipient_type === 'ajk') {
                                                        $user = \App\Models\AJKs::find($message->recipient_id);
                                                    }
                                                    
                                                    if ($user && $user->avatar) {
                                                        $avatar = 'storage/avatars/' . $user->avatar;
                                                    }
                                                @endphp
                                                <img src="{{ asset($avatar) }}" alt="Recipient">
                                            </div>
                                            <div class="recipient-info">
                                                <div class="recipient-name">{{ $message->recipient_name }}</div>
                                                <div class="recipient-role">{{ ucfirst($message->recipient_type) }}</div>
                                            </div>
                                        </div>
                                        <div class="message-preview">
                                            <div class="message-subject">{{ $message->subject }}</div>
                                            <div class="message-excerpt">{{ \Illuminate\Support\Str::limit(strip_tags($message->content), 100) }}</div>
                                        </div>
                                        <div class="message-meta">
                                            <div class="message-time">{{ $message->created_at->diffForHumans() }}</div>
                                            <div class="message-status">
                                                @if($message->read)
                                                    <span class="status-badge read" title="Read {{ $message->read_at ? 'on ' . $message->read_at->format('M d, Y g:i A') : '' }}">
                                                        <i class="fas fa-check-double"></i> Read
                                                    </span>
                                                @else
                                                    <span class="status-badge unread">
                                                        <i class="fas fa-check"></i> Sent
                                                    </span>
                                                @endif
                                            </div>
                                            <div class="message-actions">
                                                <a href="{{ route('messages.show', $message->id) }}" class="btn-icon" title="View">
                                                    <i class="fas fa-eye"></i>
                                                </a>
                                                <form action="{{ route('messages.destroy', $message->id) }}" method="POST" class="d-inline delete-form">
                                                    @csrf
                                                    @method('DELETE')
                                                    <button type="submit" class="btn-icon text-danger" title="Delete">
                                                        <i class="fas fa-trash-alt"></i>
                                                    </button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                @endforeach
                            </div>
                            
                            <div class="pagination-container">
                                {{ $sent->appends(['inbox_page' => $inbox->currentPage()])->links() }}
                            </div>
                        @endif
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- JavaScript Dependencies -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script>
    
    <script>
        $(document).ready(function() {
            // Tab switching
            $('.tab-btn').click(function() {
                $('.tab-btn').removeClass('active');
                $(this).addClass('active');
                
                const tabId = $(this).data('tab') + '-tab';
                $('.tab-pane').removeClass('active');
                $('#' + tabId).addClass('active');
            });
            
            // Message item click to view
            $('.message-item').click(function(e) {
                // Don't navigate if clicking on an action button
                if ($(e.target).closest('.message-actions').length === 0) {
                    const messageId = $(this).data('id');
                    window.location.href = '{{ url("messages") }}/' + messageId;
                }
            });
            
            // Refresh messages
            $('#refreshMessages').click(function() {
                location.reload();
            });
            
            // Mark all as read
            $('#markAllRead').click(function() {
                if (confirm('Are you sure you want to mark all messages as read?')) {
                    $.ajax({
                        url: '{{ route("messages.mark-all-read") }}',
                        type: 'POST',
                        data: {
                            _token: '{{ csrf_token() }}'
                        },
                        success: function(response) {
                            location.reload();
                        },
                        error: function(error) {
                            console.error('Error marking messages as read:', error);
                            alert('An error occurred while marking messages as read.');
                        }
                    });
                }
            });
            
            // Delete confirmation
            $('.delete-form').submit(function(e) {
                e.preventDefault();
                
                if (confirm('Are you sure you want to delete this message? This action cannot be undone.')) {
                    this.submit();
                }
            });
        });
    </script>
</body>
</html>

messagereply.blade

@extends('layouts.app')

@section('title', 'Reply to Message - CREAMS')

@section('styles')
<style>
    .reply-container {
        background: var(--light-color);
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        overflow: hidden;
        margin-bottom: 20px;
    }
    
    .reply-header {
        padding: 20px;
        border-bottom: 1px solid var(--border-color);
        background-color: var(--light-bg);
        display: flex;
        align-items: center;
        gap: 15px;
    }
    
    .reply-icon {
        width: 40px;
        height: 40px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        color: var(--light-color);
        background: linear-gradient(135deg, var(--primary-color), #00d2ff);
    }
    
    .reply-title {
        font-size: 20px;
        font-weight: 600;
        color: var(--dark-color);
        margin-bottom: 0;
    }
    
    .reply-content {
        padding: 20px;
    }
    
    .form-actions {
        display: flex;
        justify-content: space-between;
        margin-top: 20px;
    }
    
    .original-message {
        margin-top: 30px;
        border: 1px solid var(--border-color);
        border-radius: 10px;
        background-color: var(--light-bg);
        padding: 15px;
    }
    
    .original-message-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--border-color);
    }
    
    .original-message-title {
        font-size: 16px;
        font-weight: 600;
        color: var(--dark-color);
    }
    
    .original-message-meta {
        font-size: 12px;
        color: #888;
    }
    
    .original-message-content {
        font-size: 14px;
        line-height: 1.6;
        color: var(--text-color);
        padding: 10px;
        background-color: var(--light-color);
        border-radius: 8px;
    }
    
    @media (max-width: 768px) {
        .form-actions {
            flex-direction: column;
            gap: 10px;
        }
        
        .form-actions .btn {
            width: 100%;
        }
    }
</style>
@endsection

@section('content')
<div class="container-fluid">
    <!-- Page Header -->
    <div class="dashboard-header mb-4">
        <div class="row align-items-center">
            <div class="col">
                <h1 class="dashboard-title">Reply to Message</h1>
                <div class="breadcrumb">
                    <a href="{{ route('dashboard') }}">Dashboard</a>
                    <span class="separator">/</span>
                    <a href="{{ route('messages.index') }}">Messages</a>
                    <span class="separator">/</span>
                    <span class="current">Reply</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="reply-container">
        <div class="reply-header">
            <div class="reply-icon">
                <i class="fas fa-reply"></i>
            </div>
            <h2 class="reply-title">Reply to {{ $recipient_name }}</h2>
        </div>
        
        <div class="reply-content">
            <form action="{{ route('messages.store') }}" method="POST">
                @csrf
                <input type="hidden" name="recipient_id" value="{{ $recipient_id }}">
                <input type="hidden" name="recipient_type" value="{{ $recipient_type }}">
                
                <div class="form-group">
                    <label for="subject">Subject</label>
                    <input type="text" class="form-control" id="subject" name="subject" value="{{ $subject }}" required>
                </div>
                
                <div class="form-group">
                    <label for="content">Message</label>
                    <textarea class="form-control" id="content" name="content" rows="6" required></textarea>
                </div>
                
                <div class="form-actions">
                    <a href="{{ route('messages.show', $message->id) }}" class="btn btn-outline-secondary">
                        <i class="fas fa-times"></i> Cancel
                    </a>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-paper-plane"></i> Send Reply
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <div class="original-message">
        <div class="original-message-header">
            <div class="original-message-title">
                <i class="fas fa-envelope mr-2"></i> Original Message
            </div>
            <div class="original-message-meta">
                From {{ $message->sender_name }}  {{ $message->created_at->format('F d, Y - h:i A') }}
            </div>
        </div>
        <div class="original-message-content">
            {{ $message->content }}
        </div>
    </div>
</div>
@endsection

messageshow.blade

@extends('layouts.app')

@section('title', 'Message Details - CREAMS')

@section('styles')
<style>
    .message-container {
        background: var(--light-color);
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        overflow: hidden;
        margin-bottom: 20px;
    }
    
    .message-header {
        padding: 20px;
        border-bottom: 1px solid var(--border-color);
        background-color: var(--light-bg);
    }
    
    .message-subject {
        font-size: 22px;
        font-weight: 600;
        color: var(--dark-color);
        margin-bottom: 15px;
    }
    
    .message-meta {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        flex-wrap: wrap;
        gap: 15px;
    }
    
    .message-participants {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }
    
    .message-participant {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .participant-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        overflow: hidden;
    }
    
    .participant-avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    
    .participant-info {
        display: flex;
        flex-direction: column;
    }
    
    .participant-name {
        font-weight: 600;
        color: var(--dark-color);
        font-size: 14px;
    }
    
    .participant-role {
        font-size: 12px;
        color: #888;
    }
    
    .message-details {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        gap: 5px;
    }
    
    .message-time {
        font-size: 13px;
        color: #888;
    }
    
    .message-status {
        font-size: 13px;
        display: inline-flex;
        align-items: center;
        gap: 5px;
        padding: 3px 8px;
        border-radius: 20px;
    }
    
    .message-status.read {
        background: rgba(46, 213, 115, 0.15);
        color: var(--success-color);
    }
    
    .message-status.unread {
        background: rgba(255, 165, 2, 0.15);
        color: var(--warning-color);
    }
    
    .message-content {
        padding: 20px;
    }
    
    .message-body {
        font-size: 16px;
        line-height: 1.6;
        color: var(--text-color);
        margin-bottom: 20px;
        white-space: pre-line; /* Preserve line breaks */
    }
    
    .message-actions {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 20px;
        background-color: var(--light-bg);
        border-top: 1px solid var(--border-color);
    }
    
    .action-buttons {
        display: flex;
        gap: 10px;
    }
    
    .conversation-container {
        margin-top: 30px;
    }
    
    .conversation-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }
    
    .conversation-title {
        font-size: 18px;
        font-weight: 600;
        color: var(--dark-color);
    }
    
    .conversation-timeline {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }
    
    .conversation-item {
        display: flex;
        flex-direction: column;
        gap: 10px;
        padding: 15px;
        border-radius: 10px;
        background-color: var(--light-bg);
    }
    
    .conversation-item.highlight {
        border-left: 4px solid var(--primary-color);
        background-color: rgba(50, 189, 234, 0.05);
    }
    
    .conversation-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .conversation-sender {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .sender-avatar {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        overflow: hidden;
    }
    
    .sender-avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    
    .sender-name {
        font-weight: 600;
        color: var(--dark-color);
        font-size: 14px;
    }
    
    .sender-role {
        font-size: 12px;
        color: #888;
    }
    
    .conversation-time {
        font-size: 12px;
        color: #888;
    }
    
    .conversation-content {
        font-size: 14px;
        line-height: 1.6;
        color: var(--text-color);
        white-space: pre-line; /* Preserve line breaks */
        padding-left: 40px; /* Align with sender name */
    }
    
    @media (max-width: 768px) {
        .message-meta {
            flex-direction: column;
            align-items: flex-start;
        }
        
        .message-details {
            align-items: flex-start;
            width: 100%;
        }
        
        .message-actions {
            flex-direction: column;
            gap: 15px;
            align-items: flex-start;
        }
        
        .action-buttons {
            width: 100%;
            flex-wrap: wrap;
        }
    }
</style>
@endsection

@section('content')
<div class="container-fluid">
    <!-- Page Header -->
    <div class="dashboard-header mb-4">
        <div class="row align-items-center">
            <div class="col">
                <h1 class="dashboard-title">Message Details</h1>
                <div class="breadcrumb">
                    <a href="{{ route('dashboard') }}">Dashboard</a>
                    <span class="separator">/</span>
                    <a href="{{ route('messages.index') }}">Messages</a>
                    <span class="separator">/</span>
                    <span class="current">View</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="message-container">
        <div class="message-header">
            <div class="message-subject">{{ $message->subject }}</div>
            <div class="message-meta">
                <div class="message-participants">
                    <div class="message-participant">
                        <div class="participant-avatar">
                            @php
                                $senderAvatar = 'images/default-avatar.png';
                                if ($message->sender_type === 'admin') {
                                    $user = \App\Models\Admins::find($message->sender_id);
                                } elseif ($message->sender_type === 'supervisor') {
                                    $user = \App\Models\Supervisors::find($message->sender_id);
                                } elseif ($message->sender_type === 'teacher') {
                                    $user = \App\Models\Teachers::find($message->sender_id);
                                } elseif ($message->sender_type === 'ajk') {
                                    $user = \App\Models\AJKs::find($message->sender_id);
                                }
                                
                                if ($user && $user->avatar) {
                                    $senderAvatar = 'storage/avatars/' . $user->avatar;
                                }
                            @endphp
                            <img src="{{ asset($senderAvatar) }}" alt="Sender" class="avatar-img">
                        </div>
                        <div class="participant-info">
                            <div class="participant-name">{{ $message->sender_name }}</div>
                            <div class="participant-role">{{ ucfirst($message->sender_type) }} (Sender)</div>
                        </div>
                    </div>
                    <div class="message-participant">
                        <div class="participant-avatar">
                            @php
                                $recipientAvatar = 'images/default-avatar.png';
                                if ($message->recipient_type === 'admin') {
                                    $user = \App\Models\Admins::find($message->recipient_id);
                                } elseif ($message->recipient_type === 'supervisor') {
                                    $user = \App\Models\Supervisors::find($message->recipient_id);
                                } elseif ($message->recipient_type === 'teacher') {
                                    $user = \App\Models\Teachers::find($message->recipient_id);
                                } elseif ($message->recipient_type === 'ajk') {
                                    $user = \App\Models\AJKs::find($message->recipient_id);
                                }
                                
                                if ($user && $user->avatar) {
                                    $recipientAvatar = 'storage/avatars/' . $user->avatar;
                                } 
                            @endphp
                            <img src="{{ asset($recipientAvatar) }}" alt="Recipient" class="avatar-img">
                        </div>
                        <div class="participant-info">
                            <div class="participant-name">{{ $message->recipient_name }}</div>
                            <div class="participant-role">{{ ucfirst($message->recipient_type) }} (Recipient)</div>
                        </div>
                    </div>
                </div>
                <div class="message-details">
                    <div class="message-time">{{ $message->created_at->format('F d, Y - h:i A') }}</div>
                    <div class="message-status {{ $message->read ? 'read' : 'unread' }}">
                        @if($message->read)
                            <i class="fas fa-check-double"></i> Read {{ $message->read_at ? '(' . $message->read_at->diffForHumans() . ')' : '' }}
                        @else
                            <i class="fas fa-check"></i> Delivered
                        @endif
                    </div>
                </div>
            </div>
        </div>
        <div class="message-content">
            <div class="message-body">{{ $message->content }}</div>
        </div>
        <div class="message-actions">
            <div class="action-buttons">
                <a href="{{ route('messages.index') }}" class="btn btn-outline-secondary">
                    <i class="fas fa-arrow-left"></i> Back to Messages
                </a>
                <a href="{{ route('messages.reply', $message->id) }}" class="btn btn-primary">
                    <i class="fas fa-reply"></i> Reply
                </a>
            </div>
            <form action="{{ route('messages.destroy', $message->id) }}" method="POST" class="delete-form">
                @csrf
                @method('DELETE')
                <button type="submit" class="btn btn-danger">
                    <i class="fas fa-trash-alt"></i> Delete
                </button>
            </form>
        </div>
    </div>
    
    @if($conversation->count() > 1)
        <div class="conversation-container">
            <div class="conversation-header">
                <h2 class="conversation-title">Conversation History</h2>
            </div>
            <div class="conversation-timeline">
                @foreach($conversation as $conversationMessage)
                    <div class="conversation-item {{ $conversationMessage->id == $message->id ? 'highlight' : '' }}">
                        <div class="conversation-meta">
                            <div class="conversation-sender">
                                <div class="sender-avatar">
                                    @php
                                        $conversationAvatar = 'images/default-avatar.png';
                                        if ($conversationMessage->sender_type === 'admin') {
                                            $user = \App\Models\Admins::find($conversationMessage->sender_id);
                                        } elseif ($conversationMessage->sender_type === 'supervisor') {
                                            $user = \App\Models\Supervisors::find($conversationMessage->sender_id);
                                        } elseif ($conversationMessage->sender_type === 'teacher') {
                                            $user = \App\Models\Teachers::find($conversationMessage->sender_id);
                                        } elseif ($conversationMessage->sender_type === 'ajk') {
                                            $user = \App\Models\AJKs::find($conversationMessage->sender_id);
                                        }
                                        
                                        if ($user && $user->avatar) {
                                            $conversationAvatar = 'storage/avatars/' . $user->avatar;
                                        } 
                                    @endphp
                                    <img src="{{ asset($conversationAvatar) }}" alt="{{ $conversationMessage->sender_name }}" class="avatar-img">
                                </div>
                                <div>
                                    <span class="sender-name">{{ $conversationMessage->sender_name }}</span>
                                </div>
                            </div>
                            <div class="conversation-time">
                                {{ $conversationMessage->created_at->format('M d, Y g:i A') }}
                            </div>
                        </div>
                        <div class="conversation-content">
                            {{ $conversationMessage->content }}
                        </div>
                    </div>
                @endforeach
            </div>
        </div>
    @endif
</div>
@endsection

@section('scripts')
<script>
    $(document).ready(function() {
        // Delete confirmation
        $('.delete-form').submit(function(e) {
            e.preventDefault();
            
            if (confirm('Are you sure you want to delete this message? This action cannot be undone.')) {
                this.submit();
            }
        });
    });
</script>
@endsection

notificationindex.blade

@extends('layouts.app')

@section('title', 'Notifications - CREAMS')

@section('styles')
<link rel="stylesheet" href="{{ asset('css/notificationstyle.css') }}">
<style>
    .notification-container {
        background: #fff;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        overflow: hidden;
        margin-bottom: 20px;
    }
    
    .notification-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border-bottom: 1px solid #e9ecef;
    }
    
    .notification-title {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 0;
    }
    
    .notification-actions {
        display: flex;
        gap: 10px;
    }
    
    .action-btn {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        padding: 6px 12px;
        border-radius: 5px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        border: 1px solid #e9ecef;
        background-color: #f8f9fa;
        transition: all 0.3s ease;
    }
    
    .action-btn:hover {
        background-color: #e9ecef;
    }
    
    .notification-filter {
        display: flex;
        align-items: center;
        padding: 15px 20px;
        border-bottom: 1px solid #e9ecef;
    }
    
    .filter-label {
        font-weight: 500;
        margin-right: 15px;
    }
    
    .filter-options {
        display: flex;
        gap: 15px;
    }
    
    .filter-option {
        padding: 5px 10px;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .filter-option:hover {
        background-color: #f8f9fa;
    }
    
    .filter-option.active {
        background-color: var(--primary-color);
        color: white;
    }
    
    .notification-list {
        max-height: 600px;
        overflow-y: auto;
    }
    
    .notification-item {
        display: flex;
        padding: 15px 20px;
        border-bottom: 1px solid #e9ecef;
        transition: all 0.3s ease;
        cursor: pointer;
    }
    
    .notification-item:hover {
        background-color: #f8f9fa;
    }
    
    .notification-item.unread {
        background-color: rgba(50, 189, 234, 0.05);
    }
    
    .notification-icon {
        width: 50px;
        height: 50px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 15px;
        font-size: 20px;
        color: white;
        flex-shrink: 0;
    }
    
    .notification-icon.primary {
        background: linear-gradient(135deg, var(--primary-color), #00d2ff);
    }
    
    .notification-icon.success {
        background: linear-gradient(135deg, #2ed573, #00e676);
    }
    
    .notification-icon.info {
        background: linear-gradient(135deg, #00b0ff, #0091ea);
    }
    
    .notification-icon.warning {
        background: linear-gradient(135deg, #ffa502, #ffca28);
    }
    
    .notification-icon.danger {
        background: linear-gradient(135deg, #ff4757, #ff5252);
    }
    
    .notification-content {
        flex-grow: 1;
        margin-right: 15px;
    }
    
    .notification-title-text {
        font-weight: 600;
        margin-bottom: 5px;
    }
    
    .notification-message {
        color: #666;
        font-size: 14px;
        margin-bottom: 5px;
    }
    
    .notification-time {
        color: #888;
        font-size: 12px;
    }
    
    .notification-meta {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        gap: 10px;
    }
    
    .notification-actions-item {
        display: flex;
        gap: 5px;
    }
    
    .btn-icon {
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 5px;
        background-color: #f8f9fa;
        border: 1px solid #e9ecef;
        color: #666;
        transition: all 0.3s ease;
    }
    
    .btn-icon:hover {
        background-color: #e9ecef;
    }
    
    .text-danger {
        color: #ff4757 !important;
    }
    
    .empty-state {
        padding: 40px 20px;
        text-align: center;
    }
    
    .empty-icon {
        font-size: 3rem;
        color: #ccc;
        margin-bottom: 20px;
    }
    
    .pagination-container {
        padding: 15px 20px;
        display: flex;
        justify-content: center;
    }
</style>
@endsection

@section('content')
<div class="container-fluid">
    <!-- Page Header -->
    <div class="dashboard-header mb-4">
        <div class="row align-items-center">
            <div class="col">
                <h1 class="dashboard-title">Notifications</h1>
                <div class="breadcrumb">
                    <a href="{{ route('dashboard') }}">Dashboard</a>
                    <span class="separator">/</span>
                    <span class="current">Notifications</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="notification-container">
        <div class="notification-header">
            <h2 class="notification-title">
                <i class="fas fa-bell mr-2"></i> Notifications
                @if($unreadCount > 0)
                    <span class="badge badge-primary">{{ $unreadCount }}</span>
                @endif
            </h2>
            <div class="notification-actions">
                <button class="action-btn" id="markAllReadBtn">
                    <i class="fas fa-check-double"></i> Mark All as Read
                </button>
                <button class="action-btn" id="clearReadBtn">
                    <i class="fas fa-trash"></i> Clear Read Notifications
                </button>
            </div>
        </div>
        
        <div class="notification-filter">
            <div class="filter-label">Filter:</div>
            <div class="filter-options">
                <div class="filter-option active" data-filter="all">All</div>
                <div class="filter-option" data-filter="unread">Unread</div>
                <div class="filter-option" data-filter="message">Messages</div>
                <div class="filter-option" data-filter="activity">Activities</div>
                <div class="filter-option" data-filter="system">System</div>
            </div>
        </div>
        
        @if($notifications->isEmpty())
            <div class="empty-state">
                <div class="empty-icon">
                    <i class="fas fa-bell-slash"></i>
                </div>
                <h3>No notifications</h3>
                <p>You don't have any notifications yet. When you receive notifications, they will appear here.</p>
            </div>
        @else
            <div class="notification-list">
                @foreach($notifications as $notification)
                    <div class="notification-item {{ $notification->read ? '' : 'unread' }}" data-id="{{ $notification->id }}" data-type="{{ $notification->type }}">
                        <div class="notification-icon {{ $notification->color }}">
                            <i class="{{ $notification->icon }}"></i>
                        </div>
                        <div class="notification-content">
                            <div class="notification-title-text">{{ $notification->title }}</div>
                            <div class="notification-message">{{ $notification->content }}</div>
                            <div class="notification-time">{{ $notification->created_at->diffForHumans() }}</div>
                        </div>
                        <div class="notification-meta">
                            @if(!$notification->read)
                                <span class="badge badge-info">New</span>
                            @endif
                            <div class="notification-actions-item">
                                <a href="{{ route('notifications.show', $notification->id) }}" class="btn-icon" title="View">
                                    <i class="fas fa-eye"></i>
                                </a>
                                @if(!$notification->read)
                                    <form action="{{ route('notifications.mark-read', $notification->id) }}" method="POST" class="d-inline">
                                        @csrf
                                        <button type="submit" class="btn-icon" title="Mark as Read">
                                            <i class="fas fa-check"></i>
                                        </button>
                                    </form>
                                @endif
                                <form action="{{ route('notifications.destroy', $notification->id) }}" method="POST" class="d-inline delete-form">
                                    @csrf
                                    @method('DELETE')
                                    <button type="submit" class="btn-icon text-danger" title="Delete">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                @endforeach
            </div>
            
            <div class="pagination-container">
                {{ $notifications->links() }}
            </div>
        @endif
    </div>
</div>
@endsection

@section('scripts')
<script>
    $(document).ready(function() {
        // Filter notifications
        $('.filter-option').click(function() {
            $('.filter-option').removeClass('active');
            $(this).addClass('active');
            
            const filter = $(this).data('filter');
            
            if (filter === 'all') {
                $('.notification-item').show();
            } else if (filter === 'unread') {
                $('.notification-item').hide();
                $('.notification-item.unread').show();
            } else {
                $('.notification-item').hide();
                $('.notification-item[data-type="' + filter + '"]').show();
            }
        });
        
        // Mark all as read
        $('#markAllReadBtn').click(function() {
            if (confirm('Are you sure you want to mark all notifications as read?')) {
                $.ajax({
                    url: '{{ route("notifications.mark-all-read") }}',
                    type: 'POST',
                    data: {
                        _token: '{{ csrf_token() }}'
                    },
                    success: function(response) {
                        location.reload();
                    },
                    error: function(error) {
                        console.error('Error marking notifications as read:', error);
                        alert('An error occurred while marking notifications as read.');
                    }
                });
            }
        });
        
        // Clear read notifications
        $('#clearReadBtn').click(function() {
            if (confirm('Are you sure you want to clear all read notifications? This action cannot be undone.')) {
                $.ajax({
                    url: '{{ route("notifications.clear-read") }}',
                    type: 'POST',
                    data: {
                        _token: '{{ csrf_token() }}'
                    },
                    success: function(response) {
                        location.reload();
                    },
                    error: function(error) {
                        console.error('Error clearing read notifications:', error);
                        alert('An error occurred while clearing read notifications.');
                    }
                });
            }
        });
        
        // Delete confirmation
        $('.delete-form').submit(function(e) {
            e.preventDefault();
            
            if (confirm('Are you sure you want to delete this notification? This action cannot be undone.')) {
                this.submit();
            }
        });
        
        // Notification item click to view
        $('.notification-item').click(function(e) {
            // Don't navigate if clicking on an action button
            if ($(e.target).closest('.notification-actions-item').length === 0) {
                const notificationId = $(this).data('id');
                window.location.href = '{{ url("notifications") }}/' + notificationId;
            }
        });
    });
</script>
@endsection

notificationshow.blade

@extends('layouts.app')

@section('title', 'Notification Details - CREAMS')

@section('styles')
<style>
    .notification-detail-container {
        background: var(--light-color);
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        overflow: hidden;
        margin-bottom: 20px;
    }
    
    .notification-header {
        display: flex;
        align-items: center;
        padding: 20px;
        border-bottom: 1px solid var(--border-color);
        background-color: var(--light-bg);
    }
    
    .notification-icon {
        width: 50px;
        height: 50px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 15px;
        font-size: 20px;
        color: var(--light-color);
    }
    
    .notification-icon.primary {
        background: linear-gradient(135deg, var(--primary-color), #00d2ff);
    }
    
    .notification-icon.success {
        background: linear-gradient(135deg, var(--success-color), #00e676);
    }
    
    .notification-icon.info {
        background: linear-gradient(135deg, #00b0ff, #0091ea);
    }
    
    .notification-icon.warning {
        background: linear-gradient(135deg, var(--warning-color), #ffca28);
    }
    
    .notification-icon.danger {
        background: linear-gradient(135deg, var(--danger-color), #ff5252);
    }
    
    .notification-icon.secondary {
        background: linear-gradient(135deg, #9e9e9e, #757575);
    }
    
    .notification-title-section {
        flex: 1;
    }
    
    .notification-title-text {
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 5px;
        color: var(--dark-color);
    }
    
    .notification-time {
        font-size: 14px;
        color: #888;
    }
    
    .notification-content {
        padding: 20px;
    }
    
    .notification-message {
        font-size: 16px;
        line-height: 1.6;
        color: var(--text-color);
        margin-bottom: 20px;
    }
    
    .notification-meta {
        padding: 15px 20px;
        background-color: var(--light-bg);
        border-top: 1px solid var(--border-color);
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .notification-actions {
        display: flex;
        gap: 10px;
    }
    
    .related-content {
        margin-top: 20px;
    }
    
    .related-title {
        font-size: 18px;
        font-weight: 600;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--border-color);
    }
    
    .related-notification-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }
    
    .related-notification-item {
        display: flex;
        padding: 15px;
        border-radius: 10px;
        background-color: var(--light-bg);
        transition: all var(--transition-speed) ease;
    }
    
    .related-notification-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }
    
    .related-notification-item .notification-icon {
        width: 40px;
        height: 40px;
        font-size: 16px;
    }
    
    @media (max-width: 768px) {
        .notification-meta {
            flex-direction: column;
            gap: 15px;
            align-items: flex-start;
        }
        
        .notification-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 15px;
        }
        
        .notification-actions {
            width: 100%;
            justify-content: space-between;
        }
    }
</style>
@endsection

@section('content')
<div class="container-fluid">
    <!-- Page Header -->
    <div class="dashboard-header mb-4">
        <div class="row align-items-center">
            <div class="col">
                <h1 class="dashboard-title">Notification Details</h1>
                <div class="breadcrumb">
                    <a href="{{ route('dashboard') }}">Dashboard</a>
                    <span class="separator">/</span>
                    <a href="{{ route('notifications.index') }}">Notifications</a>
                    <span class="separator">/</span>
                    <span class="current">View</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="notification-detail-container">
        <div class="notification-header">
            <div class="notification-icon {{ $notification->color }}">
                <i class="{{ $notification->icon }}"></i>
            </div>
            <div class="notification-title-section">
                <div class="notification-title-text">{{ $notification->title }}</div>
                <div class="notification-time">{{ $notification->created_at->format('F d, Y - h:i A') }} ({{ $notification->created_at->diffForHumans() }})</div>
            </div>
        </div>
        
        <div class="notification-content">
            <div class="notification-message">
                {{ $notification->content }}
            </div>
            
            @if(isset($notification->data) && !empty($notification->data))
                <div class="additional-data">
                    <h3 class="mb-3">Additional Information</h3>
                    <div class="card">
                        <div class="card-body">
                            <pre class="mb-0">{{ json_encode($notification->data, JSON_PRETTY_PRINT) }}</pre>
                        </div>
                    </div>
                </div>
            @endif
        </div>
        
        <div class="notification-meta">
            <div class="notification-status">
                @if($notification->read)
                    <span class="badge badge-success"><i class="fas fa-check-circle mr-1"></i> Read on {{ $notification->read_at ? $notification->read_at->format('F d, Y - h:i A') : 'unknown date' }}</span>
                @else
                    <span class="badge badge-info"><i class="fas fa-envelope mr-1"></i> Unread</span>
                @endif
            </div>
            <div class="notification-actions">
                <a href="{{ route('notifications.index') }}" class="btn btn-outline-secondary">
                    <i class="fas fa-arrow-left"></i> Back
                </a>
                @if(!$notification->read)
                    <form action="{{ route('notifications.mark-read', $notification->id) }}" method="POST" class="d-inline">
                        @csrf
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-check"></i> Mark as Read
                        </button>
                    </form>
                @endif
                <form action="{{ route('notifications.destroy', $notification->id) }}" method="POST" class="d-inline delete-form">
                    @csrf
                    @method('DELETE')
                    <button type="submit" class="btn btn-danger">
                        <i class="fas fa-trash-alt"></i> Delete
                    </button>
                </form>
            </div>
        </div>
    </div>
    
    @if($notification->type === 'message')
        <div class="notification-detail-container related-content">
            <div class="notification-content">
                <h3 class="related-title">Related Message</h3>
                <p>This notification was generated from a message. You can view the full message details or conversation history.</p>
                <div class="text-center mt-4">
                    <a href="{{ route('messages.index') }}" class="btn btn-primary">
                        <i class="fas fa-envelope"></i> Go to Messages
                    </a>
                </div>
            </div>
        </div>
    @endif
</div>
@endsection

@section('scripts')
<script>
    $(document).ready(function() {
        // Delete confirmation
        $('.delete-form').submit(function(e) {
            e.preventDefault();
            
            if (confirm('Are you sure you want to delete this notification? This action cannot be undone.')) {
                this.submit();
            }
        });
    });
</script>
@endsection

profile.blade

```php
@extends('layouts.app')

@section('title', 'User Profile - CREAMS')

@section('styles')
<style>
    /* Profile styles */
    .profile-container {
        background: #fff;
        border-radius: 10px;
        box-shadow: 0 0 15px rgba(0,0,0,0.05);
        margin-bottom: 30px;
        overflow: hidden;
    }
    
    .profile-header {
        padding: 25px;
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        color: #fff;
        position: relative;
        display: flex;
        align-items: center;
    }
    
    .profile-avatar {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        position: relative;
        background: #fff;
        margin-right: 30px;
    }
    
    .profile-avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    
    .avatar-overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 40px;
        background: rgba(0,0,0,0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        opacity: 0;
    }
    
    .profile-avatar:hover .avatar-overlay {
        opacity: 1;
    }
    
    .avatar-loading {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .profile-info {
        flex-grow: 1;
    }
    
    .profile-info h2 {
        font-size: 24px;
        font-weight: 600;
        margin-bottom: 5px;
    }
    
    .profile-role {
        font-size: 14px;
        opacity: 0.9;
        margin-bottom: 15px;
        display: inline-block;
        padding: 4px 10px;
        background: rgba(255,255,255,0.2);
        border-radius: 20px;
    }
    
    .profile-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
    }
    
    .meta-item {
        display: flex;
        align-items: center;
        font-size: 14px;
    }
    
    .meta-item i {
        margin-right: 8px;
        opacity: 0.8;
    }
    
    .edit-profile-btn {
        position: absolute;
        top: 25px;
        right: 25px;
        padding: 8px 20px;
        border-radius: 50px;
        background: rgba(255,255,255,0.2);
        color: #fff;
        border: none;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
    }
    
    .edit-profile-btn:hover {
        background: rgba(255,255,255,0.3);
    }
    
    .edit-profile-btn i {
        margin-right: 8px;
    }
    
    .edit-profile-btn.active {
        background: rgba(255,0,0,0.2);
    }
    
    .profile-tabs {
        padding: 25px;
    }
    
    .profile-tabs .nav-pills {
        border-bottom: 1px solid #eee;
        padding-bottom: 15px;
    }
    
    .profile-tabs .nav-link {
        border-radius: 50px;
        padding: 8px 20px;
        font-weight: 500;
        color: #555;
    }
    
    .profile-tabs .nav-link.active {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        color: #fff;
    }
    
    .profile-tabs .nav-link i {
        margin-right: 8px;
    }
    
    .tab-content {
        padding-top: 25px;
    }
    
    .form-actions {
        margin-top: 20px;
        padding-top: 20px;
        border-top: 1px solid #eee;
        display: flex;
        justify-content: flex-end;
        gap: 10px;
    }

    .password-strength {
        margin-top: 20px;
    }
    
    .password-strength .progress {
        height: 10px;
        margin-top: 8px;
        margin-bottom: 8px;
    }
</style>
@endsection

@section('content')
<div class="container-fluid">
    <!-- Page Header -->
    <div class="dashboard-header mb-4">
        <div class="row align-items-center">
            <div class="col">
                <h1 class="dashboard-title">My Profile</h1>
                <div class="breadcrumb">
                    <a href="{{ route('dashboard') }}">Dashboard</a>
                    <span class="separator">/</span>
                    <span class="current">My Profile</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Avatar upload error alert -->
    <div id="avatar-error" class="alert alert-danger mb-4" style="display: none;">
        <i class="fas fa-exclamation-circle mr-2"></i>
        <span id="avatar-error-text"></span>
        <button type="button" class="close" onclick="$('#avatar-error').hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    
    <!-- Alerts -->
    @if(session('success'))
    <div class="alert alert-success alert-dismissible fade show mb-4" role="alert">
        <i class="fas fa-check-circle mr-2"></i> {{ session('success') }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    @endif
    
    @if(session('error'))
    <div class="alert alert-danger alert-dismissible fade show mb-4" role="alert">
        <i class="fas fa-exclamation-circle mr-2"></i> {{ session('error') }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    @endif
    
    @if ($errors->any())
    <div class="alert alert-danger alert-dismissible fade show mb-4" role="alert">
        <ul class="mb-0">
            @foreach ($errors->all() as $error)
            <li>{{ $error }}</li>
            @endforeach
        </ul>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    @endif
    
    <!-- Profile Container -->
    <div class="profile-container">
        <div class="profile-header">
            <div class="profile-avatar" id="avatar-container">
                @if(isset($user['avatar']) && $user['avatar'])
                    <img src="{{ asset('storage/avatars/' . $user['avatar']) }}" alt="{{ $user['name'] ?? 'User' }}" id="avatar-preview">
                @else
                    <img src="{{ asset('images/default-avatar.png') }}" alt="{{ $user['name'] ?? 'User' }}" id="avatar-preview">
                @endif
                <div class="avatar-overlay" id="avatar-upload-btn" title="Change Profile Photo">
                    <i class="fas fa-camera"></i>
                </div>
                <div id="avatar-loading" class="avatar-loading" style="display: none;">
                    <div class="spinner-border text-light" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                </div>
            </div>
            <div class="profile-info">
                <h2>{{ $user['name'] ?? 'User' }}</h2>
                <div class="profile-role">{{ ucfirst($role) }}</div>
                <div class="profile-meta">
                    <div class="meta-item">
                        <i class="fas fa-envelope"></i>
                        <span>{{ $user['email'] ?? 'No email' }}</span>
                    </div>
                    @if(isset($user['phone']) && $user['phone'])
                    <div class="meta-item">
                        <i class="fas fa-phone"></i>
                        <span>{{ $user['phone'] }}</span>
                    </div>
                    @endif
                    @if(isset($user['iium_id']) && $user['iium_id'])
                    <div class="meta-item">
                        <i class="fas fa-id-card"></i>
                        <span>{{ $user['iium_id'] }}</span>
                    </div>
                    @endif
                </div>
            </div>
            
            <button class="edit-profile-btn" id="edit-profile-toggle">
                <i class="fas fa-edit"></i> Edit Profile
            </button>
        </div>
        
        <!-- Hidden file input for avatar upload -->
        <form id="avatarForm" action="{{ route('profile.avatar') }}" method="POST" enctype="multipart/form-data" style="display: none;">
            @csrf
            <input type="file" id="avatarInput" name="avatar" accept="image/jpeg,image/png,image/jpg,image/gif">
        </form>
        
        <!-- Debug hidden fields -->
        <input type="hidden" id="debug_phone" value="{{ $user['phone'] ?? '' }}">
        <input type="hidden" id="debug_address" value="{{ $user['address'] ?? '' }}">
        <input type="hidden" id="debug_bio" value="{{ $user['bio'] ?? '' }}">
        <input type="hidden" id="debug_dob" value="{{ isset($user['date_of_birth']) && $user['date_of_birth'] ? date('Y-m-d', strtotime($user['date_of_birth'])) : '' }}">
        
        <!-- Profile Tabs -->
        <div class="profile-tabs">
            <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                <li class="nav-item" role="presentation">
                    <a class="nav-link active" id="pills-edit-tab" data-toggle="pill" href="#pills-edit" role="tab" aria-controls="pills-edit" aria-selected="true">
                        <i class="fas fa-user-edit"></i> Personal Information
                    </a>
                </li>
                <li class="nav-item" role="presentation">
                    <a class="nav-link" id="pills-password-tab" data-toggle="pill" href="#pills-password" role="tab" aria-controls="pills-password" aria-selected="false">
                        <i class="fas fa-key"></i> Change Password
                    </a>
                </li>
                <li class="nav-item" role="presentation">
                    <a class="nav-link" id="pills-preferences-tab" data-toggle="pill" href="#pills-preferences" role="tab" aria-controls="pills-preferences" aria-selected="false">
                        <i class="fas fa-cog"></i> Preferences
                    </a>
                </li>
            </ul>
            <div class="tab-content" id="pills-tabContent">
                <!-- Edit Profile Tab -->
                <div class="tab-pane fade show active" id="pills-edit" role="tabpanel" aria-labelledby="pills-edit-tab">
                    <form id="profile-form" action="{{ route('profile.update') }}" method="POST">
                        @csrf
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="name">Full Name</label>
                                    <input type="text" class="form-control" id="name" name="name" value="{{ $user['name'] ?? '' }}" readonly>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="email">Email Address</label>
                                    <input type="email" class="form-control" id="email" name="email" value="{{ $user['email'] ?? '' }}" readonly>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="phone">Phone Number</label>
                                    <input type="text" class="form-control editable-field" id="phone" name="phone" value="{{ $user['phone'] ?? '' }}" readonly>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="date_of_birth">Date of Birth</label>
                                    <input type="date" class="form-control editable-field" id="date_of_birth" name="date_of_birth" value="{{ isset($user['date_of_birth']) && $user['date_of_birth'] ? date('Y-m-d', strtotime($user['date_of_birth'])) : '' }}" readonly>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="address">Address</label>
                            <textarea class="form-control editable-field" id="address" name="address" rows="3" readonly>{{ $user['address'] ?? '' }}</textarea>
                        </div>
                        <div class="form-group">
                            <label for="bio">Bio</label>
                            <textarea class="form-control editable-field" id="bio" name="bio" rows="5" readonly>{{ $user['bio'] ?? '' }}</textarea>
                        </div>
                        <div class="form-actions" id="profile-actions" style="display: none;">
                            <button type="button" class="btn btn-outline-secondary" id="cancel-edit">Cancel</button>
                            <button type="submit" class="btn btn-primary">Save Changes</button>
                        </div>
                    </form>
                </div>
                
                <!-- Change Password Tab -->
                <div class="tab-pane fade" id="pills-password" role="tabpanel" aria-labelledby="pills-password-tab">
                    <form action="{{ route('profile.password') }}" method="POST">
                        @csrf
                        <div class="form-group">
                            <label for="current_password">Current Password</label>
                            <input type="password" class="form-control" id="current_password" name="current_password" required>
                            <small class="form-text text-muted">Enter your current password to verify your identity.</small>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="new_password">New Password</label>
                                    <input type="password" class="form-control" id="new_password" name="new_password" required>
                                    <small class="form-text text-muted">Password must be at least 8 characters and include at least one uppercase letter, one lowercase letter, one number, and one special character.</small>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="new_password_confirmation">Confirm New Password</label>
                                    <input type="password" class="form-control" id="new_password_confirmation" name="new_password_confirmation" required>
                                </div>
                            </div>
                        </div>
                        <div class="password-strength mt-3 mb-4" id="password-strength-meter">
                            <label>Password Strength:</label>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <small class="text-muted" id="password-strength-text">Enter a new password</small>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Change Password</button>
                        </div>
                    </form>
                </div>
                
                <!-- Preferences Tab (Placeholder for future development) -->
                <div class="tab-pane fade" id="pills-preferences" role="tabpanel" aria-labelledby="pills-preferences-tab">
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle mr-2"></i> Preferences management is coming soon. This feature will allow you to customize your CREAMS experience.
                    </div>
                    
                    <h4 class="mt-4 mb-3">Future Preference Options</h4>
                    
                    <div class="card mb-3">
                        <div class="card-header">
                            <h5 class="mb-0">Notification Settings</h5>
                        </div>
                        <div class="card-body">
                            <p class="text-muted">Control which notifications you receive and how they are delivered.</p>
                            <div class="form-group">
                                <div class="custom-control custom-switch">
                                    <input type="checkbox" class="custom-control-input" id="emailNotifications" disabled>
                                    <label class="custom-control-label" for="emailNotifications">Email Notifications</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="custom-control custom-switch">
                                    <input type="checkbox" class="custom-control-input" id="systemNotifications" disabled>
                                    <label class="custom-control-label" for="systemNotifications">System Notifications</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Display Preferences</h5>
                        </div>
                        <div class="card-body">
                            <p class="text-muted">Customize your dashboard and interface preferences.</p>
                            <div class="form-group">
                                <label for="theme">Theme</label>
                                <select class="form-control" id="theme" disabled>
                                    <option>Light</option>
                                    <option>Dark</option>
                                    <option>System Default</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@endsection

@section('scripts')
<script src="https://cdnjs.cloudflare.com/ajax/libs/zxcvbn/4.4.2/zxcvbn.js"></script>
<script>
    $(document).ready(function() {
        // Fix for Topbar Avatar and Search Bar
        // This ensures the topbar components work correctly
        $(document).on('click', '#userProfileToggle', function(e) {
            e.stopPropagation();
            $('#userDropdown').toggleClass('show');
            
            // Close notification menu if open
            const notificationMenu = document.getElementById('notificationMenu');
            if (notificationMenu) notificationMenu.classList.remove('show');
        });
        
        // Fix dropdown placement
        $('#userDropdown').css('position', 'absolute');
        $('#userDropdown').css('z-index', '9999');
        
        // Stop propagation on dropdown
        $(document).on('click', '#userDropdown', function(e) {
            e.stopPropagation();
        });
        
        // Close dropdowns when clicking outside
        $(document).on('click', function() {
            $('#userDropdown').removeClass('show');
            $('#notificationMenu').removeClass('show');
        });
        
        // Fix search bar functionality
        $('#globalSearch').on('keypress', function(e) {
            if (e.which == 13) {
                $(this).closest('form').submit();
                return false;
            }
        });
        
        // Fix for the "Recently accessed" continuously loading
        // This stops the initialization of recent items if it's already done
        if (window.recentItemsInitialized !== true) {
            // Only initialize once
            window.recentItemsInitialized = true;
            
            // Load recent items once on page load
            if (typeof loadRecentItems === 'function') {
                loadRecentItems();
            }
        }
        
        // CRITICAL FIX: Force set form field values from hidden fields to solve the null value problem
        $('#phone').val($('#debug_phone').val());
        $('#address').val($('#debug_address').val());
        $('#bio').val($('#debug_bio').val());
        $('#date_of_birth').val($('#debug_dob').val());
        
        // Avatar upload functionality
        $('#avatar-upload-btn').click(function(e) {
            e.preventDefault();
            $('#avatarInput').click();
        });
        
        // File size validation before upload
        $('#avatarInput').change(function() {
            const file = this.files[0];
            
            if (!file) {
                return;
            }
            
            // Check file size (2MB max)
            const maxSize = 2 * 1024 * 1024; // 2MB in bytes
            if (file.size > maxSize) {
                // Show error message
                $('#avatar-error-text').text('File size exceeds 2MB limit. Please choose a smaller image.');
                $('#avatar-error').show();
                // Clear file input
                $(this).val('');
                return;
            }
            
            // Check file type
            const acceptedTypes = ['image/jpeg', 'image/png', 'image/jpg', 'image/gif'];
            if (!acceptedTypes.includes(file.type)) {
                $('#avatar-error-text').text('Please select a valid image file (JPEG, PNG, JPG, or GIF).');
                $('#avatar-error').show();
                $(this).val('');
                return;
            }
            
            // Hide any error message
            $('#avatar-error').hide();
            
            // Show preview
            const reader = new FileReader();
            reader.onload = function(e) {
                $('#avatar-preview').attr('src', e.target.result);
            };
            reader.readAsDataURL(file);
            
            // Show loading indicator
            $('#avatar-loading').show();
            
            // Submit form
            $('#avatarForm').submit();
        });
        
        // Edit profile toggle button
        $('#edit-profile-toggle').click(function() {
            const isEditing = $(this).hasClass('active');
            
            if (isEditing) {
                // Disable editing
                $(this).removeClass('active');
                $(this).html('<i class="fas fa-edit"></i> Edit Profile');
                
                // Make specific fields readonly individually
                $('#phone').prop('readonly', true);
                $('#date_of_birth').prop('readonly', true);
                $('#address').prop('readonly', true);
                $('#bio').prop('readonly', true);
                
                $('#profile-actions').hide();
                
                // Update visual styles
                $('.editable-field').css('background-color', '#f8f9fa');
            } else {
                // Enable editing
                $(this).addClass('active');
                $(this).html('<i class="fas fa-times"></i> Cancel');
                
                // Make specific fields editable individually
                $('#phone').prop('readonly', false);
                $('#date_of_birth').prop('readonly', false);
                $('#address').prop('readonly', false);
                $('#bio').prop('readonly', false);
                
                $('#profile-actions').show();
                
                // Update visual styles
                $('.editable-field').css('background-color', '#fff');
                
                // Focus on the first editable field
                $('#phone').focus();
            }
        });
        
        // Cancel edit button
        $('#cancel-edit').click(function() {
            // Reset the form with original values
            $('#profile-form')[0].reset();
            
            // Make sure to reset fields with data from hidden fields
            $('#phone').val($('#debug_phone').val());
            $('#address').val($('#debug_address').val());
            $('#bio').val($('#debug_bio').val());
            $('#date_of_birth').val($('#debug_dob').val());
            
            // Disable editing
            $('#edit-profile-toggle').removeClass('active');
            $('#edit-profile-toggle').html('<i class="fas fa-edit"></i> Edit Profile');
            
            // Make fields readonly
            $('#phone').prop('readonly', true);
            $('#date_of_birth').prop('readonly', true);
            $('#address').prop('readonly', true);
            $('#bio').prop('readonly', true);
            
            $('#profile-actions').hide();
            
            // Update visual styles
            $('.editable-field').css('background-color', '#f8f9fa');
        });
        
        // Password strength meter
        $('#new_password').on('input', function() {
            const password = $(this).val();
            
            if (password.length === 0) {
                updateStrengthMeter(0, 'Enter a new password');
                return;
            }
            
            // Use zxcvbn to evaluate password strength
            const result = zxcvbn(password);
            const score = result.score;
            
            // Update UI based on score (0-4)
            let message = '';
            let progressClass = '';
            
            switch(score) {
                case 0:
                    message = 'Very weak password';
                    progressClass = 'bg-danger';
                    break;
                case 1:
                    message = 'Weak password';
                    progressClass = 'bg-danger';
                    break;
                case 2:
                    message = 'Fair password';
                    progressClass = 'bg-warning';
                    break;
                case 3:
                    message = 'Good password';
                    progressClass = 'bg-info';
                    break;
                case 4:
                    message = 'Strong password';
                    progressClass = 'bg-success';
                    break;
            }
            
            // If there are specific suggestions, add them to the message
            if (result.feedback.suggestions.length > 0) {
                message += ': ' + result.feedback.suggestions[0];
            }
            
            // Update the progress bar
            updateStrengthMeter((score + 1) * 20, message, progressClass);
        });
        
        function updateStrengthMeter(percentage, message, cssClass) {
            const progressBar = $('#password-strength-meter .progress-bar');
            const messageEl = $('#password-strength-text');
            
            progressBar.css('width', percentage + '%');
            progressBar.attr('aria-valuenow', percentage);
            
            // Remove all color classes and add the appropriate one
            progressBar.removeClass('bg-danger bg-warning bg-info bg-success');
            if (cssClass) {
                progressBar.addClass(cssClass);
            }
            
            // Update message
            messageEl.text(message);
        }
        
        // Auto-hide alerts after 5 seconds
        setTimeout(function() {
            $('.alert-dismissible').alert('close');
        }, 5000);
        
        // Helper function to check if field is editable and apply styling
        function checkEditableFields() {
            $('.editable-field').each(function() {
                if (!$(this).prop('readonly')) {
                    $(this).css('background-color', '#fff');
                    $(this).css('border-color', '#32bdea');
                } else {
                    $(this).css('background-color', '#f8f9fa');
                    $(this).css('border-color', '#ced4da');
                }
            });
        }
        
        // Run initially and on any change
        checkEditableFields();
        $('.editable-field').on('change focus blur', checkEditableFields);
    });
</script>
@endsection
```

schedulehome.blade

<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timetable</title>
    <link rel="stylesheet" href="{{ asset('css/schedulehomestyle.css') }}">
    <link rel="shortcut icon" href="{{ asset('images/logo/favicon.png') }}" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>

<body>
    <div class="container">
        <nav>
            <ul class="sidebar-menu">
                <li class="{{ Route::currentRouteNamed('accountprofile') ? 'active' : '' }}">
                    <a href="{{ route('accountprofile') }}" class="logo">
                        <img src="{{ asset(Auth::user()->avatar) }}">
                        <div class="user-details">
                            <span class="nav-item">{{ Auth::user()->user_first_name }}</span>
                            <span class="nav-item role">{{ Auth::user()->role }}</span>
                        </div>
                    </a>
                </li>
                <li class="{{ Route::currentRouteNamed('register') ? 'active' : '' }}">
                    <a href="{{ route('register') }}">
                        <i class="fas fa-exclamation"></i>
                        <span class="nav-item">Register</span>
                    </a>
                </li>
                <li class="{{ Route::currentRouteNamed('teachershome', 'updateuserpage') ? 'active' : '' }}">
                    <a href="{{ route('teachershome') }}">
                        <i class="fas fa-person-chalkboard"></i>
                        <span class="nav-item">Staff</span>
                    </a>
                </li>
                <li class="{{ Route::currentRouteNamed('traineeshome') ? 'active' : '' }}">
                    <a href="{{ route('traineeshome') }}">
                        <i class="fas fa-address-card"></i>
                        <span class="nav-item">Trainee</span>
                    </a>
                </li>
                <li class="{{ Route::currentRouteNamed('teachershome', 'schedulehomepage') ? 'active' : '' }}">
                    <a href="{{ route('schedulehomepage') }}">
                        <i class="fas fa-calendar-days"></i>
                        <span class="nav-item">Schedule</span>
                    </a>
                </li>
                <li class="{{ Route::currentRouteNamed('assetmanagementpage') ? 'active' : '' }}">
                    <a href="{{ route('assetmanagementpage') }}">
                        <i class="fas fa-chair"></i>
                        <span class="nav-item">Asset</span>
                    </a>
                </li>
                <li class="{{ Route::currentRouteNamed('aboutus') ? 'active' : '' }}">
                    <a href="{{ route('aboutus') }}">
                        <i class="fas fa-info"></i>
                        <span class="nav-item">About</span>
                    </a>
                </li>
                <li>
                    <form id="logout-form" action="{{ route('logout') }}" method="POST" style="display: none;">
                        @csrf
                    </form>
                    <a href="{{ route('logout') }}" class="logout"
                        onclick="event.preventDefault(); document.getElementById('logout-form').submit();">
                        <i class="fas fa-sign-out-alt"></i>
                        <span class="nav-item">Log out</span>
                    </a>
                </li>
            </ul>
        </nav>

        <section class="activity-schedule">
            <div class="logo">
                <h1 class="logo-heading">CREAMS</h1>
                
            </div>
            <span class="small-text">Community-based REhAbilitation Management System</span>
            <br>
            <div class="page-heading">
                <h2 class="subheading">Activity Schedule</h2>
            </div>
            
            <br>
            <div class="messages">
                @if ($errors->any())
                    <div class="alert alert-danger">
                        <ul>
                            @foreach ($errors->all() as $error)
                                <li>{{ $error }}</li>
                            @endforeach
                        </ul>
                    </div>
                @endif

                @if (session('success'))
                    <div class="alert alert-success">
                        {{ session('success') }}
                    </div>
                @endif
            </div>

            <a href="{{ route('courseregistration') }}" class="btn btn-primary add-activity-btn">
                <i class="las la-plus mr-3"></i>Add Activity
            </a>

            <br>
            <br>
            <br>
            <div class="col-lg-12">
                <div class="table-responsive rounded mb-3">
                    <table id="data-table" class="data-table">
                        <thead>
                            <tr>
                                <th>No.</th>
                                <th>Course ID</th>
                                <th>Type</th>
                                <th>Teacher</th>
                                <th>Participants</th>
                                <th>Day</th>
                                <th>Start Time</th>
                                <th>End Time</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach ($courses as $index => $course)
                                <tr>
                                    <td>{{ $index + 1 }}</td>
                                    <td>{{ $course->course_id }}</td>
                                    <td>{{ $course->course_type }}</td>
                                    <td>{{ $course->teacher->user_first_name }}</td>
                                    <td>{{ $course->participant->trainee_first_name }}</td>
                                    <td>{{ \Carbon\Carbon::parse($course->course_day)->format('l') }}</td>
                                    <td>{{ $course->start_time }}</td>
                                    <td>{{ $course->end_time }}</td>
                                </tr>
                            @endforeach
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </div>

    <script src="https://kit.fontawesome.com/your-font-awesome-kit.js" crossorigin="anonymous"></script>
</body>

</html>

teachershome.blade

@extends('layouts.app')

@section('title', 'Staff Directory - CREAMS')

@section('styles')
<style>
    /* Staff Directory Styles */
    .teacher-card {
        transition: all 0.3s ease;
        border-radius: 10px;
        overflow: hidden;
        height: 100%;
        border: 1px solid rgba(0,0,0,0.1);
        box-shadow: 0 3px 10px rgba(0,0,0,0.08);
    }
    
    .teacher-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.12);
    }
    
    .teacher-header {
        padding: 15px 20px;
        background: linear-gradient(to right, var(--primary-color), var(--primary-color-light));
        color: white;
        position: relative;
    }
    
    .role-badge {
        position: absolute;
        top: 10px;
        right: 10px;
        border-radius: 20px;
        padding: 5px 12px;
        font-size: 0.75rem;
        font-weight: bold;
        text-transform: uppercase;
        background: rgba(255,255,255,0.2);
    }
    
    .teacher-avatar {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        object-fit: cover;
        border: 4px solid white;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        margin: -60px auto 15px;
        display: block;
        background-color: #f8f9fa;
    }
    
    .teacher-name {
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 5px;
        text-align: center;
    }
    
    .teacher-role {
        font-size: 0.9rem;
        color: #6c757d;
        text-align: center;
        margin-bottom: 15px;
    }
    
    .teacher-body {
        padding: 15px 20px;
    }
    
    .teacher-details {
        margin: 0;
        padding: 0;
        list-style: none;
    }
    
    .teacher-details li {
        display: flex;
        padding: 8px 0;
        border-bottom: 1px dashed #eee;
    }
    
    .teacher-details li:last-child {
        border-bottom: none;
    }
    
    .detail-label {
        font-weight: 500;
        width: 40%;
        color: #555;
    }
    
    .detail-value {
        width: 60%;
        color: #333;
    }
    
    .teacher-footer {
        padding: 15px 20px;
        background: #f8f9fa;
        border-top: 1px solid #eee;
        text-align: center;
    }
    
    /* Filter Section */
    .filter-section {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 30px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    
    .filter-title {
        font-size: 1.1rem;
        font-weight: 600;
        margin-bottom: 15px;
        color: var(--primary-color);
    }
    
    /* Teachers Sections Styles */
    .teachers-section {
        margin-bottom: 50px;
    }
    
    .section-header {
        border-bottom: 2px solid var(--primary-color);
        padding-bottom: 10px;
        margin-bottom: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .section-title {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--primary-color);
        margin: 0;
    }
    
    .section-action {
        color: var(--primary-color);
        font-size: 0.9rem;
        font-weight: 500;
        text-decoration: none;
    }
    
    .section-action:hover {
        text-decoration: underline;
    }
    
    /* Stats Cards */
    .stats-card {
        background: white;
        border-radius: 10px;
        padding: 20px;
        height: 100%;
        box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        transition: all 0.3s ease;
        border-left: 4px solid var(--primary-color);
    }
    
    .stats-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.12);
    }
    
    .stats-icon {
        width: 50px;
        height: 50px;
        border-radius: 10px;
        background: var(--primary-color);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 15px;
    }
    
    .stats-title {
        font-size: 0.9rem;
        color: #6c757d;
        margin-bottom: 5px;
    }
    
    .stats-value {
        font-size: 2rem;
        font-weight: 700;
        color: #333;
    }
    
    /* Activity Sections */
    .activity-section {
        margin-top: 50px;
    }
    
    .activity-list {
        margin: 0;
        padding: 0;
        list-style: none;
    }
    
    .activity-item {
        display: flex;
        align-items: center;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 10px;
        background: white;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        transition: all 0.3s ease;
    }
    
    .activity-item:hover {
        background: #f8f9fa;
        transform: translateX(5px);
    }
    
    .activity-icon {
        width: 40px;
        height: 40px;
        border-radius: 8px;
        background: var(--primary-color-light);
        color: var(--primary-color);
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 15px;
        flex-shrink: 0;
    }
    
    .activity-content {
        flex-grow: 1;
    }
    
    .activity-title {
        font-weight: 500;
        margin-bottom: 2px;
    }
    
    .activity-teachers {
        font-size: 0.85rem;
        color: #6c757d;
    }
    
    /* Empty State */
    .empty-state {
        padding: 50px 20px;
        text-align: center;
        background: white;
        border-radius: 10px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    
    .empty-icon {
        font-size: 4rem;
        color: #dee2e6;
        margin-bottom: 20px;
    }
    
    .empty-title {
        font-size: 1.5rem;
        font-weight: 600;
        color: #6c757d;
        margin-bottom: 10px;
    }
    
    .empty-description {
        color: #adb5bd;
        margin-bottom: 20px;
    }
    
    /* Role Colors */
    .role-admin {
        background-color: #4e73df !important;
    }
    
    .role-supervisor {
        background-color: #1cc88a !important;
    }
    
    .role-teacher {
        background-color: #36b9cc !important;
    }
    
    .role-ajk {
        background-color: #f6c23e !important;
    }
    
    /* Tabs for activity sections */
    .nav-tabs .nav-link {
        border: none;
        border-bottom: 3px solid transparent;
        color: #6c757d;
        font-weight: 500;
        padding: 10px 20px;
    }
    
    .nav-tabs .nav-link.active {
        border-bottom: 3px solid var(--primary-color);
        color: var(--primary-color);
        background: transparent;
    }
    
    /* Search Box */
    .search-bar {
        position: relative;
        margin-bottom: 20px;
    }
    
    .search-bar .form-control {
        padding-left: 45px;
        height: 50px;
        border-radius: 25px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    
    .search-bar .search-icon {
        position: absolute;
        left: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: #adb5bd;
    }
    
    /* Loading state */
    .loading-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(255,255,255,0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10;
        border-radius: 10px;
    }
    
    /* Dashboard charts */
    .chart-container {
        height: 250px;
    }
</style>
@endsection

@section('content')
<div class="container-fluid">
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">Staff Directory</h1>
        <div>
            @if(in_array($currentUserRole, ['admin', 'supervisor']))
            <a href="{{ route('auth.registerpage') }}" class="btn btn-primary btn-sm">
                <i class="fas fa-user-plus fa-sm"></i> Add Staff
            </a>
            @endif
            <a href="{{ route('dashboard') }}" class="btn btn-secondary btn-sm ml-2">
                <i class="fas fa-arrow-left fa-sm"></i> Back to Dashboard
            </a>
        </div>
    </div>

    @if(isset($error))
    <div class="alert alert-danger">
        {{ $error }}
    </div>
    @endif

    @if(session('success'))
    <div class="alert alert-success">
        {{ session('success') }}
    </div>
    @endif

    @if(session('error'))
    <div class="alert alert-danger">
        {{ session('error') }}
    </div>
    @endif

    <!-- Top Stats Cards -->
    <div class="row mb-4">
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="stats-card">
                <div class="stats-icon">
                    <i class="fas fa-users fa-2x"></i>
                </div>
                <div class="stats-title">Total Staff</div>
                <div class="stats-value">{{ $stats['total_users'] ?? 0 }}</div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="stats-card">
                <div class="stats-icon role-teacher">
                    <i class="fas fa-chalkboard-teacher fa-2x"></i>
                </div>
                <div class="stats-title">Teachers</div>
                <div class="stats-value">{{ $stats['teachers_count'] ?? 0 }}</div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="stats-card">
                <div class="stats-icon role-supervisor">
                    <i class="fas fa-user-tie fa-2x"></i>
                </div>
                <div class="stats-title">Supervisors</div>
                <div class="stats-value">{{ $stats['supervisors_count'] ?? 0 }}</div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="stats-card">
                <div class="stats-icon role-admin">
                    <i class="fas fa-user-shield fa-2x"></i>
                </div>
                <div class="stats-title">Administrators</div>
                <div class="stats-value">{{ $stats['admins_count'] ?? 0 }}</div>
            </div>
        </div>
    </div>

    <!-- Filter Section -->
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">
                <i class="fas fa-filter mr-1"></i> Filter Staff
            </h6>
        </div>
        <div class="card-body">
            <form id="filter-form" action="{{ route('teachershome') }}" method="GET">
                <div class="row">
                    <div class="col-md-3 mb-3">
                        <label for="role-filter">Role</label>
                        <select class="form-control" id="role-filter" name="role">
                            <option value="">All Roles</option>
                            @foreach($roles as $role)
                                <option value="{{ $role }}" {{ $filters['role'] == $role ? 'selected' : '' }}>
                                    {{ ucfirst($role) }}
                                </option>
                            @endforeach
                        </select>
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="activity-filter">Activity</label>
                        <select class="form-control" id="activity-filter" name="activity">
                            <option value="">All Activities</option>
                            @foreach($activities as $activity)
                                <option value="{{ $activity }}" {{ $filters['activity'] == $activity ? 'selected' : '' }}>
                                    {{ $activity }}
                                </option>
                            @endforeach
                        </select>
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="center-filter">center</label>
                        <select class="form-control" id="center-filter" name="center">
                            <option value="">All Centres</option>
                            @foreach($centers as $center)
                                <option value="{{ $center->center_id }}" {{ $filters['center'] == $center->center_id ? 'selected' : '' }}>
                                    {{ $center->center_name }}
                                </option>
                            @endforeach
                        </select>
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="search-input">Search</label>
                        <div class="search-bar">
                            <input type="text" class="form-control" id="search-input" name="search" placeholder="Search by name, email..." value="{{ $filters['search'] ?? '' }}">
                            <span class="search-icon">
                                <i class="fas fa-search"></i>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-filter mr-1"></i> Apply Filters
                        </button>
                        <a href="{{ route('teachershome') }}" class="btn btn-secondary ml-2">
                            <i class="fas fa-sync-alt mr-1"></i> Reset Filters
                        </a>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Activity Tabs -->
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">
                <i class="fas fa-users mr-1"></i> Staff Directory
            </h6>
        </div>
        <div class="card-body">
            <ul class="nav nav-tabs" id="activityTabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="all-tab" data-toggle="tab" href="#all" role="tab">
                        All Staff
                    </a>
                </li>
                @foreach($activities as $index => $activity)
                    <li class="nav-item">
                        <a class="nav-link" id="activity-{{ $index }}-tab" data-toggle="tab" href="#activity-{{ $index }}" role="tab">
                            {{ $activity }}
                        </a>
                    </li>
                @endforeach
            </ul>
            
            <div class="tab-content mt-4" id="activityTabsContent">
                <!-- All Staff Tab -->
                <div class="tab-pane fade show active" id="all" role="tabpanel">
                    <div class="row">
                        @forelse($users as $user)
                            <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                                <div class="teacher-card">
                                    <div class="teacher-header role-{{ $user->role }}">
                                        <span class="role-badge">{{ ucfirst($user->role) }}</span>
                                    </div>
                                    <img src="{{ asset($user->avatar ?? 'images/default-avatar.png') }}" 
                                         alt="{{ $user->user_name }}" 
                                         class="teacher-avatar"
                                         onerror="this.src='{{ asset('images/default-avatar.png') }}'">
                                    <div class="teacher-body">
                                        <h5 class="teacher-name">{{ $user->user_name }}</h5>
                                        <div class="teacher-role">{{ ucfirst($user->role) }}</div>
                                        <ul class="teacher-details">
                                            <li>
                                                <span class="detail-label">ID:</span>
                                                <span class="detail-value">{{ $user->id }}</span>
                                            </li>
                                            <li>
                                                <span class="detail-label">Major:</span>
                                                <span class="detail-value">{{ $user->user_activity_1 }}</span>
                                            </li>
                                            <li>
                                                <span class="detail-label">Minor:</span>
                                                <span class="detail-value">{{ $user->user_activity_2 ?? 'N/A' }}</span>
                                            </li>
                                            <li>
                                                <span class="detail-label">Centre:</span>
                                                <span class="detail-value">{{ $user->center_name ?? 'Not Assigned' }}</span>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="teacher-footer">
                                        <a href="{{ route('updateuser', ['id' => $user->id]) }}" class="btn btn-primary btn-sm">
                                            <i class="fas fa-user mr-1"></i> View Profile
                                        </a>
                                        @if(in_array($currentUserRole, ['admin', 'supervisor']) && 
                                            ($currentUserRole == 'admin' || $user->role != 'admin'))
                                            <a href="{{ route('updateuser', ['id' => $user->id]) }}" class="btn btn-info btn-sm ml-2">
                                                <i class="fas fa-edit mr-1"></i> Edit
                                            </a>
                                        @endif
                                    </div>
                                </div>
                            </div>
                        @empty
                            <div class="col-12">
                                <div class="empty-state">
                                    <div class="empty-icon">
                                        <i class="fas fa-users-slash"></i>
                                    </div>
                                    <h3 class="empty-title">No Staff Found</h3>
                                    <p class="empty-description">No staff members match your current filters.</p>
                                    <a href="{{ route('teachershome') }}" class="btn btn-primary">
                                        <i class="fas fa-sync-alt mr-1"></i> Reset Filters
                                    </a>
                                </div>
                            </div>
                        @endforelse
                    </div>
                </div>
                
                <!-- Activity Tabs -->
                @foreach($activities as $index => $activity)
                    <div class="tab-pane fade" id="activity-{{ $index }}" role="tabpanel">
                        <div class="row">
                            @php
                                $activityUsers = $users->where('user_activity_1', $activity);
                            @endphp
                            
                            @forelse($activityUsers as $user)
                                <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                                    <div class="teacher-card">
                                        <div class="teacher-header role-{{ $user->role }}">
                                            <span class="role-badge">{{ ucfirst($user->role) }}</span>
                                        </div>
                                        <img src="{{ asset($user->avatar ?? 'images/default-avatar.png') }}" 
                                             alt="{{ $user->user_name }}" 
                                             class="teacher-avatar"
                                             onerror="this.src='{{ asset('images/default-avatar.png') }}'">
                                        <div class="teacher-body">
                                            <h5 class="teacher-name">{{ $user->user_name }}</h5>
                                            <div class="teacher-role">{{ ucfirst($user->role) }}</div>
                                            <ul class="teacher-details">
                                                <li>
                                                    <span class="detail-label">ID:</span>
                                                    <span class="detail-value">{{ $user->id }}</span>
                                                </li>
                                                <li>
                                                    <span class="detail-label">Major:</span>
                                                    <span class="detail-value">{{ $user->user_activity_1 }}</span>
                                                </li>
                                                <li>
                                                    <span class="detail-label">Minor:</span>
                                                    <span class="detail-value">{{ $user->user_activity_2 ?? 'N/A' }}</span>
                                                </li>
                                                <li>
                                                    <span class="detail-label">Centre:</span>
                                                    <span class="detail-value">{{ $user->center_name ?? 'Not Assigned' }}</span>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="teacher-footer">
                                            <a href="{{ route('updateuser', ['id' => $user->id]) }}" class="btn btn-primary btn-sm">
                                                <i class="fas fa-user mr-1"></i> View Profile
                                            </a>
                                            @if(in_array($currentUserRole, ['admin', 'supervisor']) && 
                                                ($currentUserRole == 'admin' || $user->role != 'admin'))
                                                <a href="{{ route('updateuser', ['id' => $user->id]) }}" class="btn btn-info btn-sm ml-2">
                                                    <i class="fas fa-edit mr-1"></i> Edit
                                                </a>
                                            @endif
                                        </div>
                                    </div>
                                </div>
                            @empty
                                <div class="col-12">
                                    <div class="empty-state">
                                        <div class="empty-icon">
                                            <i class="fas fa-users-slash"></i>
                                        </div>
                                        <h3 class="empty-title">No Staff in {{ $activity }}</h3>
                                        <p class="empty-description">There are no staff members assigned to this activity.</p>
                                    </div>
                                </div>
                            @endforelse
                        </div>
                    </div>
                @endforeach
            </div>
        </div>
    </div>

    <!-- Analysis Section: Stats by Role and center -->
    <div class="row">
        <!-- Role Distribution -->
        <div class="col-lg-6 mb-4">
            <div class="card shadow">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">
                        <i class="fas fa-chart-pie mr-1"></i> Staff by Role
                    </h6>
                </div>
                <div class="card-body">
                    <div class="chart-container">
                        <canvas id="roleChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- center Distribution -->
        <div class="col-lg-6 mb-4">
            <div class="card shadow">
                <div class="card-header py-3">
                    <h6 class="m-0 font-weight-bold text-primary">
                        <i class="fas fa-chart-bar mr-1"></i> Staff by Centre
                    </h6>
                </div>
                <div class="card-body">
                    <div class="chart-container">
                        <canvas id="centerChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Activity Distribution -->
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">
                <i class="fas fa-chart-line mr-1"></i> Staff by Activity Area
            </h6>
        </div>
        <div class="card-body">
            <div class="chart-container">
                <canvas id="activityChart"></canvas>
            </div>
        </div>
    </div>
</div>
@endsection

@section('scripts')
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>
<script>
$(document).ready(function() {
    // Initialize tabs
    $('.nav-tabs a').click(function(e) {
        e.preventDefault();
        $(this).tab('show');
    });
    
    // Handle filter form submission with AJAX
    $('#filter-form').on('submit', function(e) {
        e.preventDefault();
        const formData = $(this).serialize();
        
        $.ajax({
            url: '{{ route("teachershome") }}',
            type: 'GET',
            data: formData,
            beforeSend: function() {
                // Show loading state
                $('.tab-content').append('<div class="loading-overlay"><div class="spinner-border text-primary" role="status"><span class="sr-only">Loading...</span></div></div>');
            },
            success: function(response) {
                // Reload the page with the new filters
                window.location.href = '{{ route("teachershome") }}?' + formData;
            },
            error: function(xhr) {
                // Remove loading overlay
                $('.loading-overlay').remove();
                
                // Show error message
                alert('An error occurred while filtering staff. Please try again.');
                console.error(xhr.responseText);
            }
        });
    });
    
    // Role Distribution Chart
    const roleCtx = document.getElementById('roleChart').getContext('2d');
    const roleChart = new Chart(roleCtx, {
        type: 'pie',
        data: {
            labels: ['Admin', 'Supervisor', 'Teacher', 'AJK'],
            datasets: [{
                data: [
                    {{ $stats['admins_count'] ?? 0 }},
                    {{ $stats['supervisors_count'] ?? 0 }},
                    {{ $stats['teachers_count'] ?? 0 }},
                    {{ $stats['ajks_count'] ?? 0 }}
                ],
                backgroundColor: ['#4e73df', '#1cc88a', '#36b9cc', '#f6c23e'],
                hoverBackgroundColor: ['#2e59d9', '#17a673', '#2c9faf', '#f4b619'],
                hoverBorderColor: "rgba(234, 236, 244, 1)",
            }],
        },
        options: {
            maintainAspectRatio: false,
            tooltips: {
                backgroundColor: "rgb(255,255,255)",
                bodyFontColor: "#858796",
                borderColor: '#dddfeb',
                borderWidth: 1,
                xPadding: 15,
                yPadding: 15,
                displayColors: false,
                caretPadding: 10,
            },
            legend: {
                display: true,
                position: 'bottom'
            },
            cutoutPercentage: 0,
        },
    });
    
    // center Distribution Chart
    const centerData = @json($stats['center_breakdown'] ?? []);
    const centerLabels = Object.keys(centerData);
    const centerValues = Object.values(centerData);
    
    const centerCtx = document.getElementById('centerChart').getContext('2d');
    const centerChart = new Chart(centerCtx, {
        type: 'bar',
        data: {
            labels: centerLabels,
            datasets: [{
                label: 'Staff Count',
                data: centerValues,
                backgroundColor: '#4e73df',
                hoverBackgroundColor: '#2e59d9',
                borderWidth: 1
            }]
        },
        options: {
            maintainAspectRatio: false,
            scales: {
                xAxes: [{
                    gridLines: {
                        display: false,
                        drawBorder: false
                    },
                    ticks: {
                        maxTicksLimit: 6
                    },
                    maxBarThickness: 25,
                }],
                yAxes: [{
                    ticks: {
                        min: 0,
                        maxTicksLimit: 5,
                        padding: 10,
                    },
                    gridLines: {
                        color: "rgb(234, 236, 244)",
                        zeroLineColor: "rgb(234, 236, 244)",
                        drawBorder: false,
                        borderDash: [2],
                        zeroLineBorderDash: [2]
                    }
                }],
            },
            legend: {
                display: false
            },
            tooltips: {
                titleMarginBottom: 10,
                titleFontColor: '#6e707e',
                titleFontSize: 14,
                backgroundColor: "rgb(255,255,255)",
                bodyFontColor: "#858796",
                borderColor: '#dddfeb',
                borderWidth: 1,
                xPadding: 15,
                yPadding: 15,
                displayColors: false,
                caretPadding: 10,
            },
        }
    });
    
    // Activity Distribution Chart
    const activityData = @json($stats['activity_breakdown'] ?? []);
    const activityLabels = Object.keys(activityData);
    const activityValues = Object.values(activityData);
    
    const activityCtx = document.getElementById('activityChart').getContext('2d');
    const activityChart = new Chart(activityCtx, {
        type: 'horizontalBar',
        data: {
            labels: activityLabels,
            datasets: [{
                label: 'Staff Count',
                data: activityValues,
                backgroundColor: [
                    '#4e73df', '#1cc88a', '#36b9cc', '#f6c23e', '#e74a3b',
                    '#5a5c69', '#858796', '#4e73df', '#1cc88a', '#36b9cc', 
                ],
                borderWidth: 1
            }]
        },
        options: {
            maintainAspectRatio: false,
            scales: {
                xAxes: [{
                    ticks: {
                        min: 0,
                        maxTicksLimit: 5,
                    },
                    gridLines: {
                        color: "rgb(234, 236, 244)",
                        zeroLineColor: "rgb(234, 236, 244)",
                        drawBorder: false,
                        borderDash: [2],
                        zeroLineBorderDash: [2]
                    }
                }],
                yAxes: [{
                    gridLines: {
                        display: false,
                        drawBorder: false
                    },
                    ticks: {
                        maxTicksLimit: 10
                    }
                }],
            },
            legend: {
                display: false
            },
            tooltips: {
                titleMarginBottom: 10,
                titleFontColor: '#6e707e',
                titleFontSize: 14,
                backgroundColor: "rgb(255,255,255)",
                bodyFontColor: "#858796",
                borderColor: '#dddfeb',
                borderWidth: 1,
                xPadding: 15,
                yPadding: 15,
                displayColors: false,
                caretPadding: 10,
            },
        }
    });
});
</script>
@endsection

useredit.blade

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Edit User Profile - CREAMS Admin</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.css" />
  <link rel="shortcut icon" href="{{ asset('images/favicon.png') }}" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ asset('css/dashboardstyle.css') }}">
  <link rel="stylesheet" href="{{ asset('css/usermanagement.css') }}">
  <link rel="stylesheet" href="{{ asset('css/userprofile.css') }}">
</head>

<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-header">
      <div class="logo">
        <img src="{{ asset('images/favicon.png') }}" alt="CREAMS Logo">
        <span class="logo-text">CREAMS</span>
      </div>
      <div class="toggle-btn">
        <i class="fas fa-chevron-left"></i>
      </div>
    </div>
    
    <div class="admin-profile">
      <div class="admin-avatar">
        <img src="{{ asset('images/admin-avatar.jpg') }}" alt="Admin Avatar">
      </div>
      <div class="admin-info">
        <div class="admin-name">{{ $name }}</div>
        <div class="admin-role">Administrator</div>
      </div>
    </div>
    
    <ul class="nav-menu">
      <li>
        <a href="{{ route('admin.dashboard') }}">
          <i class="fas fa-home"></i>
          <span>Dashboard</span>
          <div class="tooltip-sidebar">Dashboard</div>
        </a>
      </li>
      <li class="active">
        <a href="{{ route('admin.users') }}">
          <i class="fas fa-users"></i>
          <span>Staff Management</span>
          <div class="tooltip-sidebar">Staff Management</div>
        </a>
      </li>
      <li>
        <a href="{{ route('admin.trainees') }}">
          <i class="fas fa-user-graduate"></i>
          <span>Tainee Management</span>
          <div class="tooltip-sidebar">Tainee Management</div>
        </a>
      </li>
      <li>
        <a href="{{ route('admin.activities') }}">
          <i class="fas fa-calendar-alt"></i>
          <span>Activities</span>
          <div class="tooltip-sidebar">Activities</div>
        </a>
      </li>
      <li>
        <a href="{{ route('admin.centers') }}">
          <i class="fas fa-building"></i>
          <span>Centres</span>
          <div class="tooltip-sidebar">Centres</div>
        </a>
      </li>
      <li>
        <a href="{{ route('admin.assets') }}">
          <i class="fas fa-boxes"></i>
          <span>Assets</span>
          <div class="tooltip-sidebar">Assets</div>
        </a>
      </li>
      <li>
        <a href="{{ route('admin.reports') }}">
          <i class="fas fa-chart-bar"></i>
          <span>Reports</span>
          <div class="tooltip-sidebar">Reports</div>
        </a>
      </li>
      <li>
        <a href="{{ route('admin.settings') }}">
          <i class="fas fa-cog"></i>
          <span>Settings</span>
          <div class="tooltip-sidebar">Settings</div>
        </a>
      </li>
    </ul>
    
    <form method="POST" action="{{ route('logout') }}" class="logout-container">
      @csrf
      <button type="submit" class="logout-btn">
        <i class="fas fa-sign-out-alt"></i>
        <span>Logout</span>
      </button>
    </form>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Header -->
    <div class="header">
      <div class="header-content">
        <div class="page-info">
          <h1 class="page-title">Edit User Profile</h1>
          <div class="breadcrumb">
            <a href="{{ route('admin.dashboard') }}">Dashboard</a>
            <span class="separator">/</span>
            <a href="{{ route('admin.users') }}">Staff Management</a>
            <span class="separator">/</span>
            <a href="{{ route('admin.user.view', 2) }}">Dr. Nurul Hafizah</a>
            <span class="separator">/</span>
            <span class="current">Edit</span>
          </div>
        </div>
        
        <div class="header-actions">
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" id="userSearch" placeholder="Search users...">
          </div>
          
          <div class="notification-bell">
            <i class="fas fa-bell"></i>
            <span class="notification-count">3</span>
          </div>
          
          <div class="admin-dropdown">
            <div class="admin-dropdown-toggle">
              <img src="{{ asset('images/admin-avatar.jpg') }}" alt="Admin">
              <span>{{ $name }}</span>
              <i class="fas fa-chevron-down"></i>
            </div>
            <div class="admin-dropdown-menu">
              <a href="{{ route('admin.profile') }}">
                <i class="fas fa-user"></i> My Profile
              </a>
              <a href="{{ route('admin.settings') }}">
                <i class="fas fa-cog"></i> Settings
              </a>
              <form method="POST" action="{{ route('logout') }}">
                @csrf
                <button type="submit">
                  <i class="fas fa-sign-out-alt"></i> Logout
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
      
      <div class="page-actions">
        <a href="{{ route('admin.users') }}" class="action-btn">
          <i class="fas fa-arrow-left"></i> Back to Users
        </a>
        <div class="action-group">
          <a href="{{ route('admin.user.view', 2) }}" class="action-btn">
            <i class="fas fa-eye"></i> View Profile
          </a>
          <a href="{{ url()->current() }}" class="action-btn active">
            <i class="fas fa-edit"></i> Edit Profile
          </a>
        </div>
      </div>
    </div>
    
    <!-- Content -->
    <div class="content-section">
      <div class="profile-container">
        <form class="edit-profile-form" action="{{ route('admin.user.update', 2) }}" method="POST" enctype="multipart/form-data">
          @csrf
          
          <div class="edit-avatar-container">
            <div class="edit-avatar">
              <img src="{{ asset('images/team/program-head.jpg') }}" alt="Dr. Nurul Hafizah">
            </div>
            <div class="avatar-buttons">
              <label for="avatar-upload" class="avatar-btn">
                <i class="fas fa-upload"></i> Upload Photo
              </label>
              <input type="file" id="avatar-upload" name="avatar" style="display: none;">
              <button type="button" class="avatar-btn" id="remove-avatar">
                <i class="fas fa-trash-alt"></i> Remove
              </button>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-group">
                <label for="iium_id">IIUM ID</label>
                <input type="text" class="form-control" id="iium_id" name="iium_id" value="EFGH5678" required>
                <small class="form-text text-muted">Format: 4 letters followed by 4 numbers (e.g., ABCD1234)</small>
              </div>
            </div>
            <div class="form-col">
              <div class="form-group">
                <label for="role">Role</label>
                <select class="form-control" id="role" name="role" required>
                  <option value="supervisor">Supervisor</option>
                  <option value="teacher" selected>Teacher</option>
                  <option value="ajk">AJK</option>
                </select>
              </div>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-group">
                <label for="first_name">First Name</label>
                <input type="text" class="form-control" id="first_name" name="first_name" value="Nurul Hafizah" required>
              </div>
            </div>
            <div class="form-col">
              <div class="form-group">
                <label for="last_name">Last Name</label>
                <input type="text" class="form-control" id="last_name" name="last_name" value="binti Abdullah" required>
              </div>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-group">
                <label for="email">Email</label>
                <input type="email" class="form-control" id="email" name="email" value="nurulh@iium.edu.my" required>
              </div>
            </div>
            <div class="form-col">
              <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="text" class="form-control" id="phone" name="phone" value="+60 12-345-6789" required>
              </div>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-group">
                <label for="position">Position/Title</label>
                <input type="text" class="form-control" id="position" name="position" value="Rehabilitation Services & Education">
              </div>
            </div>
            <div class="form-col">
              <div class="form-group">
                <label for="center_id">Centre</label>
                <select class="form-control" id="center_id" name="center_id" required>
                  <option value="1">IIUM Gombak</option>
                  <option value="2">IIUM Kuantan</option>
                  <option value="3">IIUM Pagoh</option>
                </select>
              </div>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-group">
                <label for="date_of_birth">Date of Birth</label>
                <input type="date" class="form-control" id="date_of_birth" name="date_of_birth" value="1985-04-12">
              </div>
            </div>
            <div class="form-col">
              <div class="form-group">
                <label for="gender">Gender</label>
                <select class="form-control" id="gender" name="gender" required>
                  <option value="male">Male</option>
                  <option value="female" selected>Female</option>
                  <option value="other">Other</option>
                </select>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label for="address">Address</label>
            <textarea class="form-control" id="address" name="address" rows="3">123 Jalan Gombak, 53100 Kuala Lumpur</textarea>
          </div>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-group">
                <label for="joined_date">Joined Date</label>
                <input type="date" class="form-control" id="joined_date" name="joined_date" value="2022-01-15">
              </div>
            </div>
            <div class="form-col">
              <div class="form-group">
                <label for="status">Status</label>
                <select class="form-control" id="status" name="status" required>
                  <option value="active" selected>Active</option>
                  <option value="inactive">Inactive</option>
                  <option value="leave">On Leave</option>
                </select>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label>Expertise & Skills</label>
            <div class="checkbox-group">
              <div class="checkbox-wrapper">
                <input type="checkbox" id="skill_special_education" name="skills[]" value="special_education" checked>
                <label for="skill_special_education">Special Education</label>
              </div>
              <div class="checkbox-wrapper">
                <input type="checkbox" id="skill_speech_therapy" name="skills[]" value="speech_therapy" checked>
                <label for="skill_speech_therapy">Speech Therapy</label>
              </div>
              <div class="checkbox-wrapper">
                <input type="checkbox" id="skill_occupational_therapy" name="skills[]" value="occupational_therapy" checked>
                <label for="skill_occupational_therapy">Occupational Therapy</label>
              </div>
            </div>
            <div class="checkbox-group">
              <div class="checkbox-wrapper">
                <input type="checkbox" id="skill_child_psychology" name="skills[]" value="child_psychology" checked>
                <label for="skill_child_psychology">Child Psychology</label>
              </div>
              <div class="checkbox-wrapper">
                <input type="checkbox" id="skill_curriculum" name="skills[]" value="curriculum" checked>
                <label for="skill_curriculum">Curriculum Development</label>
              </div>
              <div class="checkbox-wrapper">
                <input type="checkbox" id="skill_sensory" name="skills[]" value="sensory" checked>
                <label for="skill_sensory">Sensory Integration</label>
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label for="about">About</label>
            <textarea class="form-control" id="about" name="about" rows="4">Dr. Nurul Hafizah is a specialized educator with over 10 years of experience in special education and rehabilitation. She holds a PhD in Special Education from Universiti Kebangsaan Malaysia and has conducted extensive research on speech therapy for children with special needs.</textarea>
          </div>
          
          <h4 class="section-title">Emergency Contact</h4>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-group">
                <label for="emergency_name">Name</label>
                <input type="text" class="form-control" id="emergency_name" name="emergency_name" value="Ahmad Rahman">
              </div>
            </div>
            <div class="form-col">
              <div class="form-group">
                <label for="emergency_relationship">Relationship</label>
                <input type="text" class="form-control" id="emergency_relationship" name="emergency_relationship" value="Spouse">
              </div>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-col">
              <div class="form-group">
                <label for="emergency_phone">Phone</label>
                <input type="text" class="form-control" id="emergency_phone" name="emergency_phone" value="+60 13-987-6543">
              </div>
            </div>
            <div class="form-col">
              <div class="form-group">
                <label for="emergency_email">Email</label>
                <input type="email" class="form-control" id="emergency_email" name="emergency_email" value="ahmad.r@gmail.com">
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label for="password">New Password</label>
            <input type="password" class="form-control" id="password" name="password" placeholder="Leave blank to keep current password">
            <small class="form-text text-muted">Password must be at least 8 characters and include letters and numbers</small>
          </div>
          
          <div class="form-group">
            <label for="password_confirmation">Confirm New Password</label>
            <input type="password" class="form-control" id="password_confirmation" name="password_confirmation" placeholder="Leave blank to keep current password">
          </div>
          
          <div class="action-buttons">
            <a href="{{ route('admin.user.view', 2) }}" class="submit-btn cancel">Cancel</a>
            <button type="submit" class="submit-btn save">Save Changes</button>
          </div>
        </form>
      </div>
    </div>
    
    <!-- Footer -->
    <div class="dashboard-footer">
      <div class="footer-content">
        <div class="footer-logo">
          <img src="{{ asset('images/favicon.png') }}" alt="CREAMS Logo">
          <span>CREAMS</span>
        </div>
        <div class="footer-text">
          Community-based REhAbilitation Management System &copy; {{ date('Y') }} IIUM
        </div>
        <div class="footer-links">
          <a href="#" class="footer-link">Privacy Policy</a>
          <a href="#" class="footer-link">Terms of Service</a>
          <a href="#" class="footer-link">Help Centre</a>
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript Dependencies -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>
  
  <script>
    $(document).ready(function() {
      // Sidebar toggle
      $('.toggle-btn').click(function() {
        $('.sidebar').toggleClass('collapsed');
        $('.main-content').toggleClass('expanded');
      });
      
      // Admin dropdown
      $('.admin-dropdown-toggle').click(function() {
        $('.admin-dropdown-menu').toggleClass('show');
      });
      
      // Close dropdown when clicking outside
      $(document).click(function(event) {
        if (!$(event.target).closest('.admin-dropdown').length) {
          $('.admin-dropdown-menu').removeClass('show');
        }
      });
      
      // Remove avatar
      $('#remove-avatar').click(function() {
        Swal.fire({
          title: 'Remove Avatar',
          text: "Are you sure you want to remove the profile photo?",
          icon: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          confirmButtonText: 'Yes, remove it!'
        }).then((result) => {
          if (result.isConfirmed) {
            // Logic to remove avatar
            $('.edit-avatar img').attr('src', '{{ asset('images/default-avatar.png') }}');
            
            Swal.fire(
              'Removed!',
              'The profile photo has been removed.',
              'success'
            );
          }
        });
      });
      
      // Avatar upload preview
      $('#avatar-upload').change(function() {
        const file = this.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function(e) {
            $('.edit-avatar img').attr('src', e.target.result);
          }
          reader.readAsDataURL(file);
        }
      });
      
      // Form submission
      $('.edit-profile-form').submit(function(e) {
        e.preventDefault();
        
        // Validation logic can be added here
        
        // Simulate form submission
        Swal.fire({
          title: 'Saving Changes',
          text: 'Please wait...',
          allowOutsideClick: false,
          didOpen: () => {
            Swal.showLoading();
          }
        });
        
        // Simulate API request delay
        setTimeout(function() {
          Swal.fire({
            title: 'Success!',
            text: 'Profile information has been updated successfully.',
            icon: 'success',
            confirmButtonColor: '#32bdea'
          }).then((result) => {
            if (result.isConfirmed) {
              window.location.href = '{{ route('admin.user.view', 2) }}';
            }
          });
        }, 1500);
      });
    });
  </script>
</body>
</html>